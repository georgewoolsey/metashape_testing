<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 8 Statistical Analysis: Stand Basal Area | SfM Processing Software Comparison</title>
  <meta name="description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 8 Statistical Analysis: Stand Basal Area | SfM Processing Software Comparison" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 8 Statistical Analysis: Stand Basal Area | SfM Processing Software Comparison" />
  
  <meta name="twitter:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="George Woolsey" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="stats_detected.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/canopy ht. (m)_09cb84-1/data_stars_canopyhtm06b1f5.txt"></script>
<script src="libs/joda-0.0.1/joda.js"></script>
<script src="libs/joda-0.0.1/addImageQuery-bindings.js"></script>
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Code") elem.value = "Show Code";
    else elem.value = "Hide Code";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Code" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="sfm_data.html"><a href="sfm_data.html"><i class="fa fa-check"></i><b>2</b> SfM Image Processing Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="sfm_data.html"><a href="sfm_data.html#udp"><i class="fa fa-check"></i><b>2.1</b> User-Defined Parameters</a></li>
<li class="chapter" data-level="2.2" data-path="sfm_data.html"><a href="sfm_data.html#metashape-image-processing"><i class="fa fa-check"></i><b>2.2</b> Metashape Image Processing</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="sfm_data.html"><a href="sfm_data.html#metashape-report-pdf-data-extraction"><i class="fa fa-check"></i><b>2.2.1</b> Metashape Report PDF Data Extraction</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="sfm_data.html"><a href="sfm_data.html#metashape-report-data-exploration"><i class="fa fa-check"></i><b>2.3</b> Metashape Report Data Exploration</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="sfm_data.html"><a href="sfm_data.html#preliminaries"><i class="fa fa-check"></i><b>2.3.1</b> Preliminaries</a></li>
<li class="chapter" data-level="2.3.2" data-path="sfm_data.html"><a href="sfm_data.html#metashape-processing-time-summary"><i class="fa fa-check"></i><b>2.3.2</b> Metashape Processing Time Summary</a></li>
<li class="chapter" data-level="2.3.3" data-path="sfm_data.html"><a href="sfm_data.html#flight-and-sparse-cloud-metrics"><i class="fa fa-check"></i><b>2.3.3</b> Flight and Sparse Cloud Metrics</a></li>
<li class="chapter" data-level="2.3.4" data-path="sfm_data.html"><a href="sfm_data.html#metashape-dense-point-cloud-summary"><i class="fa fa-check"></i><b>2.3.4</b> Metashape Dense Point Cloud Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html"><i class="fa fa-check"></i><b>3</b> <strong>R</strong> Point Cloud Processing</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#odm-and-pix4d-image-processing"><i class="fa fa-check"></i><b>3.1</b> ODM and Pix4D Image Processing</a></li>
<li class="chapter" data-level="3.2" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#number-of-files-summary"><i class="fa fa-check"></i><b>3.2</b> Number of files summary</a></li>
<li class="chapter" data-level="3.3" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#processing-time-summary"><i class="fa fa-check"></i><b>3.3</b> Processing Time Summary</a></li>
<li class="chapter" data-level="3.4" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#processing-time-vs-points"><i class="fa fa-check"></i><b>3.4</b> Processing Time vs # Points</a></li>
<li class="chapter" data-level="3.5" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#processing-section-timing"><i class="fa fa-check"></i><b>3.5</b> Processing Section Timing</a></li>
<li class="chapter" data-level="3.6" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#summary-of-point-cloud-data"><i class="fa fa-check"></i><b>3.6</b> Summary of point cloud data</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#table"><i class="fa fa-check"></i><b>3.6.1</b> Table</a></li>
<li class="chapter" data-level="3.6.2" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#plot-summary"><i class="fa fa-check"></i><b>3.6.2</b> Plot summary</a></li>
<li class="chapter" data-level="3.6.3" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#sfm-image-processing-time-summary"><i class="fa fa-check"></i><b>3.6.3</b> SfM image processing time summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="stats_processing_time.html"><a href="stats_processing_time.html"><i class="fa fa-check"></i><b>4</b> Statistical Analysis: Processing Time</a>
<ul>
<li class="chapter" data-level="4.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#one_pred_mod"><i class="fa fa-check"></i><b>4.1</b> One Nominal Predictor</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#summary-statistics"><i class="fa fa-check"></i><b>4.1.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.1.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#linear-model"><i class="fa fa-check"></i><b>4.1.2</b> Linear Model</a></li>
<li class="chapter" data-level="4.1.3" data-path="stats_processing_time.html"><a href="stats_processing_time.html#anova"><i class="fa fa-check"></i><b>4.1.3</b> ANOVA</a></li>
<li class="chapter" data-level="4.1.4" data-path="stats_processing_time.html"><a href="stats_processing_time.html#one_pred_mod_bays"><i class="fa fa-check"></i><b>4.1.4</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#two_pred_mod"><i class="fa fa-check"></i><b>4.2</b> Two Nominal Predictors</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#summary-statistics-1"><i class="fa fa-check"></i><b>4.2.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.2.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#linear-model-1"><i class="fa fa-check"></i><b>4.2.2</b> Linear Model</a></li>
<li class="chapter" data-level="4.2.3" data-path="stats_processing_time.html"><a href="stats_processing_time.html#anova-1"><i class="fa fa-check"></i><b>4.2.3</b> ANOVA</a></li>
<li class="chapter" data-level="4.2.4" data-path="stats_processing_time.html"><a href="stats_processing_time.html#two_pred_mod_bays"><i class="fa fa-check"></i><b>4.2.4</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="stats_processing_time.html"><a href="stats_processing_time.html#two-nominal-predictors-site-effects"><i class="fa fa-check"></i><b>4.3</b> Two Nominal Predictors + site effects</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#summary-statistics-2"><i class="fa fa-check"></i><b>4.3.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.3.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#id_3_pred_mod_bays"><i class="fa fa-check"></i><b>4.3.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="stats_processing_time.html"><a href="stats_processing_time.html#gamma-two-nominal-predictors-site-effects"><i class="fa fa-check"></i><b>4.4</b> Gamma: Two Nominal Predictors + site effects</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#summary-statistics-3"><i class="fa fa-check"></i><b>4.4.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.4.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#id_4_pred_mod_bays"><i class="fa fa-check"></i><b>4.4.2</b> Bayesian</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="field_valid.html"><a href="field_valid.html"><i class="fa fa-check"></i><b>5</b> Field Validation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="field_valid.html"><a href="field_valid.html#setup"><i class="fa fa-check"></i><b>5.1</b> Setup</a></li>
<li class="chapter" data-level="5.2" data-path="field_valid.html"><a href="field_valid.html#data-load-functions"><i class="fa fa-check"></i><b>5.2</b> Data Load Functions</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="field_valid.html"><a href="field_valid.html#summary-of-field-validation-plot-data"><i class="fa fa-check"></i><b>5.2.1</b> Summary of field validation plot data</a></li>
<li class="chapter" data-level="5.2.2" data-path="field_valid.html"><a href="field_valid.html#load-uas-data-function"><i class="fa fa-check"></i><b>5.2.2</b> Load UAS data function</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="field_valid.html"><a href="field_valid.html#validation-data-functions"><i class="fa fa-check"></i><b>5.3</b> Validation Data Functions</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="field_valid.html"><a href="field_valid.html#true-positive-identification"><i class="fa fa-check"></i><b>5.3.1</b> True Positive Identification</a></li>
<li class="chapter" data-level="5.3.2" data-path="field_valid.html"><a href="field_valid.html#combine-with-commission-and-omission"><i class="fa fa-check"></i><b>5.3.2</b> Combine with Commission and Omission</a></li>
<li class="chapter" data-level="5.3.3" data-path="field_valid.html"><a href="field_valid.html#full-validation-function"><i class="fa fa-check"></i><b>5.3.3</b> Full validation function</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="field_valid.html"><a href="field_valid.html#full-pipeline-function"><i class="fa fa-check"></i><b>5.4</b> Full pipeline function</a></li>
<li class="chapter" data-level="5.5" data-path="field_valid.html"><a href="field_valid.html#apply-validation-for-all"><i class="fa fa-check"></i><b>5.5</b> Apply validation for all</a></li>
<li class="chapter" data-level="5.6" data-path="field_valid.html"><a href="field_valid.html#full-validation-summary-data"><i class="fa fa-check"></i><b>5.6</b> Full Validation Summary Data</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="field_valid.html"><a href="field_valid.html#true-positive-commission-ommission"><i class="fa fa-check"></i><b>5.6.1</b> True Positive, Commission, Ommission</a></li>
<li class="chapter" data-level="5.6.2" data-path="field_valid.html"><a href="field_valid.html#f-score"><i class="fa fa-check"></i><b>5.6.2</b> F-score</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="field_valid.html"><a href="field_valid.html#valid_ex"><i class="fa fa-check"></i><b>5.7</b> Example Validation Process</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="field_valid.html"><a href="field_valid.html#data-load"><i class="fa fa-check"></i><b>5.7.1</b> Data Load</a></li>
<li class="chapter" data-level="5.7.2" data-path="field_valid.html"><a href="field_valid.html#orthomosaic-data"><i class="fa fa-check"></i><b>5.7.2</b> Orthomosaic Data</a></li>
<li class="chapter" data-level="5.7.3" data-path="field_valid.html"><a href="field_valid.html#field-data"><i class="fa fa-check"></i><b>5.7.3</b> Field Data</a></li>
<li class="chapter" data-level="5.7.4" data-path="field_valid.html"><a href="field_valid.html#uas-data"><i class="fa fa-check"></i><b>5.7.4</b> UAS Data</a></li>
<li class="chapter" data-level="5.7.5" data-path="field_valid.html"><a href="field_valid.html#true-positives"><i class="fa fa-check"></i><b>5.7.5</b> True Positives</a></li>
<li class="chapter" data-level="5.7.6" data-path="field_valid.html"><a href="field_valid.html#field-uas-comparison"><i class="fa fa-check"></i><b>5.7.6</b> Field &amp; UAS Comparison</a></li>
<li class="chapter" data-level="5.7.7" data-path="field_valid.html"><a href="field_valid.html#combine-plots"><i class="fa fa-check"></i><b>5.7.7</b> Combine Plots</a></li>
<li class="chapter" data-level="5.7.8" data-path="field_valid.html"><a href="field_valid.html#height-vs.-dbh-of-tp-co-om"><i class="fa fa-check"></i><b>5.7.8</b> Height vs. DBH of <span class="math inline">\(Tp\)</span>, <span class="math inline">\(Co\)</span>, <span class="math inline">\(Om\)</span></a></li>
<li class="chapter" data-level="5.7.9" data-path="field_valid.html"><a href="field_valid.html#height-and-dbh-distribution-tp-co-om"><i class="fa fa-check"></i><b>5.7.9</b> Height and DBH Distribution <span class="math inline">\(Tp\)</span>, <span class="math inline">\(Co\)</span>, <span class="math inline">\(Om\)</span></a></li>
<li class="chapter" data-level="5.7.10" data-path="field_valid.html"><a href="field_valid.html#detected-overstory-tp-height-difference"><i class="fa fa-check"></i><b>5.7.10</b> Detected Overstory (<span class="math inline">\(TP\)</span>) Height Difference</a></li>
<li class="chapter" data-level="5.7.11" data-path="field_valid.html"><a href="field_valid.html#detected-overstory-tp-dbh-difference"><i class="fa fa-check"></i><b>5.7.11</b> Detected Overstory (<span class="math inline">\(TP\)</span>) DBH Difference</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="field_valid.html"><a href="field_valid.html#mapped-validation-for-all-sites"><i class="fa fa-check"></i><b>5.8</b> Mapped validation for all sites</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="field_valid.html"><a href="field_valid.html#plotting-function"><i class="fa fa-check"></i><b>5.8.1</b> Plotting Function</a></li>
<li class="chapter" data-level="5.8.2" data-path="field_valid.html"><a href="field_valid.html#validation-maps"><i class="fa fa-check"></i><b>5.8.2</b> Validation Maps</a></li>
<li class="chapter" data-level="5.8.3" data-path="field_valid.html"><a href="field_valid.html#validation-maps-combined"><i class="fa fa-check"></i><b>5.8.3</b> Validation Maps Combined</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="field_valid.html"><a href="field_valid.html#field-data-descriptive-statistics"><i class="fa fa-check"></i><b>5.9</b> Field Data Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="field_valid.html"><a href="field_valid.html#table-of-height-summary-statistics"><i class="fa fa-check"></i><b>5.9.1</b> Table of Height Summary Statistics</a></li>
<li class="chapter" data-level="5.9.2" data-path="field_valid.html"><a href="field_valid.html#table-of-dbh-summary-statistics"><i class="fa fa-check"></i><b>5.9.2</b> Table of DBH Summary Statistics</a></li>
<li class="chapter" data-level="5.9.3" data-path="field_valid.html"><a href="field_valid.html#height-and-dbh-distribution"><i class="fa fa-check"></i><b>5.9.3</b> Height and DBH Distribution</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="field_valid.html"><a href="field_valid.html#summary-of-dependent-variables"><i class="fa fa-check"></i><b>5.10</b> Summary of Dependent Variables</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="stats_validation.html"><a href="stats_validation.html"><i class="fa fa-check"></i><b>6</b> Statistical Analysis: Validation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="stats_validation.html"><a href="stats_validation.html#setup-1"><i class="fa fa-check"></i><b>6.1</b> Setup</a></li>
<li class="chapter" data-level="6.2" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-4"><i class="fa fa-check"></i><b>6.2</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.3" data-path="stats_validation.html"><a href="stats_validation.html#f_one_pred_mod"><i class="fa fa-check"></i><b>6.3</b> One Nominal Predictor</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-5"><i class="fa fa-check"></i><b>6.3.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.3.2" data-path="stats_validation.html"><a href="stats_validation.html#f_one_pred_mod_bays"><i class="fa fa-check"></i><b>6.3.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="stats_validation.html"><a href="stats_validation.html#f_two_pred_mod"><i class="fa fa-check"></i><b>6.4</b> Two Nominal Predictors</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-6"><i class="fa fa-check"></i><b>6.4.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.4.2" data-path="stats_validation.html"><a href="stats_validation.html#f_two_pred_mod_bays"><i class="fa fa-check"></i><b>6.4.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="stats_validation.html"><a href="stats_validation.html#f_three_pred_mod"><i class="fa fa-check"></i><b>6.5</b> Three Nominal Predictors</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-7"><i class="fa fa-check"></i><b>6.5.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.5.2" data-path="stats_validation.html"><a href="stats_validation.html#f_three_pred_mod_bays"><i class="fa fa-check"></i><b>6.5.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="stats_validation.html"><a href="stats_validation.html#three-nominal-predictors-site-effects"><i class="fa fa-check"></i><b>6.6</b> Three Nominal Predictors + site effects</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-8"><i class="fa fa-check"></i><b>6.6.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.6.2" data-path="stats_validation.html"><a href="stats_validation.html#f_4_pred_mod_bays"><i class="fa fa-check"></i><b>6.6.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="stats_validation.html"><a href="stats_validation.html#beta_mod"><i class="fa fa-check"></i><b>6.7</b> The beta: Three Nominal Predictors + site effects</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-9"><i class="fa fa-check"></i><b>6.7.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.7.2" data-path="stats_validation.html"><a href="stats_validation.html#f_5_pred_mod_bays"><i class="fa fa-check"></i><b>6.7.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="stats_validation.html"><a href="stats_validation.html#heterogeneous-variances-and-robustness-against-outliers"><i class="fa fa-check"></i><b>6.8</b> Heterogeneous variances and robustness against outliers</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="stats_validation.html"><a href="stats_validation.html#f_5_5_pred_mod_bays"><i class="fa fa-check"></i><b>6.8.1</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="stats_validation.html"><a href="stats_validation.html#overstory-and-understory-validation"><i class="fa fa-check"></i><b>6.9</b> Overstory and Understory Validation</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-10"><i class="fa fa-check"></i><b>6.9.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.9.2" data-path="stats_validation.html"><a href="stats_validation.html#f_6_pred_mod_bays"><i class="fa fa-check"></i><b>6.9.2</b> Bayesian</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stats_detected.html"><a href="stats_detected.html"><i class="fa fa-check"></i><b>7</b> Statistical Analysis: Detected Tree Reliability</a>
<ul>
<li class="chapter" data-level="7.1" data-path="stats_detected.html"><a href="stats_detected.html#stats_detected_model"><i class="fa fa-check"></i><b>7.1</b> Model Definition</a></li>
<li class="chapter" data-level="7.2" data-path="stats_detected.html"><a href="stats_detected.html#setup-2"><i class="fa fa-check"></i><b>7.2</b> Setup</a></li>
<li class="chapter" data-level="7.3" data-path="stats_detected.html"><a href="stats_detected.html#tree-height"><i class="fa fa-check"></i><b>7.3</b> Tree Height</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="stats_detected.html"><a href="stats_detected.html#summary-statistics-11"><i class="fa fa-check"></i><b>7.3.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="7.3.2" data-path="stats_detected.html"><a href="stats_detected.html#model-height-mean-error-bias"><i class="fa fa-check"></i><b>7.3.2</b> Model: Height Mean Error (bias)</a></li>
<li class="chapter" data-level="7.3.3" data-path="stats_detected.html"><a href="stats_detected.html#model-height-rmse-precision"><i class="fa fa-check"></i><b>7.3.3</b> Model: Height RMSE (precision)</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="stats_detected.html"><a href="stats_detected.html#stats_detected_dbh"><i class="fa fa-check"></i><b>7.4</b> Tree DBH</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="stats_detected.html"><a href="stats_detected.html#summary-statistics-12"><i class="fa fa-check"></i><b>7.4.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="7.4.2" data-path="stats_detected.html"><a href="stats_detected.html#model-dbh-mean-error-bias"><i class="fa fa-check"></i><b>7.4.2</b> Model: DBH Mean Error (bias)</a></li>
<li class="chapter" data-level="7.4.3" data-path="stats_detected.html"><a href="stats_detected.html#model-dbh-rmse-precision"><i class="fa fa-check"></i><b>7.4.3</b> Model: DBH RMSE (precision)</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="stats_detected.html"><a href="stats_detected.html#posterior-predictive-checks-1"><i class="fa fa-check"></i><b>7.5</b> Posterior Predictive Checks</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="stats_detected.html"><a href="stats_detected.html#prior-distriubutions"><i class="fa fa-check"></i><b>7.5.1</b> Prior Distriubutions</a></li>
<li class="chapter" data-level="7.5.2" data-path="stats_detected.html"><a href="stats_detected.html#trace-plots"><i class="fa fa-check"></i><b>7.5.2</b> Trace-plots</a></li>
<li class="chapter" data-level="7.5.3" data-path="stats_detected.html"><a href="stats_detected.html#hatr-values"><i class="fa fa-check"></i><b>7.5.3</b> <span class="math inline">\(\hat{R}\)</span> values</a></li>
<li class="chapter" data-level="7.5.4" data-path="stats_detected.html"><a href="stats_detected.html#ess-values"><i class="fa fa-check"></i><b>7.5.4</b> ESS values</a></li>
<li class="chapter" data-level="7.5.5" data-path="stats_detected.html"><a href="stats_detected.html#mean-and-sd"><i class="fa fa-check"></i><b>7.5.5</b> Mean and SD</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="stand_ba.html"><a href="stand_ba.html"><i class="fa fa-check"></i><b>8</b> Statistical Analysis: Stand Basal Area</a>
<ul>
<li class="chapter" data-level="8.1" data-path="stand_ba.html"><a href="stand_ba.html#setup-3"><i class="fa fa-check"></i><b>8.1</b> Setup</a></li>
<li class="chapter" data-level="8.2" data-path="stand_ba.html"><a href="stand_ba.html#ba-percent-error"><i class="fa fa-check"></i><b>8.2</b> BA Percent Error</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="stand_ba.html"><a href="stand_ba.html#summary-statistics-13"><i class="fa fa-check"></i><b>8.2.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="8.2.2" data-path="stand_ba.html"><a href="stand_ba.html#model-ba-percent-error"><i class="fa fa-check"></i><b>8.2.2</b> Model: BA Percent Error</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="stand_ba.html"><a href="stand_ba.html#ba-absolute-percent-error"><i class="fa fa-check"></i><b>8.3</b> BA Absolute Percent Error</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="stand_ba.html"><a href="stand_ba.html#summary-statistics-14"><i class="fa fa-check"></i><b>8.3.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="8.3.2" data-path="stand_ba.html"><a href="stand_ba.html#model-ba-absolute-percent-error"><i class="fa fa-check"></i><b>8.3.2</b> Model: BA Absolute Percent Error</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="stand_ba.html"><a href="stand_ba.html#posterior-predictive-checks-2"><i class="fa fa-check"></i><b>8.4</b> Posterior Predictive Checks</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="stand_ba.html"><a href="stand_ba.html#prior-distriubutions-1"><i class="fa fa-check"></i><b>8.4.1</b> Prior Distriubutions</a></li>
<li class="chapter" data-level="8.4.2" data-path="stand_ba.html"><a href="stand_ba.html#trace-plots-1"><i class="fa fa-check"></i><b>8.4.2</b> Trace-plots</a></li>
<li class="chapter" data-level="8.4.3" data-path="stand_ba.html"><a href="stand_ba.html#hatr-values-1"><i class="fa fa-check"></i><b>8.4.3</b> <span class="math inline">\(\hat{R}\)</span> values</a></li>
<li class="chapter" data-level="8.4.4" data-path="stand_ba.html"><a href="stand_ba.html#ess-values-1"><i class="fa fa-check"></i><b>8.4.4</b> ESS values</a></li>
<li class="chapter" data-level="8.4.5" data-path="stand_ba.html"><a href="stand_ba.html#mean-and-sd-1"><i class="fa fa-check"></i><b>8.4.5</b> Mean and SD</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SfM Processing Software Comparison</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stand_ba" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Section 8</span> Statistical Analysis: Stand Basal Area<a href="stand_ba.html#stand_ba" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section, we’ll evaluate the influence of the processing parameters on UAS-determined stand basal area. The accuracy UAS-derived stand basal area is impacted by the detection of individual trees (modeled in <a href="stats_validation.html#beta_mod">this section</a>) and the estimated DBH of those detected trees (modeled in <a href="stats_detected.html#stats_detected_dbh">this section</a>).</p>
<p>Even though there are concerns with the under-detection of smaller trees in the understory (<a href="https://scholar.google.com/scholar?cluster=11260597505702247290&amp;hl=en&amp;as_sdt=0,6">Tinkham &amp; Swayze 2021</a>), the use of tree lists derived from remote sensing data (i.e. UAS SfM and Lidar) can still be useful for monitoring aspects of ecosystem function that are driven by large trees (<a href="https://scholar.google.com/scholar?cluster=7029219876484941766&amp;hl=en&amp;as_sdt=0,6">Jeronimo et al. 2018</a>).</p>
<p><a href="https://scholar.google.com/scholar?cluster=7029219876484941766&amp;hl=en&amp;as_sdt=0,6">Jeronimo et al. 2018</a> summarize this idea:</p>
<blockquote>
<p>Large trees dominate basal area and biomass (Lutz et al. 2012; Bastin et al. 2015), carbon accumulation and growth (Sillett et al. 2010; Stephenson et al. 2014), and stand spatial heterogeneity (Lutz et al. 2013), and they provide unique structures that are keystone elements of many vertebrate species’ habitat requirements (Tews et al. 2004; North et al. 2017). Analysis of ITD results can capture the majority of variation in these processes even while omitting many smaller trees. For example, several studies have predicted biomass and volume directly from ITD results using allometric equations, explaining 67–93 percent of variation in even-aged pine plantations (Bortolot and Wynne 2005; Popescu 2007) and achieving error rates less than about 30 percent for Douglas-fir forests in various successional stages (Edson and Wing 2011). (p. 341)</p>
</blockquote>
<p>We will utilize our “full” model presented <a href="stats_detected.html#stats_detected_model">here</a></p>
<div id="setup-3" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Setup<a href="stand_ba.html#setup-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>load the data if needed</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="stand_ba.html#cb621-1" tabindex="-1"></a><span class="co"># load data if needed</span></span>
<span id="cb621-2"><a href="stand_ba.html#cb621-2" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">ls</span>()[<span class="fu">ls</span>() <span class="sc">%in%</span> <span class="st">&quot;ptcld_validation_data&quot;</span>] <span class="sc">%&gt;%</span> <span class="fu">length</span>()<span class="sc">==</span><span class="dv">0</span>){</span>
<span id="cb621-3"><a href="stand_ba.html#cb621-3" tabindex="-1"></a> ptcld_validation_data <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;../data/ptcld_full_analysis_data.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb621-4"><a href="stand_ba.html#cb621-4" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb621-5"><a href="stand_ba.html#cb621-5" tabindex="-1"></a>      <span class="at">depth_maps_generation_quality =</span> <span class="fu">factor</span>(</span>
<span id="cb621-6"><a href="stand_ba.html#cb621-6" tabindex="-1"></a>          depth_maps_generation_quality <span class="sc">%&gt;%</span> </span>
<span id="cb621-7"><a href="stand_ba.html#cb621-7" tabindex="-1"></a>            <span class="fu">tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb621-8"><a href="stand_ba.html#cb621-8" tabindex="-1"></a>            stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;ultrahigh&quot;</span>, <span class="st">&quot;ultra high&quot;</span>)</span>
<span id="cb621-9"><a href="stand_ba.html#cb621-9" tabindex="-1"></a>          , <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb621-10"><a href="stand_ba.html#cb621-10" tabindex="-1"></a>          , <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb621-11"><a href="stand_ba.html#cb621-11" tabindex="-1"></a>            <span class="st">&quot;lowest&quot;</span></span>
<span id="cb621-12"><a href="stand_ba.html#cb621-12" tabindex="-1"></a>            , <span class="st">&quot;low&quot;</span></span>
<span id="cb621-13"><a href="stand_ba.html#cb621-13" tabindex="-1"></a>            , <span class="st">&quot;medium&quot;</span></span>
<span id="cb621-14"><a href="stand_ba.html#cb621-14" tabindex="-1"></a>            , <span class="st">&quot;high&quot;</span></span>
<span id="cb621-15"><a href="stand_ba.html#cb621-15" tabindex="-1"></a>            , <span class="st">&quot;ultra high&quot;</span></span>
<span id="cb621-16"><a href="stand_ba.html#cb621-16" tabindex="-1"></a>          )</span>
<span id="cb621-17"><a href="stand_ba.html#cb621-17" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb621-18"><a href="stand_ba.html#cb621-18" tabindex="-1"></a>      , <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">factor</span>(</span>
<span id="cb621-19"><a href="stand_ba.html#cb621-19" tabindex="-1"></a>          depth_maps_generation_filtering_mode <span class="sc">%&gt;%</span> <span class="fu">tolower</span>()</span>
<span id="cb621-20"><a href="stand_ba.html#cb621-20" tabindex="-1"></a>          , <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb621-21"><a href="stand_ba.html#cb621-21" tabindex="-1"></a>          , <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb621-22"><a href="stand_ba.html#cb621-22" tabindex="-1"></a>            <span class="st">&quot;disabled&quot;</span></span>
<span id="cb621-23"><a href="stand_ba.html#cb621-23" tabindex="-1"></a>            , <span class="st">&quot;mild&quot;</span></span>
<span id="cb621-24"><a href="stand_ba.html#cb621-24" tabindex="-1"></a>            , <span class="st">&quot;moderate&quot;</span></span>
<span id="cb621-25"><a href="stand_ba.html#cb621-25" tabindex="-1"></a>            , <span class="st">&quot;aggressive&quot;</span></span>
<span id="cb621-26"><a href="stand_ba.html#cb621-26" tabindex="-1"></a>          )</span>
<span id="cb621-27"><a href="stand_ba.html#cb621-27" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb621-28"><a href="stand_ba.html#cb621-28" tabindex="-1"></a>    )</span>
<span id="cb621-29"><a href="stand_ba.html#cb621-29" tabindex="-1"></a>}</span></code></pre></div>
<p>load our plotting functions if needed (not showing these functions here but see the <a href="stats_validation.html#stats_validation">prior section</a> for function definitions)</p>
</div>
<div id="ba-percent-error" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> BA Percent Error<a href="stand_ba.html#ba-percent-error" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="summary-statistics-13" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Summary Statistics<a href="stand_ba.html#summary-statistics-13" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="stand_ba.html#cb622-1" tabindex="-1"></a><span class="co"># summarize data</span></span>
<span id="cb622-2"><a href="stand_ba.html#cb622-2" tabindex="-1"></a>  dta_temp <span class="ot">=</span> ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb622-3"><a href="stand_ba.html#cb622-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span></span>
<span id="cb622-4"><a href="stand_ba.html#cb622-4" tabindex="-1"></a>    <span class="co"># collapse across study site</span></span>
<span id="cb622-5"><a href="stand_ba.html#cb622-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb622-6"><a href="stand_ba.html#cb622-6" tabindex="-1"></a>      <span class="at">basal_area_pct_error =</span> <span class="fu">mean</span>(basal_area_pct_error, <span class="at">na.rm =</span> T)</span>
<span id="cb622-7"><a href="stand_ba.html#cb622-7" tabindex="-1"></a>      , <span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb622-8"><a href="stand_ba.html#cb622-8" tabindex="-1"></a>    )</span>
<span id="cb622-9"><a href="stand_ba.html#cb622-9" tabindex="-1"></a>  <span class="co"># set limits for color scale</span></span>
<span id="cb622-10"><a href="stand_ba.html#cb622-10" tabindex="-1"></a>  lmt_basal_area_pct_error <span class="ot">=</span> <span class="fu">ceiling</span>(<span class="dv">10</span><span class="sc">*</span><span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">range</span>(dta_temp<span class="sc">$</span>basal_area_pct_error, <span class="at">na.rm =</span> T))))<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb622-11"><a href="stand_ba.html#cb622-11" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_dichromat(&quot;BluetoOrange.10&quot;)(10))</span></span>
<span id="cb622-12"><a href="stand_ba.html#cb622-12" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_div_gradient()(seq(0, 1, length.out = 7)))</span></span>
<span id="cb622-13"><a href="stand_ba.html#cb622-13" tabindex="-1"></a>  <span class="co"># plot it</span></span>
<span id="cb622-14"><a href="stand_ba.html#cb622-14" tabindex="-1"></a>  dta_temp <span class="sc">%&gt;%</span> </span>
<span id="cb622-15"><a href="stand_ba.html#cb622-15" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb622-16"><a href="stand_ba.html#cb622-16" tabindex="-1"></a>      <span class="at">y =</span> depth_maps_generation_quality</span>
<span id="cb622-17"><a href="stand_ba.html#cb622-17" tabindex="-1"></a>      , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb622-18"><a href="stand_ba.html#cb622-18" tabindex="-1"></a>      , <span class="at">fill =</span> basal_area_pct_error</span>
<span id="cb622-19"><a href="stand_ba.html#cb622-19" tabindex="-1"></a>      , <span class="at">label =</span> <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">percent</span>(basal_area_pct_error,<span class="at">accuracy =</span> <span class="fl">0.1</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">(n=&quot;</span>, n,<span class="st">&quot;)&quot;</span>)</span>
<span id="cb622-20"><a href="stand_ba.html#cb622-20" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb622-21"><a href="stand_ba.html#cb622-21" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb622-22"><a href="stand_ba.html#cb622-22" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb622-23"><a href="stand_ba.html#cb622-23" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(software)) <span class="sc">+</span> </span>
<span id="cb622-24"><a href="stand_ba.html#cb622-24" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb622-25"><a href="stand_ba.html#cb622-25" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb622-26"><a href="stand_ba.html#cb622-26" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb622-27"><a href="stand_ba.html#cb622-27" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb622-28"><a href="stand_ba.html#cb622-28" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb622-29"><a href="stand_ba.html#cb622-29" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error,lmt_basal_area_pct_error)</span>
<span id="cb622-30"><a href="stand_ba.html#cb622-30" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb622-31"><a href="stand_ba.html#cb622-31" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb622-32"><a href="stand_ba.html#cb622-32" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb622-33"><a href="stand_ba.html#cb622-33" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb622-34"><a href="stand_ba.html#cb622-34" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb622-35"><a href="stand_ba.html#cb622-35" tabindex="-1"></a>      , <span class="at">y =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb622-36"><a href="stand_ba.html#cb622-36" tabindex="-1"></a>      , <span class="at">fill =</span> <span class="st">&quot;Basal Area % Error&quot;</span></span>
<span id="cb622-37"><a href="stand_ba.html#cb622-37" tabindex="-1"></a>      , <span class="at">title =</span> <span class="st">&quot;mean basal area percent error and # of study sites&quot;</span></span>
<span id="cb622-38"><a href="stand_ba.html#cb622-38" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="fu">paste</span>(</span>
<span id="cb622-39"><a href="stand_ba.html#cb622-39" tabindex="-1"></a>        <span class="st">&quot;negative values = UAS basal area &lt; field basal area&quot;</span></span>
<span id="cb622-40"><a href="stand_ba.html#cb622-40" tabindex="-1"></a>        , <span class="st">&quot; || &quot;</span></span>
<span id="cb622-41"><a href="stand_ba.html#cb622-41" tabindex="-1"></a>        , <span class="st">&quot;positive values = UAS basal area &gt; field basal area&quot;</span></span>
<span id="cb622-42"><a href="stand_ba.html#cb622-42" tabindex="-1"></a>      )</span>
<span id="cb622-43"><a href="stand_ba.html#cb622-43" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb622-44"><a href="stand_ba.html#cb622-44" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb622-45"><a href="stand_ba.html#cb622-45" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb622-46"><a href="stand_ba.html#cb622-46" tabindex="-1"></a>      <span class="co"># legend.position = &quot;none&quot;</span></span>
<span id="cb622-47"><a href="stand_ba.html#cb622-47" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb622-48"><a href="stand_ba.html#cb622-48" tabindex="-1"></a>      , <span class="at">panel.background =</span> <span class="fu">element_blank</span>()</span>
<span id="cb622-49"><a href="stand_ba.html#cb622-49" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb622-50"><a href="stand_ba.html#cb622-50" tabindex="-1"></a>      <span class="co"># , plot.title = element_text(hjust = 0.5)</span></span>
<span id="cb622-51"><a href="stand_ba.html#cb622-51" tabindex="-1"></a>      <span class="co"># , plot.subtitle = element_text(hjust = 0.5)</span></span>
<span id="cb622-52"><a href="stand_ba.html#cb622-52" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb622-53"><a href="stand_ba.html#cb622-53" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-488-1.png" width="1008" /></p>
</div>
<div id="model-ba-percent-error" class="section level3 hasAnchor" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Model: BA Percent Error<a href="stand_ba.html#model-ba-percent-error" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="stand_ba.html#cb623-1" tabindex="-1"></a><span class="co"># from Kurz: </span></span>
<span id="cb623-2"><a href="stand_ba.html#cb623-2" tabindex="-1"></a>gamma_a_b_from_omega_sigma <span class="ot">=</span> <span class="cf">function</span>(mode, sd) {</span>
<span id="cb623-3"><a href="stand_ba.html#cb623-3" tabindex="-1"></a>  <span class="cf">if</span> (mode <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;mode must be &gt; 0&quot;</span>)</span>
<span id="cb623-4"><a href="stand_ba.html#cb623-4" tabindex="-1"></a>  <span class="cf">if</span> (sd   <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;sd must be &gt; 0&quot;</span>)</span>
<span id="cb623-5"><a href="stand_ba.html#cb623-5" tabindex="-1"></a>  rate <span class="ot">=</span> (mode <span class="sc">+</span> <span class="fu">sqrt</span>(mode<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb623-6"><a href="stand_ba.html#cb623-6" tabindex="-1"></a>  shape <span class="ot">=</span> <span class="dv">1</span> <span class="sc">+</span> mode <span class="sc">*</span> rate</span>
<span id="cb623-7"><a href="stand_ba.html#cb623-7" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">shape =</span> shape, <span class="at">rate =</span> rate))</span>
<span id="cb623-8"><a href="stand_ba.html#cb623-8" tabindex="-1"></a>}</span>
<span id="cb623-9"><a href="stand_ba.html#cb623-9" tabindex="-1"></a></span>
<span id="cb623-10"><a href="stand_ba.html#cb623-10" tabindex="-1"></a>mean_y_temp <span class="ot">=</span> <span class="fu">mean</span>(ptcld_validation_data<span class="sc">$</span>basal_area_pct_error, <span class="at">na.rm =</span> T)</span>
<span id="cb623-11"><a href="stand_ba.html#cb623-11" tabindex="-1"></a>sd_y_temp   <span class="ot">=</span> <span class="fu">sd</span>(ptcld_validation_data<span class="sc">$</span>basal_area_pct_error, <span class="at">na.rm =</span> T)</span>
<span id="cb623-12"><a href="stand_ba.html#cb623-12" tabindex="-1"></a></span>
<span id="cb623-13"><a href="stand_ba.html#cb623-13" tabindex="-1"></a>omega_temp <span class="ot">=</span> sd_y_temp <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb623-14"><a href="stand_ba.html#cb623-14" tabindex="-1"></a>sigma_temp <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> sd_y_temp</span>
<span id="cb623-15"><a href="stand_ba.html#cb623-15" tabindex="-1"></a></span>
<span id="cb623-16"><a href="stand_ba.html#cb623-16" tabindex="-1"></a>s_r_temp <span class="ot">=</span> <span class="fu">gamma_a_b_from_omega_sigma</span>(<span class="at">mode =</span> omega_temp, <span class="at">sd =</span> sigma_temp)</span>
<span id="cb623-17"><a href="stand_ba.html#cb623-17" tabindex="-1"></a></span>
<span id="cb623-18"><a href="stand_ba.html#cb623-18" tabindex="-1"></a>stanvars_temp <span class="ot">=</span> </span>
<span id="cb623-19"><a href="stand_ba.html#cb623-19" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(mean_y_temp,    <span class="at">name =</span> <span class="st">&quot;mean_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb623-20"><a href="stand_ba.html#cb623-20" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(sd_y_temp,      <span class="at">name =</span> <span class="st">&quot;sd_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb623-21"><a href="stand_ba.html#cb623-21" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>shape, <span class="at">name =</span> <span class="st">&quot;alpha&quot;</span>) <span class="sc">+</span></span>
<span id="cb623-22"><a href="stand_ba.html#cb623-22" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>rate,  <span class="at">name =</span> <span class="st">&quot;beta&quot;</span>)</span></code></pre></div>
<div id="prior-distributions-5" class="section level4 hasAnchor" number="8.2.2.1">
<h4><span class="header-section-number">8.2.2.1</span> Prior distributions<a href="stand_ba.html#prior-distributions-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb624-1"><a href="stand_ba.html#cb624-1" tabindex="-1"></a><span class="do">#### setting priors</span></span>
<span id="cb624-2"><a href="stand_ba.html#cb624-2" tabindex="-1"></a><span class="co"># required libraries: tidyverse, tidybayes, brms, palettetown, latex2exp</span></span>
<span id="cb624-3"><a href="stand_ba.html#cb624-3" tabindex="-1"></a>priors_temp <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb624-4"><a href="stand_ba.html#cb624-4" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y_temp, sd_y_temp <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb624-5"><a href="stand_ba.html#cb624-5" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(s_r_temp<span class="sc">$</span>shape, s_r_temp<span class="sc">$</span>rate), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb624-6"><a href="stand_ba.html#cb624-6" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y_temp), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb624-7"><a href="stand_ba.html#cb624-7" tabindex="-1"></a>  )</span>
<span id="cb624-8"><a href="stand_ba.html#cb624-8" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb624-9"><a href="stand_ba.html#cb624-9" tabindex="-1"></a>plt_prior11 <span class="ot">=</span></span>
<span id="cb624-10"><a href="stand_ba.html#cb624-10" tabindex="-1"></a>priors_temp <span class="sc">%&gt;%</span> </span>
<span id="cb624-11"><a href="stand_ba.html#cb624-11" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">parse_dist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb624-12"><a href="stand_ba.html#cb624-12" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">marginalize_lkjcorr</span>(<span class="at">K =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb624-13"><a href="stand_ba.html#cb624-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb624-14"><a href="stand_ba.html#cb624-14" tabindex="-1"></a>    .args</span>
<span id="cb624-15"><a href="stand_ba.html#cb624-15" tabindex="-1"></a>    , <span class="at">sep =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb624-16"><a href="stand_ba.html#cb624-16" tabindex="-1"></a>    , <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb624-17"><a href="stand_ba.html#cb624-17" tabindex="-1"></a>    , <span class="at">remove =</span> F</span>
<span id="cb624-18"><a href="stand_ba.html#cb624-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb624-19"><a href="stand_ba.html#cb624-19" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb624-20"><a href="stand_ba.html#cb624-20" tabindex="-1"></a>    <span class="at">distrib =</span> <span class="fu">paste0</span>(</span>
<span id="cb624-21"><a href="stand_ba.html#cb624-21" tabindex="-1"></a>      class, <span class="st">&quot; ~ &quot;</span></span>
<span id="cb624-22"><a href="stand_ba.html#cb624-22" tabindex="-1"></a>      , .dist</span>
<span id="cb624-23"><a href="stand_ba.html#cb624-23" tabindex="-1"></a>      , <span class="st">&quot;(&quot;</span></span>
<span id="cb624-24"><a href="stand_ba.html#cb624-24" tabindex="-1"></a>      , a <span class="sc">%&gt;%</span> readr<span class="sc">::</span><span class="fu">parse_number</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb624-25"><a href="stand_ba.html#cb624-25" tabindex="-1"></a>      , <span class="st">&quot;,&quot;</span></span>
<span id="cb624-26"><a href="stand_ba.html#cb624-26" tabindex="-1"></a>      , b <span class="sc">%&gt;%</span> readr<span class="sc">::</span><span class="fu">parse_number</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb624-27"><a href="stand_ba.html#cb624-27" tabindex="-1"></a>      , <span class="st">&quot;)&quot;</span></span>
<span id="cb624-28"><a href="stand_ba.html#cb624-28" tabindex="-1"></a>    )</span>
<span id="cb624-29"><a href="stand_ba.html#cb624-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb624-30"><a href="stand_ba.html#cb624-30" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">dist =</span> .dist, <span class="at">args =</span> .args)) <span class="sc">+</span></span>
<span id="cb624-31"><a href="stand_ba.html#cb624-31" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(distrib), <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb624-32"><a href="stand_ba.html#cb624-32" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb624-33"><a href="stand_ba.html#cb624-33" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> prior),</span>
<span id="cb624-34"><a href="stand_ba.html#cb624-34" tabindex="-1"></a>    <span class="at">n =</span> <span class="fl">10e2</span>,</span>
<span id="cb624-35"><a href="stand_ba.html#cb624-35" tabindex="-1"></a>    <span class="at">show.legend =</span> F</span>
<span id="cb624-36"><a href="stand_ba.html#cb624-36" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="st">&quot;slategray&quot;</span></span>
<span id="cb624-37"><a href="stand_ba.html#cb624-37" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb624-38"><a href="stand_ba.html#cb624-38" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb624-39"><a href="stand_ba.html#cb624-39" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb624-40"><a href="stand_ba.html#cb624-40" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb624-41"><a href="stand_ba.html#cb624-41" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb624-42"><a href="stand_ba.html#cb624-42" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb624-43"><a href="stand_ba.html#cb624-43" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb624-44"><a href="stand_ba.html#cb624-44" tabindex="-1"></a>    , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>)</span>
<span id="cb624-45"><a href="stand_ba.html#cb624-45" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb624-46"><a href="stand_ba.html#cb624-46" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb624-47"><a href="stand_ba.html#cb624-47" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb624-48"><a href="stand_ba.html#cb624-48" tabindex="-1"></a>    , <span class="at">title =</span> <span class="st">&quot;Priors: Basal Area Percent Error&quot;</span></span>
<span id="cb624-49"><a href="stand_ba.html#cb624-49" tabindex="-1"></a>    , <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb624-50"><a href="stand_ba.html#cb624-50" tabindex="-1"></a>  ) </span>
<span id="cb624-51"><a href="stand_ba.html#cb624-51" tabindex="-1"></a>plt_prior11</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-490-1.png" width="1008" /></p>
</div>
<div id="fit-the-model-5" class="section level4 hasAnchor" number="8.2.2.2">
<h4><span class="header-section-number">8.2.2.2</span> Fit the model<a href="stand_ba.html#fit-the-model-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now fit the model.</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="stand_ba.html#cb625-1" tabindex="-1"></a>brms_ba_pe_mod <span class="ot">=</span> brms<span class="sc">::</span><span class="fu">brm</span>(</span>
<span id="cb625-2"><a href="stand_ba.html#cb625-2" tabindex="-1"></a>  <span class="at">formula =</span> basal_area_pct_error <span class="sc">~</span> </span>
<span id="cb625-3"><a href="stand_ba.html#cb625-3" tabindex="-1"></a>    <span class="co"># baseline</span></span>
<span id="cb625-4"><a href="stand_ba.html#cb625-4" tabindex="-1"></a>    <span class="dv">1</span> <span class="sc">+</span> </span>
<span id="cb625-5"><a href="stand_ba.html#cb625-5" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb625-6"><a href="stand_ba.html#cb625-6" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb625-7"><a href="stand_ba.html#cb625-7" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb625-8"><a href="stand_ba.html#cb625-8" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb625-9"><a href="stand_ba.html#cb625-9" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> study_site) <span class="sc">+</span> <span class="co"># only fitting main effects of site and not interactions</span></span>
<span id="cb625-10"><a href="stand_ba.html#cb625-10" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb625-11"><a href="stand_ba.html#cb625-11" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb625-12"><a href="stand_ba.html#cb625-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb625-13"><a href="stand_ba.html#cb625-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb625-14"><a href="stand_ba.html#cb625-14" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb625-15"><a href="stand_ba.html#cb625-15" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb625-16"><a href="stand_ba.html#cb625-16" tabindex="-1"></a>  , <span class="at">data =</span> ptcld_validation_data</span>
<span id="cb625-17"><a href="stand_ba.html#cb625-17" tabindex="-1"></a>  , <span class="at">family =</span> brms<span class="sc">::</span><span class="fu">brmsfamily</span>(<span class="at">family =</span> <span class="st">&quot;gaussian&quot;</span>)</span>
<span id="cb625-18"><a href="stand_ba.html#cb625-18" tabindex="-1"></a>  , <span class="at">iter =</span> <span class="dv">20000</span>, <span class="at">warmup =</span> <span class="dv">10000</span>, <span class="at">chains =</span> <span class="dv">4</span></span>
<span id="cb625-19"><a href="stand_ba.html#cb625-19" tabindex="-1"></a>  , <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.999</span>, <span class="at">max_treedepth =</span> <span class="dv">13</span>)</span>
<span id="cb625-20"><a href="stand_ba.html#cb625-20" tabindex="-1"></a>  , <span class="at">cores =</span> <span class="fu">round</span>(parallel<span class="sc">::</span><span class="fu">detectCores</span>()<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb625-21"><a href="stand_ba.html#cb625-21" tabindex="-1"></a>  , <span class="at">prior =</span> <span class="fu">c</span>(</span>
<span id="cb625-22"><a href="stand_ba.html#cb625-22" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y, sd_y <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb625-23"><a href="stand_ba.html#cb625-23" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(alpha, beta), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb625-24"><a href="stand_ba.html#cb625-24" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb625-25"><a href="stand_ba.html#cb625-25" tabindex="-1"></a>  )</span>
<span id="cb625-26"><a href="stand_ba.html#cb625-26" tabindex="-1"></a>  , <span class="at">stanvars =</span> stanvars_temp</span>
<span id="cb625-27"><a href="stand_ba.html#cb625-27" tabindex="-1"></a>  , <span class="at">file =</span> <span class="fu">paste0</span>(rootdir, <span class="st">&quot;/fits/brms_ba_pe_mod&quot;</span>)</span>
<span id="cb625-28"><a href="stand_ba.html#cb625-28" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="qualityfiltering---interaction-6" class="section level4 hasAnchor" number="8.2.2.3">
<h4><span class="header-section-number">8.2.2.3</span> Quality:Filtering - interaction<a href="stand_ba.html#qualityfiltering---interaction-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb626"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb626-1"><a href="stand_ba.html#cb626-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb626-2"><a href="stand_ba.html#cb626-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb626-3"><a href="stand_ba.html#cb626-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb626-4"><a href="stand_ba.html#cb626-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb626-5"><a href="stand_ba.html#cb626-5" tabindex="-1"></a>      brms_ba_pe_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb626-6"><a href="stand_ba.html#cb626-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb626-7"><a href="stand_ba.html#cb626-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb626-8"><a href="stand_ba.html#cb626-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb626-9"><a href="stand_ba.html#cb626-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode)</span>
<span id="cb626-10"><a href="stand_ba.html#cb626-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb626-11"><a href="stand_ba.html#cb626-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb626-12"><a href="stand_ba.html#cb626-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb626-13"><a href="stand_ba.html#cb626-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb626-14"><a href="stand_ba.html#cb626-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb626-15"><a href="stand_ba.html#cb626-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb626-16"><a href="stand_ba.html#cb626-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb626-17"><a href="stand_ba.html#cb626-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb626-18"><a href="stand_ba.html#cb626-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb626-19"><a href="stand_ba.html#cb626-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb626-20"><a href="stand_ba.html#cb626-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb626-21"><a href="stand_ba.html#cb626-21" tabindex="-1"></a>    )</span>
<span id="cb626-22"><a href="stand_ba.html#cb626-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb626-23"><a href="stand_ba.html#cb626-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb626-24"><a href="stand_ba.html#cb626-24" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb626-25"><a href="stand_ba.html#cb626-25" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> <span class="fl">0.95</span></span>
<span id="cb626-26"><a href="stand_ba.html#cb626-26" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb626-27"><a href="stand_ba.html#cb626-27" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb626-28"><a href="stand_ba.html#cb626-28" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb626-29"><a href="stand_ba.html#cb626-29" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb626-30"><a href="stand_ba.html#cb626-30" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb626-31"><a href="stand_ba.html#cb626-31" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb626-32"><a href="stand_ba.html#cb626-32" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb626-33"><a href="stand_ba.html#cb626-33" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error<span class="sc">*</span>.<span class="dv">5</span>,lmt_basal_area_pct_error<span class="sc">*</span>.<span class="dv">5</span>)</span>
<span id="cb626-34"><a href="stand_ba.html#cb626-34" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb626-35"><a href="stand_ba.html#cb626-35" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb626-36"><a href="stand_ba.html#cb626-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb626-37"><a href="stand_ba.html#cb626-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb626-38"><a href="stand_ba.html#cb626-38" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb626-39"><a href="stand_ba.html#cb626-39" tabindex="-1"></a>      <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb626-40"><a href="stand_ba.html#cb626-40" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error<span class="sc">*</span><span class="fl">1.2</span>,lmt_basal_area_pct_error<span class="sc">*</span><span class="fl">1.2</span>)</span>
<span id="cb626-41"><a href="stand_ba.html#cb626-41" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb626-42"><a href="stand_ba.html#cb626-42" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb626-43"><a href="stand_ba.html#cb626-43" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Basal Area % Error&quot;</span></span>
<span id="cb626-44"><a href="stand_ba.html#cb626-44" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of basal area percent error with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb626-45"><a href="stand_ba.html#cb626-45" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb626-46"><a href="stand_ba.html#cb626-46" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb626-47"><a href="stand_ba.html#cb626-47" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb626-48"><a href="stand_ba.html#cb626-48" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb626-49"><a href="stand_ba.html#cb626-49" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb626-50"><a href="stand_ba.html#cb626-50" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb626-51"><a href="stand_ba.html#cb626-51" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb626-52"><a href="stand_ba.html#cb626-52" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-493-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="stand_ba.html#cb627-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb627-2"><a href="stand_ba.html#cb627-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb627-3"><a href="stand_ba.html#cb627-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb627-4"><a href="stand_ba.html#cb627-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb627-5"><a href="stand_ba.html#cb627-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(depth_maps_generation_quality,depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb627-6"><a href="stand_ba.html#cb627-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb627-7"><a href="stand_ba.html#cb627-7" tabindex="-1"></a></span>
<span id="cb627-8"><a href="stand_ba.html#cb627-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb627-9"><a href="stand_ba.html#cb627-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(depth_maps_generation_quality)) <span class="sc">%&gt;%</span> </span>
<span id="cb627-10"><a href="stand_ba.html#cb627-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb627-11"><a href="stand_ba.html#cb627-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb627-12"><a href="stand_ba.html#cb627-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Basal Area % Error&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb627-13"><a href="stand_ba.html#cb627-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb627-14"><a href="stand_ba.html#cb627-14" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb627-15"><a href="stand_ba.html#cb627-15" tabindex="-1"></a>      , <span class="st">&quot;Basal Area % Error&lt;br&gt;median&quot;</span></span>
<span id="cb627-16"><a href="stand_ba.html#cb627-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb627-17"><a href="stand_ba.html#cb627-17" tabindex="-1"></a>    )</span>
<span id="cb627-18"><a href="stand_ba.html#cb627-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb627-19"><a href="stand_ba.html#cb627-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb627-20"><a href="stand_ba.html#cb627-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb627-21"><a href="stand_ba.html#cb627-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>depth_maps_generation_quality))) <span class="sc">%&gt;%</span> </span>
<span id="cb627-22"><a href="stand_ba.html#cb627-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-494">Table 8.1: </span>Basal Area % Error<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Basal Area % Error<br>median
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>ultra high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
-1.8%
</td>
<td style="text-align:left;">
-54.6%
</td>
<td style="text-align:left;">
52.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
0.9%
</td>
<td style="text-align:left;">
-51.2%
</td>
<td style="text-align:left;">
54.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
3.3%
</td>
<td style="text-align:left;">
-49.2%
</td>
<td style="text-align:left;">
56.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
3.1%
</td>
<td style="text-align:left;">
-49.6%
</td>
<td style="text-align:left;">
56.3%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
-5.9%
</td>
<td style="text-align:left;">
-57.4%
</td>
<td style="text-align:left;">
48.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
-3.2%
</td>
<td style="text-align:left;">
-54.5%
</td>
<td style="text-align:left;">
49.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
-0.9%
</td>
<td style="text-align:left;">
-52.9%
</td>
<td style="text-align:left;">
51.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
-0.1%
</td>
<td style="text-align:left;">
-51.5%
</td>
<td style="text-align:left;">
52.3%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>medium</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
-16.4%
</td>
<td style="text-align:left;">
-71.7%
</td>
<td style="text-align:left;">
35.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
-12.1%
</td>
<td style="text-align:left;">
-63.7%
</td>
<td style="text-align:left;">
41.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
-9.5%
</td>
<td style="text-align:left;">
-61.4%
</td>
<td style="text-align:left;">
42.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
-8.5%
</td>
<td style="text-align:left;">
-62.4%
</td>
<td style="text-align:left;">
42.5%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>low</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
-25.3%
</td>
<td style="text-align:left;">
-79.0%
</td>
<td style="text-align:left;">
27.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
-20.7%
</td>
<td style="text-align:left;">
-72.6%
</td>
<td style="text-align:left;">
32.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
-16.9%
</td>
<td style="text-align:left;">
-66.7%
</td>
<td style="text-align:left;">
37.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
-15.5%
</td>
<td style="text-align:left;">
-66.9%
</td>
<td style="text-align:left;">
37.2%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>lowest</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
-37.2%
</td>
<td style="text-align:left;">
-89.6%
</td>
<td style="text-align:left;">
20.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
-34.1%
</td>
<td style="text-align:left;">
-86.5%
</td>
<td style="text-align:left;">
22.4%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
-30.3%
</td>
<td style="text-align:left;">
-83.9%
</td>
<td style="text-align:left;">
25.0%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
-29.5%
</td>
<td style="text-align:left;">
-81.9%
</td>
<td style="text-align:left;">
27.5%
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequality---interaction-6" class="section level4 hasAnchor" number="8.2.2.4">
<h4><span class="header-section-number">8.2.2.4</span> Software:Quality - interaction<a href="stand_ba.html#softwarequality---interaction-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="stand_ba.html#cb628-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb628-2"><a href="stand_ba.html#cb628-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb628-3"><a href="stand_ba.html#cb628-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software) <span class="sc">%&gt;%</span> </span>
<span id="cb628-4"><a href="stand_ba.html#cb628-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb628-5"><a href="stand_ba.html#cb628-5" tabindex="-1"></a>      brms_ba_pe_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb628-6"><a href="stand_ba.html#cb628-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb628-7"><a href="stand_ba.html#cb628-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb628-8"><a href="stand_ba.html#cb628-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb628-9"><a href="stand_ba.html#cb628-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software)</span>
<span id="cb628-10"><a href="stand_ba.html#cb628-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb628-11"><a href="stand_ba.html#cb628-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb628-12"><a href="stand_ba.html#cb628-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb628-13"><a href="stand_ba.html#cb628-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb628-14"><a href="stand_ba.html#cb628-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb628-15"><a href="stand_ba.html#cb628-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb628-16"><a href="stand_ba.html#cb628-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb628-17"><a href="stand_ba.html#cb628-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb628-18"><a href="stand_ba.html#cb628-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb628-19"><a href="stand_ba.html#cb628-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb628-20"><a href="stand_ba.html#cb628-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb628-21"><a href="stand_ba.html#cb628-21" tabindex="-1"></a>    )</span>
<span id="cb628-22"><a href="stand_ba.html#cb628-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb628-23"><a href="stand_ba.html#cb628-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb628-24"><a href="stand_ba.html#cb628-24" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb628-25"><a href="stand_ba.html#cb628-25" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb628-26"><a href="stand_ba.html#cb628-26" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb628-27"><a href="stand_ba.html#cb628-27" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb628-28"><a href="stand_ba.html#cb628-28" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb628-29"><a href="stand_ba.html#cb628-29" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb628-30"><a href="stand_ba.html#cb628-30" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb628-31"><a href="stand_ba.html#cb628-31" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb628-32"><a href="stand_ba.html#cb628-32" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb628-33"><a href="stand_ba.html#cb628-33" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error<span class="sc">*</span>.<span class="dv">5</span>,lmt_basal_area_pct_error<span class="sc">*</span>.<span class="dv">5</span>)</span>
<span id="cb628-34"><a href="stand_ba.html#cb628-34" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb628-35"><a href="stand_ba.html#cb628-35" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb628-36"><a href="stand_ba.html#cb628-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb628-37"><a href="stand_ba.html#cb628-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb628-38"><a href="stand_ba.html#cb628-38" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb628-39"><a href="stand_ba.html#cb628-39" tabindex="-1"></a>      <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb628-40"><a href="stand_ba.html#cb628-40" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error<span class="sc">*</span><span class="fl">1.2</span>,lmt_basal_area_pct_error<span class="sc">*</span><span class="fl">1.2</span>)</span>
<span id="cb628-41"><a href="stand_ba.html#cb628-41" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb628-42"><a href="stand_ba.html#cb628-42" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb628-43"><a href="stand_ba.html#cb628-43" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Basal Area % Error&quot;</span></span>
<span id="cb628-44"><a href="stand_ba.html#cb628-44" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of basal area percent error with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb628-45"><a href="stand_ba.html#cb628-45" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb628-46"><a href="stand_ba.html#cb628-46" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb628-47"><a href="stand_ba.html#cb628-47" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb628-48"><a href="stand_ba.html#cb628-48" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb628-49"><a href="stand_ba.html#cb628-49" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb628-50"><a href="stand_ba.html#cb628-50" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb628-51"><a href="stand_ba.html#cb628-51" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb628-52"><a href="stand_ba.html#cb628-52" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-495-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="stand_ba.html#cb629-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb629-2"><a href="stand_ba.html#cb629-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb629-3"><a href="stand_ba.html#cb629-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb629-4"><a href="stand_ba.html#cb629-4" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb629-5"><a href="stand_ba.html#cb629-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb629-6"><a href="stand_ba.html#cb629-6" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb629-7"><a href="stand_ba.html#cb629-7" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb629-8"><a href="stand_ba.html#cb629-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb629-9"><a href="stand_ba.html#cb629-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span></span>
<span id="cb629-10"><a href="stand_ba.html#cb629-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb629-11"><a href="stand_ba.html#cb629-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb629-12"><a href="stand_ba.html#cb629-12" tabindex="-1"></a></span>
<span id="cb629-13"><a href="stand_ba.html#cb629-13" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb629-14"><a href="stand_ba.html#cb629-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb629-15"><a href="stand_ba.html#cb629-15" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb629-16"><a href="stand_ba.html#cb629-16" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb629-17"><a href="stand_ba.html#cb629-17" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Basal Area % Error&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb629-18"><a href="stand_ba.html#cb629-18" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb629-19"><a href="stand_ba.html#cb629-19" tabindex="-1"></a>      <span class="st">&quot;quality&quot;</span></span>
<span id="cb629-20"><a href="stand_ba.html#cb629-20" tabindex="-1"></a>      , <span class="st">&quot;Basal Area % Error&lt;br&gt;median&quot;</span></span>
<span id="cb629-21"><a href="stand_ba.html#cb629-21" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb629-22"><a href="stand_ba.html#cb629-22" tabindex="-1"></a>    )</span>
<span id="cb629-23"><a href="stand_ba.html#cb629-23" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb629-24"><a href="stand_ba.html#cb629-24" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb629-25"><a href="stand_ba.html#cb629-25" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb629-26"><a href="stand_ba.html#cb629-26" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb629-27"><a href="stand_ba.html#cb629-27" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-496">Table 8.2: </span>Basal Area % Error<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Basal Area % Error<br>median
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
7.5%
</td>
<td style="text-align:left;">
-30.6%
</td>
<td style="text-align:left;">
46.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
3.7%
</td>
<td style="text-align:left;">
-35.5%
</td>
<td style="text-align:left;">
41.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
-5.1%
</td>
<td style="text-align:left;">
-43.7%
</td>
<td style="text-align:left;">
33.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
-23.4%
</td>
<td style="text-align:left;">
-62.0%
</td>
<td style="text-align:left;">
15.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:left;">
-50.7%
</td>
<td style="text-align:left;">
-89.0%
</td>
<td style="text-align:left;">
-12.0%
</td>
</tr>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
-1.7%
</td>
<td style="text-align:left;">
-39.9%
</td>
<td style="text-align:left;">
37.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
-10.4%
</td>
<td style="text-align:left;">
-48.9%
</td>
<td style="text-align:left;">
29.0%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
-31.7%
</td>
<td style="text-align:left;">
-70.2%
</td>
<td style="text-align:left;">
7.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
-32.4%
</td>
<td style="text-align:left;">
-71.1%
</td>
<td style="text-align:left;">
6.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:left;">
-33.8%
</td>
<td style="text-align:left;">
-71.8%
</td>
<td style="text-align:left;">
5.8%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
7.4%
</td>
<td style="text-align:left;">
-31.9%
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
5.9%
</td>
<td style="text-align:left;">
-33.8%
</td>
<td style="text-align:left;">
45.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
2.6%
</td>
<td style="text-align:left;">
-36.0%
</td>
<td style="text-align:left;">
43.4%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
-6.9%
</td>
<td style="text-align:left;">
-46.6%
</td>
<td style="text-align:left;">
33.4%
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarefiltering---interaction-6" class="section level4 hasAnchor" number="8.2.2.5">
<h4><span class="header-section-number">8.2.2.5</span> Software:Filtering - interaction<a href="stand_ba.html#softwarefiltering---interaction-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb630-1"><a href="stand_ba.html#cb630-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb630-2"><a href="stand_ba.html#cb630-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb630-3"><a href="stand_ba.html#cb630-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_filtering_mode, software) <span class="sc">%&gt;%</span> </span>
<span id="cb630-4"><a href="stand_ba.html#cb630-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb630-5"><a href="stand_ba.html#cb630-5" tabindex="-1"></a>      brms_ba_pe_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb630-6"><a href="stand_ba.html#cb630-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb630-7"><a href="stand_ba.html#cb630-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb630-8"><a href="stand_ba.html#cb630-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb630-9"><a href="stand_ba.html#cb630-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb630-10"><a href="stand_ba.html#cb630-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb630-11"><a href="stand_ba.html#cb630-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb630-12"><a href="stand_ba.html#cb630-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb630-13"><a href="stand_ba.html#cb630-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb630-14"><a href="stand_ba.html#cb630-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb630-15"><a href="stand_ba.html#cb630-15" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb630-16"><a href="stand_ba.html#cb630-16" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb630-17"><a href="stand_ba.html#cb630-17" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb630-18"><a href="stand_ba.html#cb630-18" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb630-19"><a href="stand_ba.html#cb630-19" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb630-20"><a href="stand_ba.html#cb630-20" tabindex="-1"></a>    )</span>
<span id="cb630-21"><a href="stand_ba.html#cb630-21" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb630-22"><a href="stand_ba.html#cb630-22" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb630-23"><a href="stand_ba.html#cb630-23" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb630-24"><a href="stand_ba.html#cb630-24" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb630-25"><a href="stand_ba.html#cb630-25" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb630-26"><a href="stand_ba.html#cb630-26" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb630-27"><a href="stand_ba.html#cb630-27" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb630-28"><a href="stand_ba.html#cb630-28" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb630-29"><a href="stand_ba.html#cb630-29" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb630-30"><a href="stand_ba.html#cb630-30" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb630-31"><a href="stand_ba.html#cb630-31" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb630-32"><a href="stand_ba.html#cb630-32" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error<span class="sc">*</span>.<span class="dv">5</span>,lmt_basal_area_pct_error<span class="sc">*</span>.<span class="dv">5</span>)</span>
<span id="cb630-33"><a href="stand_ba.html#cb630-33" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb630-34"><a href="stand_ba.html#cb630-34" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb630-35"><a href="stand_ba.html#cb630-35" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb630-36"><a href="stand_ba.html#cb630-36" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_filtering_mode)) <span class="sc">+</span></span>
<span id="cb630-37"><a href="stand_ba.html#cb630-37" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb630-38"><a href="stand_ba.html#cb630-38" tabindex="-1"></a>      <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb630-39"><a href="stand_ba.html#cb630-39" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error<span class="sc">*</span><span class="fl">1.2</span>,lmt_basal_area_pct_error<span class="sc">*</span><span class="fl">1.2</span>)</span>
<span id="cb630-40"><a href="stand_ba.html#cb630-40" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb630-41"><a href="stand_ba.html#cb630-41" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb630-42"><a href="stand_ba.html#cb630-42" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Basal Area % Error&quot;</span></span>
<span id="cb630-43"><a href="stand_ba.html#cb630-43" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of basal area percent error with 95% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb630-44"><a href="stand_ba.html#cb630-44" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb630-45"><a href="stand_ba.html#cb630-45" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb630-46"><a href="stand_ba.html#cb630-46" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb630-47"><a href="stand_ba.html#cb630-47" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb630-48"><a href="stand_ba.html#cb630-48" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb630-49"><a href="stand_ba.html#cb630-49" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb630-50"><a href="stand_ba.html#cb630-50" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb630-51"><a href="stand_ba.html#cb630-51" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-497-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="stand_ba.html#cb631-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb631-2"><a href="stand_ba.html#cb631-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb631-3"><a href="stand_ba.html#cb631-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb631-4"><a href="stand_ba.html#cb631-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb631-5"><a href="stand_ba.html#cb631-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb631-6"><a href="stand_ba.html#cb631-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb631-7"><a href="stand_ba.html#cb631-7" tabindex="-1"></a></span>
<span id="cb631-8"><a href="stand_ba.html#cb631-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb631-9"><a href="stand_ba.html#cb631-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb631-10"><a href="stand_ba.html#cb631-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb631-11"><a href="stand_ba.html#cb631-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb631-12"><a href="stand_ba.html#cb631-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Basal Area % Error&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb631-13"><a href="stand_ba.html#cb631-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb631-14"><a href="stand_ba.html#cb631-14" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb631-15"><a href="stand_ba.html#cb631-15" tabindex="-1"></a>      , <span class="st">&quot;Basal Area % Error&lt;br&gt;median&quot;</span></span>
<span id="cb631-16"><a href="stand_ba.html#cb631-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb631-17"><a href="stand_ba.html#cb631-17" tabindex="-1"></a>    )</span>
<span id="cb631-18"><a href="stand_ba.html#cb631-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb631-19"><a href="stand_ba.html#cb631-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb631-20"><a href="stand_ba.html#cb631-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb631-21"><a href="stand_ba.html#cb631-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb631-22"><a href="stand_ba.html#cb631-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-498">Table 8.3: </span>Basal Area % Error<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Basal Area % Error<br>median
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
-31.0%
</td>
<td style="text-align:left;">
-73.2%
</td>
<td style="text-align:left;">
11.4%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
-15.4%
</td>
<td style="text-align:left;">
-57.2%
</td>
<td style="text-align:left;">
27.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
-5.2%
</td>
<td style="text-align:left;">
-46.6%
</td>
<td style="text-align:left;">
37.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
-2.9%
</td>
<td style="text-align:left;">
-44.4%
</td>
<td style="text-align:left;">
40.1%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
-19.3%
</td>
<td style="text-align:left;">
-61.5%
</td>
<td style="text-align:left;">
22.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
-22.1%
</td>
<td style="text-align:left;">
-65.7%
</td>
<td style="text-align:left;">
18.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
-22.8%
</td>
<td style="text-align:left;">
-65.7%
</td>
<td style="text-align:left;">
19.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
-22.8%
</td>
<td style="text-align:left;">
-68.1%
</td>
<td style="text-align:left;">
16.6%
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
-5.3%
</td>
<td style="text-align:left;">
-49.5%
</td>
<td style="text-align:left;">
36.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
-0.5%
</td>
<td style="text-align:left;">
-43.9%
</td>
<td style="text-align:left;">
42.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
1.5%
</td>
<td style="text-align:left;">
-42.6%
</td>
<td style="text-align:left;">
43.4%
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequalityfiltering---interaction-6" class="section level4 hasAnchor" number="8.2.2.6">
<h4><span class="header-section-number">8.2.2.6</span> Software:Quality:Filtering - interaction<a href="stand_ba.html#softwarequalityfiltering---interaction-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="stand_ba.html#cb632-1" tabindex="-1"></a><span class="co"># get draws</span></span>
<span id="cb632-2"><a href="stand_ba.html#cb632-2" tabindex="-1"></a>fltr_sftwr_draws_temp <span class="ot">=</span></span>
<span id="cb632-3"><a href="stand_ba.html#cb632-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb632-4"><a href="stand_ba.html#cb632-4" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb632-5"><a href="stand_ba.html#cb632-5" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb632-6"><a href="stand_ba.html#cb632-6" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb632-7"><a href="stand_ba.html#cb632-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb632-8"><a href="stand_ba.html#cb632-8" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb632-9"><a href="stand_ba.html#cb632-9" tabindex="-1"></a>    brms_ba_pe_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb632-10"><a href="stand_ba.html#cb632-10" tabindex="-1"></a>    <span class="co"># this part is crucial</span></span>
<span id="cb632-11"><a href="stand_ba.html#cb632-11" tabindex="-1"></a>    , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span> <span class="co"># main effects</span></span>
<span id="cb632-12"><a href="stand_ba.html#cb632-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb632-13"><a href="stand_ba.html#cb632-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb632-14"><a href="stand_ba.html#cb632-14" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb632-15"><a href="stand_ba.html#cb632-15" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb632-16"><a href="stand_ba.html#cb632-16" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb632-17"><a href="stand_ba.html#cb632-17" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb632-18"><a href="stand_ba.html#cb632-18" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb632-19"><a href="stand_ba.html#cb632-19" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb632-20"><a href="stand_ba.html#cb632-20" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb632-21"><a href="stand_ba.html#cb632-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb632-22"><a href="stand_ba.html#cb632-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb632-23"><a href="stand_ba.html#cb632-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb632-24"><a href="stand_ba.html#cb632-24" tabindex="-1"></a></span>
<span id="cb632-25"><a href="stand_ba.html#cb632-25" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb632-26"><a href="stand_ba.html#cb632-26" tabindex="-1"></a>qlty_fltr_sftwr_ba_pe <span class="ot">=</span> </span>
<span id="cb632-27"><a href="stand_ba.html#cb632-27" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb632-28"><a href="stand_ba.html#cb632-28" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb632-29"><a href="stand_ba.html#cb632-29" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb632-30"><a href="stand_ba.html#cb632-30" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb632-31"><a href="stand_ba.html#cb632-31" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb632-32"><a href="stand_ba.html#cb632-32" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb632-33"><a href="stand_ba.html#cb632-33" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb632-34"><a href="stand_ba.html#cb632-34" tabindex="-1"></a>      <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb632-35"><a href="stand_ba.html#cb632-35" tabindex="-1"></a>        <span class="at">y =</span> value</span>
<span id="cb632-36"><a href="stand_ba.html#cb632-36" tabindex="-1"></a>        , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb632-37"><a href="stand_ba.html#cb632-37" tabindex="-1"></a>        , <span class="at">fill =</span> med</span>
<span id="cb632-38"><a href="stand_ba.html#cb632-38" tabindex="-1"></a>      )</span>
<span id="cb632-39"><a href="stand_ba.html#cb632-39" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb632-40"><a href="stand_ba.html#cb632-40" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb632-41"><a href="stand_ba.html#cb632-41" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb632-42"><a href="stand_ba.html#cb632-42" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb632-43"><a href="stand_ba.html#cb632-43" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb632-44"><a href="stand_ba.html#cb632-44" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb632-45"><a href="stand_ba.html#cb632-45" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb632-46"><a href="stand_ba.html#cb632-46" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb632-47"><a href="stand_ba.html#cb632-47" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb632-48"><a href="stand_ba.html#cb632-48" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb632-49"><a href="stand_ba.html#cb632-49" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb632-50"><a href="stand_ba.html#cb632-50" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error<span class="sc">*</span>.<span class="dv">5</span>,lmt_basal_area_pct_error<span class="sc">*</span>.<span class="dv">5</span>)</span>
<span id="cb632-51"><a href="stand_ba.html#cb632-51" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb632-52"><a href="stand_ba.html#cb632-52" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb632-53"><a href="stand_ba.html#cb632-53" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb632-54"><a href="stand_ba.html#cb632-54" tabindex="-1"></a>    <span class="fu">facet_grid</span>(</span>
<span id="cb632-55"><a href="stand_ba.html#cb632-55" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb632-56"><a href="stand_ba.html#cb632-56" tabindex="-1"></a>      , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb632-57"><a href="stand_ba.html#cb632-57" tabindex="-1"></a>      <span class="co"># , switch = &quot;y&quot;</span></span>
<span id="cb632-58"><a href="stand_ba.html#cb632-58" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb632-59"><a href="stand_ba.html#cb632-59" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb632-60"><a href="stand_ba.html#cb632-60" tabindex="-1"></a>      <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb632-61"><a href="stand_ba.html#cb632-61" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_basal_area_pct_error<span class="sc">*</span><span class="fl">1.5</span>,lmt_basal_area_pct_error<span class="sc">*</span><span class="fl">1.2</span>)</span>
<span id="cb632-62"><a href="stand_ba.html#cb632-62" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb632-63"><a href="stand_ba.html#cb632-63" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb632-64"><a href="stand_ba.html#cb632-64" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Basal Area % Error&quot;</span></span>
<span id="cb632-65"><a href="stand_ba.html#cb632-65" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of basal area percent error with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb632-66"><a href="stand_ba.html#cb632-66" tabindex="-1"></a>      <span class="co"># , caption = form_temp</span></span>
<span id="cb632-67"><a href="stand_ba.html#cb632-67" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb632-68"><a href="stand_ba.html#cb632-68" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb632-69"><a href="stand_ba.html#cb632-69" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb632-70"><a href="stand_ba.html#cb632-70" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb632-71"><a href="stand_ba.html#cb632-71" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb632-72"><a href="stand_ba.html#cb632-72" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb632-73"><a href="stand_ba.html#cb632-73" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb632-74"><a href="stand_ba.html#cb632-74" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb632-75"><a href="stand_ba.html#cb632-75" tabindex="-1"></a>      <span class="co"># , strip.placement = &quot;outside&quot;</span></span>
<span id="cb632-76"><a href="stand_ba.html#cb632-76" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb632-77"><a href="stand_ba.html#cb632-77" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb632-78"><a href="stand_ba.html#cb632-78" tabindex="-1"></a>      <span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">lwd =</span> <span class="cn">NA</span>))</span>
<span id="cb632-79"><a href="stand_ba.html#cb632-79" tabindex="-1"></a>    )</span>
<span id="cb632-80"><a href="stand_ba.html#cb632-80" tabindex="-1"></a><span class="co"># print it</span></span>
<span id="cb632-81"><a href="stand_ba.html#cb632-81" tabindex="-1"></a>qlty_fltr_sftwr_ba_pe</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-499-1.png" width="1008" /></p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="stand_ba.html#cb633-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_ba_pe.png&quot;</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span>)</span></code></pre></div>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="stand_ba.html#cb634-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb634-2"><a href="stand_ba.html#cb634-2" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb634-3"><a href="stand_ba.html#cb634-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb634-4"><a href="stand_ba.html#cb634-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb634-5"><a href="stand_ba.html#cb634-5" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb634-6"><a href="stand_ba.html#cb634-6" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb634-7"><a href="stand_ba.html#cb634-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb634-8"><a href="stand_ba.html#cb634-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb634-9"><a href="stand_ba.html#cb634-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(</span>
<span id="cb634-10"><a href="stand_ba.html#cb634-10" tabindex="-1"></a>    software, depth_maps_generation_quality, depth_maps_generation_filtering_mode</span>
<span id="cb634-11"><a href="stand_ba.html#cb634-11" tabindex="-1"></a>    , value, .lower, .upper</span>
<span id="cb634-12"><a href="stand_ba.html#cb634-12" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb634-13"><a href="stand_ba.html#cb634-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb634-14"><a href="stand_ba.html#cb634-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb634-15"><a href="stand_ba.html#cb634-15" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb634-16"><a href="stand_ba.html#cb634-16" tabindex="-1"></a></span>
<span id="cb634-17"><a href="stand_ba.html#cb634-17" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb634-18"><a href="stand_ba.html#cb634-18" tabindex="-1"></a>  <span class="co"># dplyr::select(-c(software)) %&gt;% </span></span>
<span id="cb634-19"><a href="stand_ba.html#cb634-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb634-20"><a href="stand_ba.html#cb634-20" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb634-21"><a href="stand_ba.html#cb634-21" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Basal Area % Error&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb634-22"><a href="stand_ba.html#cb634-22" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb634-23"><a href="stand_ba.html#cb634-23" tabindex="-1"></a>      <span class="st">&quot;software&quot;</span>, <span class="st">&quot;quality&quot;</span>, <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb634-24"><a href="stand_ba.html#cb634-24" tabindex="-1"></a>      , <span class="st">&quot;Basal Area % Error&lt;br&gt;median&quot;</span></span>
<span id="cb634-25"><a href="stand_ba.html#cb634-25" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb634-26"><a href="stand_ba.html#cb634-26" tabindex="-1"></a>    )</span>
<span id="cb634-27"><a href="stand_ba.html#cb634-27" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb634-28"><a href="stand_ba.html#cb634-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb634-29"><a href="stand_ba.html#cb634-29" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb634-30"><a href="stand_ba.html#cb634-30" tabindex="-1"></a>  <span class="co"># kableExtra::pack_rows(index = table(forcats::fct_inorder(table_temp$software))) %&gt;% </span></span>
<span id="cb634-31"><a href="stand_ba.html#cb634-31" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb634-32"><a href="stand_ba.html#cb634-32" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-500">Table 8.4: </span>Basal Area % Error<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
software
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Basal Area % Error<br>median
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
METASHAPE
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-69.1%
</td>
<td style="text-align:left;">
-103.6%
</td>
<td style="text-align:left;">
-34.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-53.9%
</td>
<td style="text-align:left;">
-88.2%
</td>
<td style="text-align:left;">
-19.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-41.9%
</td>
<td style="text-align:left;">
-78.0%
</td>
<td style="text-align:left;">
-8.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-39.6%
</td>
<td style="text-align:left;">
-74.8%
</td>
<td style="text-align:left;">
-5.8%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-43.5%
</td>
<td style="text-align:left;">
-78.5%
</td>
<td style="text-align:left;">
-9.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-25.9%
</td>
<td style="text-align:left;">
-61.0%
</td>
<td style="text-align:left;">
7.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-14.2%
</td>
<td style="text-align:left;">
-49.6%
</td>
<td style="text-align:left;">
19.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-11.1%
</td>
<td style="text-align:left;">
-44.7%
</td>
<td style="text-align:left;">
24.3%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-23.5%
</td>
<td style="text-align:left;">
-58.7%
</td>
<td style="text-align:left;">
10.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-6.5%
</td>
<td style="text-align:left;">
-40.5%
</td>
<td style="text-align:left;">
28.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
3.4%
</td>
<td style="text-align:left;">
-30.6%
</td>
<td style="text-align:left;">
38.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
6.0%
</td>
<td style="text-align:left;">
-27.3%
</td>
<td style="text-align:left;">
41.6%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-12.7%
</td>
<td style="text-align:left;">
-47.1%
</td>
<td style="text-align:left;">
21.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
2.1%
</td>
<td style="text-align:left;">
-30.5%
</td>
<td style="text-align:left;">
38.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
11.5%
</td>
<td style="text-align:left;">
-22.7%
</td>
<td style="text-align:left;">
45.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
13.9%
</td>
<td style="text-align:left;">
-21.0%
</td>
<td style="text-align:left;">
48.3%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-8.3%
</td>
<td style="text-align:left;">
-42.9%
</td>
<td style="text-align:left;">
26.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
6.0%
</td>
<td style="text-align:left;">
-28.4%
</td>
<td style="text-align:left;">
40.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
15.6%
</td>
<td style="text-align:left;">
-19.1%
</td>
<td style="text-align:left;">
49.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
16.7%
</td>
<td style="text-align:left;">
-18.3%
</td>
<td style="text-align:left;">
50.5%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
OPENDRONEMAP
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-33.0%
</td>
<td style="text-align:left;">
-67.4%
</td>
<td style="text-align:left;">
1.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-35.7%
</td>
<td style="text-align:left;">
-70.3%
</td>
<td style="text-align:left;">
-1.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-36.1%
</td>
<td style="text-align:left;">
-70.5%
</td>
<td style="text-align:left;">
-1.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-35.8%
</td>
<td style="text-align:left;">
-70.7%
</td>
<td style="text-align:left;">
-1.9%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-32.9%
</td>
<td style="text-align:left;">
-67.4%
</td>
<td style="text-align:left;">
2.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-34.4%
</td>
<td style="text-align:left;">
-69.1%
</td>
<td style="text-align:left;">
-0.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-34.3%
</td>
<td style="text-align:left;">
-68.0%
</td>
<td style="text-align:left;">
0.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-33.9%
</td>
<td style="text-align:left;">
-68.5%
</td>
<td style="text-align:left;">
0.5%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-31.3%
</td>
<td style="text-align:left;">
-65.9%
</td>
<td style="text-align:left;">
3.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-33.0%
</td>
<td style="text-align:left;">
-67.3%
</td>
<td style="text-align:left;">
1.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-34.1%
</td>
<td style="text-align:left;">
-69.5%
</td>
<td style="text-align:left;">
-0.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-34.0%
</td>
<td style="text-align:left;">
-68.6%
</td>
<td style="text-align:left;">
0.4%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-8.2%
</td>
<td style="text-align:left;">
-43.7%
</td>
<td style="text-align:left;">
25.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-12.0%
</td>
<td style="text-align:left;">
-47.1%
</td>
<td style="text-align:left;">
21.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-13.1%
</td>
<td style="text-align:left;">
-46.3%
</td>
<td style="text-align:left;">
22.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-13.0%
</td>
<td style="text-align:left;">
-48.0%
</td>
<td style="text-align:left;">
21.2%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
0.9%
</td>
<td style="text-align:left;">
-33.5%
</td>
<td style="text-align:left;">
35.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-2.8%
</td>
<td style="text-align:left;">
-36.7%
</td>
<td style="text-align:left;">
32.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-3.7%
</td>
<td style="text-align:left;">
-39.5%
</td>
<td style="text-align:left;">
29.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-5.4%
</td>
<td style="text-align:left;">
-40.0%
</td>
<td style="text-align:left;">
29.0%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
PIX4D
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-8.5%
</td>
<td style="text-align:left;">
-43.6%
</td>
<td style="text-align:left;">
25.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-2.3%
</td>
<td style="text-align:left;">
-38.1%
</td>
<td style="text-align:left;">
31.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
0.7%
</td>
<td style="text-align:left;">
-33.6%
</td>
<td style="text-align:left;">
36.0%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
2.3%
</td>
<td style="text-align:left;">
-32.1%
</td>
<td style="text-align:left;">
37.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
6.9%
</td>
<td style="text-align:left;">
-28.0%
</td>
<td style="text-align:left;">
41.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
8.9%
</td>
<td style="text-align:left;">
-24.5%
</td>
<td style="text-align:left;">
44.8%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
5.3%
</td>
<td style="text-align:left;">
-29.5%
</td>
<td style="text-align:left;">
39.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
9.4%
</td>
<td style="text-align:left;">
-24.9%
</td>
<td style="text-align:left;">
44.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
11.4%
</td>
<td style="text-align:left;">
-22.3%
</td>
<td style="text-align:left;">
46.8%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
ultra high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
6.8%
</td>
<td style="text-align:left;">
-26.9%
</td>
<td style="text-align:left;">
42.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
11.4%
</td>
<td style="text-align:left;">
-23.7%
</td>
<td style="text-align:left;">
45.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
12.1%
</td>
<td style="text-align:left;">
-22.8%
</td>
<td style="text-align:left;">
46.3%
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="ba-absolute-percent-error" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> BA Absolute Percent Error<a href="stand_ba.html#ba-absolute-percent-error" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="summary-statistics-14" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Summary Statistics<a href="stand_ba.html#summary-statistics-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="stand_ba.html#cb635-1" tabindex="-1"></a>  <span class="co"># summarize data</span></span>
<span id="cb635-2"><a href="stand_ba.html#cb635-2" tabindex="-1"></a>  dta_temp <span class="ot">=</span> ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb635-3"><a href="stand_ba.html#cb635-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span></span>
<span id="cb635-4"><a href="stand_ba.html#cb635-4" tabindex="-1"></a>    <span class="co"># collapse across study site</span></span>
<span id="cb635-5"><a href="stand_ba.html#cb635-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb635-6"><a href="stand_ba.html#cb635-6" tabindex="-1"></a>      <span class="at">basal_area_abs_pct_error =</span> <span class="fu">mean</span>(basal_area_abs_pct_error, <span class="at">na.rm =</span> T)</span>
<span id="cb635-7"><a href="stand_ba.html#cb635-7" tabindex="-1"></a>      , <span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb635-8"><a href="stand_ba.html#cb635-8" tabindex="-1"></a>    )</span>
<span id="cb635-9"><a href="stand_ba.html#cb635-9" tabindex="-1"></a>  <span class="co"># set limits for color scale</span></span>
<span id="cb635-10"><a href="stand_ba.html#cb635-10" tabindex="-1"></a>  lmt_basal_area_abs_pct_error <span class="ot">=</span> <span class="fu">ceiling</span>(<span class="fl">1.02</span><span class="sc">*</span><span class="dv">10</span><span class="sc">*</span><span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">range</span>(dta_temp<span class="sc">$</span>basal_area_abs_pct_error, <span class="at">na.rm =</span> T))))<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb635-11"><a href="stand_ba.html#cb635-11" tabindex="-1"></a>  <span class="co"># scales::show_col(viridis::mako(n = 10, begin = 0.2, end = 0.9, direction = -1))</span></span>
<span id="cb635-12"><a href="stand_ba.html#cb635-12" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_div_gradient()(seq(0, 1, length.out = 7)))</span></span>
<span id="cb635-13"><a href="stand_ba.html#cb635-13" tabindex="-1"></a>  <span class="co"># plot it</span></span>
<span id="cb635-14"><a href="stand_ba.html#cb635-14" tabindex="-1"></a>  dta_temp <span class="sc">%&gt;%</span> </span>
<span id="cb635-15"><a href="stand_ba.html#cb635-15" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb635-16"><a href="stand_ba.html#cb635-16" tabindex="-1"></a>      <span class="at">y =</span> depth_maps_generation_quality</span>
<span id="cb635-17"><a href="stand_ba.html#cb635-17" tabindex="-1"></a>      , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb635-18"><a href="stand_ba.html#cb635-18" tabindex="-1"></a>      , <span class="at">fill =</span> basal_area_abs_pct_error</span>
<span id="cb635-19"><a href="stand_ba.html#cb635-19" tabindex="-1"></a>      , <span class="at">label =</span> <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">percent</span>(basal_area_abs_pct_error,<span class="at">accuracy =</span> <span class="fl">0.1</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">(n=&quot;</span>, n,<span class="st">&quot;)&quot;</span>)</span>
<span id="cb635-20"><a href="stand_ba.html#cb635-20" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb635-21"><a href="stand_ba.html#cb635-21" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb635-22"><a href="stand_ba.html#cb635-22" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb635-23"><a href="stand_ba.html#cb635-23" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(software)) <span class="sc">+</span> </span>
<span id="cb635-24"><a href="stand_ba.html#cb635-24" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb635-25"><a href="stand_ba.html#cb635-25" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb635-26"><a href="stand_ba.html#cb635-26" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb635-27"><a href="stand_ba.html#cb635-27" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb635-28"><a href="stand_ba.html#cb635-28" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb635-29"><a href="stand_ba.html#cb635-29" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_basal_area_abs_pct_error)</span>
<span id="cb635-30"><a href="stand_ba.html#cb635-30" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb635-31"><a href="stand_ba.html#cb635-31" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb635-32"><a href="stand_ba.html#cb635-32" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb635-33"><a href="stand_ba.html#cb635-33" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb635-34"><a href="stand_ba.html#cb635-34" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb635-35"><a href="stand_ba.html#cb635-35" tabindex="-1"></a>      , <span class="at">y =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb635-36"><a href="stand_ba.html#cb635-36" tabindex="-1"></a>      , <span class="at">fill =</span> <span class="st">&quot;Basal Area Abs. % Error&quot;</span></span>
<span id="cb635-37"><a href="stand_ba.html#cb635-37" tabindex="-1"></a>      , <span class="at">title =</span> <span class="st">&quot;mean basal area absolute percent error and # of study sites&quot;</span></span>
<span id="cb635-38"><a href="stand_ba.html#cb635-38" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb635-39"><a href="stand_ba.html#cb635-39" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb635-40"><a href="stand_ba.html#cb635-40" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb635-41"><a href="stand_ba.html#cb635-41" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb635-42"><a href="stand_ba.html#cb635-42" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb635-43"><a href="stand_ba.html#cb635-43" tabindex="-1"></a>      , <span class="at">panel.background =</span> <span class="fu">element_blank</span>()</span>
<span id="cb635-44"><a href="stand_ba.html#cb635-44" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb635-45"><a href="stand_ba.html#cb635-45" tabindex="-1"></a>      <span class="co"># , plot.title = element_text(hjust = 0.5)</span></span>
<span id="cb635-46"><a href="stand_ba.html#cb635-46" tabindex="-1"></a>      <span class="co"># , plot.subtitle = element_text(hjust = 0.5)</span></span>
<span id="cb635-47"><a href="stand_ba.html#cb635-47" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb635-48"><a href="stand_ba.html#cb635-48" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-501-1.png" width="1008" /></p>
</div>
<div id="model-ba-absolute-percent-error" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Model: BA Absolute Percent Error<a href="stand_ba.html#model-ba-absolute-percent-error" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ll model the BA APE using the gamma likelihood to accurately represent the dependent variable which is continuous and strictly positive (i.e. it is impossible to have a negative APE). The gamma distribution is a great alternative that accounts for data with a zero lower limit and any right skew.</p>
<p>We borrow here from the excellent series on causal inference by <a href="https://solomonkurz.netlify.app/blog/2023-05-14-causal-inference-with-gamma-regression-or-the-problem-is-with-the-link-function-not-the-likelihood/">A. Solomon Kurz</a></p>
<div id="prior-distributions-6" class="section level4 hasAnchor" number="8.3.2.1">
<h4><span class="header-section-number">8.3.2.1</span> Prior distributions<a href="stand_ba.html#prior-distributions-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First, let’s set the priors</p>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="stand_ba.html#cb636-1" tabindex="-1"></a><span class="co"># desired priors</span></span>
<span id="cb636-2"><a href="stand_ba.html#cb636-2" tabindex="-1"></a>m_temp <span class="ot">&lt;-</span> <span class="fu">mean</span>(ptcld_validation_data<span class="sc">$</span>basal_area_abs_pct_error)  <span class="co"># desired mean</span></span>
<span id="cb636-3"><a href="stand_ba.html#cb636-3" tabindex="-1"></a>s_temp <span class="ot">&lt;-</span> <span class="fu">sd</span>(ptcld_validation_data<span class="sc">$</span>basal_area_abs_pct_error)<span class="sc">*</span><span class="dv">5</span>     <span class="co"># desired SD</span></span>
<span id="cb636-4"><a href="stand_ba.html#cb636-4" tabindex="-1"></a></span>
<span id="cb636-5"><a href="stand_ba.html#cb636-5" tabindex="-1"></a><span class="co"># use the equations</span></span>
<span id="cb636-6"><a href="stand_ba.html#cb636-6" tabindex="-1"></a>mu_temp    <span class="ot">&lt;-</span> <span class="fu">log</span>(m_temp <span class="sc">/</span> <span class="fu">sqrt</span>(s_temp<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> m_temp<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb636-7"><a href="stand_ba.html#cb636-7" tabindex="-1"></a>sigma_temp <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">log</span>(s_temp<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> m_temp<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb636-8"><a href="stand_ba.html#cb636-8" tabindex="-1"></a></span>
<span id="cb636-9"><a href="stand_ba.html#cb636-9" tabindex="-1"></a><span class="co"># what are the lognormal parameter values?</span></span>
<span id="cb636-10"><a href="stand_ba.html#cb636-10" tabindex="-1"></a><span class="co"># mu_temp</span></span>
<span id="cb636-11"><a href="stand_ba.html#cb636-11" tabindex="-1"></a><span class="co"># sigma_temp</span></span>
<span id="cb636-12"><a href="stand_ba.html#cb636-12" tabindex="-1"></a><span class="co"># exp(mu_temp)</span></span>
<span id="cb636-13"><a href="stand_ba.html#cb636-13" tabindex="-1"></a></span>
<span id="cb636-14"><a href="stand_ba.html#cb636-14" tabindex="-1"></a>stanvars_temp <span class="ot">=</span> </span>
<span id="cb636-15"><a href="stand_ba.html#cb636-15" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(mu_temp,    <span class="at">name =</span> <span class="st">&quot;mu_temp&quot;</span>) <span class="sc">+</span> </span>
<span id="cb636-16"><a href="stand_ba.html#cb636-16" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(sigma_temp,      <span class="at">name =</span> <span class="st">&quot;sigma_temp&quot;</span>)</span>
<span id="cb636-17"><a href="stand_ba.html#cb636-17" tabindex="-1"></a><span class="do">#### setting priors</span></span>
<span id="cb636-18"><a href="stand_ba.html#cb636-18" tabindex="-1"></a><span class="co"># required libraries: tidyverse, tidybayes, brms, palettetown, latex2exp</span></span>
<span id="cb636-19"><a href="stand_ba.html#cb636-19" tabindex="-1"></a>brms_ba_ape_mod_gamma_priors_temp <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb636-20"><a href="stand_ba.html#cb636-20" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mu_temp, sigma_temp), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb636-21"><a href="stand_ba.html#cb636-21" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">student_t</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="fl">2.5</span>), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb636-22"><a href="stand_ba.html#cb636-22" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>), <span class="at">class =</span> shape)</span>
<span id="cb636-23"><a href="stand_ba.html#cb636-23" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot the priors</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="stand_ba.html#cb637-1" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb637-2"><a href="stand_ba.html#cb637-2" tabindex="-1"></a>plt_prior12 <span class="ot">=</span></span>
<span id="cb637-3"><a href="stand_ba.html#cb637-3" tabindex="-1"></a>brms_ba_ape_mod_gamma_priors_temp <span class="sc">%&gt;%</span> </span>
<span id="cb637-4"><a href="stand_ba.html#cb637-4" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">parse_dist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb637-5"><a href="stand_ba.html#cb637-5" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">marginalize_lkjcorr</span>(<span class="at">K =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb637-6"><a href="stand_ba.html#cb637-6" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb637-7"><a href="stand_ba.html#cb637-7" tabindex="-1"></a>    .args</span>
<span id="cb637-8"><a href="stand_ba.html#cb637-8" tabindex="-1"></a>    , <span class="at">sep =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb637-9"><a href="stand_ba.html#cb637-9" tabindex="-1"></a>    , <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb637-10"><a href="stand_ba.html#cb637-10" tabindex="-1"></a>    , <span class="at">remove =</span> F</span>
<span id="cb637-11"><a href="stand_ba.html#cb637-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb637-12"><a href="stand_ba.html#cb637-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb637-13"><a href="stand_ba.html#cb637-13" tabindex="-1"></a>    <span class="at">distrib =</span> <span class="fu">paste0</span>(</span>
<span id="cb637-14"><a href="stand_ba.html#cb637-14" tabindex="-1"></a>      class, <span class="st">&quot; ~ &quot;</span></span>
<span id="cb637-15"><a href="stand_ba.html#cb637-15" tabindex="-1"></a>      , .dist</span>
<span id="cb637-16"><a href="stand_ba.html#cb637-16" tabindex="-1"></a>      , <span class="st">&quot;(&quot;</span></span>
<span id="cb637-17"><a href="stand_ba.html#cb637-17" tabindex="-1"></a>      , a <span class="sc">%&gt;%</span> readr<span class="sc">::</span><span class="fu">parse_number</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb637-18"><a href="stand_ba.html#cb637-18" tabindex="-1"></a>      , <span class="st">&quot;,&quot;</span></span>
<span id="cb637-19"><a href="stand_ba.html#cb637-19" tabindex="-1"></a>      , b <span class="sc">%&gt;%</span> readr<span class="sc">::</span><span class="fu">parse_number</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb637-20"><a href="stand_ba.html#cb637-20" tabindex="-1"></a>      , <span class="st">&quot;)&quot;</span></span>
<span id="cb637-21"><a href="stand_ba.html#cb637-21" tabindex="-1"></a>    )</span>
<span id="cb637-22"><a href="stand_ba.html#cb637-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb637-23"><a href="stand_ba.html#cb637-23" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">dist =</span> .dist, <span class="at">args =</span> .args)) <span class="sc">+</span></span>
<span id="cb637-24"><a href="stand_ba.html#cb637-24" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(distrib), <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb637-25"><a href="stand_ba.html#cb637-25" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb637-26"><a href="stand_ba.html#cb637-26" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> prior),</span>
<span id="cb637-27"><a href="stand_ba.html#cb637-27" tabindex="-1"></a>    <span class="at">n =</span> <span class="fl">10e2</span>,</span>
<span id="cb637-28"><a href="stand_ba.html#cb637-28" tabindex="-1"></a>    <span class="at">show.legend =</span> F</span>
<span id="cb637-29"><a href="stand_ba.html#cb637-29" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="st">&quot;slategray&quot;</span></span>
<span id="cb637-30"><a href="stand_ba.html#cb637-30" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb637-31"><a href="stand_ba.html#cb637-31" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb637-32"><a href="stand_ba.html#cb637-32" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb637-33"><a href="stand_ba.html#cb637-33" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb637-34"><a href="stand_ba.html#cb637-34" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb637-35"><a href="stand_ba.html#cb637-35" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb637-36"><a href="stand_ba.html#cb637-36" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb637-37"><a href="stand_ba.html#cb637-37" tabindex="-1"></a>    , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>)</span>
<span id="cb637-38"><a href="stand_ba.html#cb637-38" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb637-39"><a href="stand_ba.html#cb637-39" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb637-40"><a href="stand_ba.html#cb637-40" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb637-41"><a href="stand_ba.html#cb637-41" tabindex="-1"></a>    , <span class="at">title =</span> <span class="st">&quot;Priors: Basal Area Absolute Percent Error&quot;</span></span>
<span id="cb637-42"><a href="stand_ba.html#cb637-42" tabindex="-1"></a>    , <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb637-43"><a href="stand_ba.html#cb637-43" tabindex="-1"></a>  ) </span>
<span id="cb637-44"><a href="stand_ba.html#cb637-44" tabindex="-1"></a>plt_prior12</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-503-1.png" width="1008" /></p>
</div>
<div id="fit-the-model-6" class="section level4 hasAnchor" number="8.3.2.2">
<h4><span class="header-section-number">8.3.2.2</span> Fit the model<a href="stand_ba.html#fit-the-model-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now fit the model.</p>
<div class="sourceCode" id="cb638"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb638-1"><a href="stand_ba.html#cb638-1" tabindex="-1"></a><span class="do">#### Fit the model</span></span>
<span id="cb638-2"><a href="stand_ba.html#cb638-2" tabindex="-1"></a>brms_ba_ape_mod <span class="ot">=</span> brms<span class="sc">::</span><span class="fu">brm</span>(</span>
<span id="cb638-3"><a href="stand_ba.html#cb638-3" tabindex="-1"></a>  <span class="at">formula =</span> basal_area_abs_pct_error <span class="sc">~</span> </span>
<span id="cb638-4"><a href="stand_ba.html#cb638-4" tabindex="-1"></a>    <span class="co"># baseline</span></span>
<span id="cb638-5"><a href="stand_ba.html#cb638-5" tabindex="-1"></a>    <span class="dv">1</span> <span class="sc">+</span> </span>
<span id="cb638-6"><a href="stand_ba.html#cb638-6" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb638-7"><a href="stand_ba.html#cb638-7" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb638-8"><a href="stand_ba.html#cb638-8" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb638-9"><a href="stand_ba.html#cb638-9" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb638-10"><a href="stand_ba.html#cb638-10" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> study_site) <span class="sc">+</span> <span class="co"># only fitting main effects of site and not interactions</span></span>
<span id="cb638-11"><a href="stand_ba.html#cb638-11" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb638-12"><a href="stand_ba.html#cb638-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb638-13"><a href="stand_ba.html#cb638-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb638-14"><a href="stand_ba.html#cb638-14" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb638-15"><a href="stand_ba.html#cb638-15" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb638-16"><a href="stand_ba.html#cb638-16" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb638-17"><a href="stand_ba.html#cb638-17" tabindex="-1"></a>  , <span class="at">data =</span> ptcld_validation_data</span>
<span id="cb638-18"><a href="stand_ba.html#cb638-18" tabindex="-1"></a>  , <span class="at">family =</span> brms<span class="sc">::</span><span class="fu">brmsfamily</span>(<span class="st">&quot;Gamma&quot;</span>, <span class="at">link =</span> <span class="st">&quot;log&quot;</span>)</span>
<span id="cb638-19"><a href="stand_ba.html#cb638-19" tabindex="-1"></a>  <span class="co"># priors</span></span>
<span id="cb638-20"><a href="stand_ba.html#cb638-20" tabindex="-1"></a>  , <span class="at">prior =</span> brms_ba_ape_mod_gamma_priors_temp</span>
<span id="cb638-21"><a href="stand_ba.html#cb638-21" tabindex="-1"></a>  , <span class="at">stanvars =</span> stanvars_temp</span>
<span id="cb638-22"><a href="stand_ba.html#cb638-22" tabindex="-1"></a>  <span class="co"># mcmc</span></span>
<span id="cb638-23"><a href="stand_ba.html#cb638-23" tabindex="-1"></a>  , <span class="at">iter =</span> <span class="dv">20000</span>, <span class="at">warmup =</span> <span class="dv">10000</span>, <span class="at">chains =</span> <span class="dv">4</span></span>
<span id="cb638-24"><a href="stand_ba.html#cb638-24" tabindex="-1"></a>  , <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.999</span>, <span class="at">max_treedepth =</span> <span class="dv">13</span>)</span>
<span id="cb638-25"><a href="stand_ba.html#cb638-25" tabindex="-1"></a>  , <span class="at">cores =</span> <span class="fu">round</span>(parallel<span class="sc">::</span><span class="fu">detectCores</span>()<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb638-26"><a href="stand_ba.html#cb638-26" tabindex="-1"></a>  , <span class="at">file =</span> <span class="fu">paste0</span>(rootdir, <span class="st">&quot;/fits/brms_ba_ape_mod&quot;</span>)</span>
<span id="cb638-27"><a href="stand_ba.html#cb638-27" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="qualityfiltering---interaction-7" class="section level4 hasAnchor" number="8.3.2.3">
<h4><span class="header-section-number">8.3.2.3</span> Quality:Filtering - interaction<a href="stand_ba.html#qualityfiltering---interaction-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="stand_ba.html#cb639-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb639-2"><a href="stand_ba.html#cb639-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb639-3"><a href="stand_ba.html#cb639-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb639-4"><a href="stand_ba.html#cb639-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb639-5"><a href="stand_ba.html#cb639-5" tabindex="-1"></a>      brms_ba_ape_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb639-6"><a href="stand_ba.html#cb639-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb639-7"><a href="stand_ba.html#cb639-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb639-8"><a href="stand_ba.html#cb639-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb639-9"><a href="stand_ba.html#cb639-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode)</span>
<span id="cb639-10"><a href="stand_ba.html#cb639-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb639-11"><a href="stand_ba.html#cb639-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb639-12"><a href="stand_ba.html#cb639-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb639-13"><a href="stand_ba.html#cb639-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb639-14"><a href="stand_ba.html#cb639-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb639-15"><a href="stand_ba.html#cb639-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb639-16"><a href="stand_ba.html#cb639-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb639-17"><a href="stand_ba.html#cb639-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb639-18"><a href="stand_ba.html#cb639-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb639-19"><a href="stand_ba.html#cb639-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb639-20"><a href="stand_ba.html#cb639-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb639-21"><a href="stand_ba.html#cb639-21" tabindex="-1"></a>    )</span>
<span id="cb639-22"><a href="stand_ba.html#cb639-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb639-23"><a href="stand_ba.html#cb639-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb639-24"><a href="stand_ba.html#cb639-24" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb639-25"><a href="stand_ba.html#cb639-25" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb639-26"><a href="stand_ba.html#cb639-26" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb639-27"><a href="stand_ba.html#cb639-27" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb639-28"><a href="stand_ba.html#cb639-28" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb639-29"><a href="stand_ba.html#cb639-29" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb639-30"><a href="stand_ba.html#cb639-30" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb639-31"><a href="stand_ba.html#cb639-31" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb639-32"><a href="stand_ba.html#cb639-32" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb639-33"><a href="stand_ba.html#cb639-33" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_basal_area_abs_pct_error<span class="sc">*</span>.<span class="dv">6</span>)</span>
<span id="cb639-34"><a href="stand_ba.html#cb639-34" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb639-35"><a href="stand_ba.html#cb639-35" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb639-36"><a href="stand_ba.html#cb639-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb639-37"><a href="stand_ba.html#cb639-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb639-38"><a href="stand_ba.html#cb639-38" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb639-39"><a href="stand_ba.html#cb639-39" tabindex="-1"></a>      <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.005</span>,lmt_basal_area_abs_pct_error<span class="sc">*</span><span class="fl">1.1</span>)</span>
<span id="cb639-40"><a href="stand_ba.html#cb639-40" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb639-41"><a href="stand_ba.html#cb639-41" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb639-42"><a href="stand_ba.html#cb639-42" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb639-43"><a href="stand_ba.html#cb639-43" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;BA Abs. % Error&quot;</span></span>
<span id="cb639-44"><a href="stand_ba.html#cb639-44" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of BA Abs. % Error with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb639-45"><a href="stand_ba.html#cb639-45" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb639-46"><a href="stand_ba.html#cb639-46" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb639-47"><a href="stand_ba.html#cb639-47" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb639-48"><a href="stand_ba.html#cb639-48" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb639-49"><a href="stand_ba.html#cb639-49" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb639-50"><a href="stand_ba.html#cb639-50" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb639-51"><a href="stand_ba.html#cb639-51" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb639-52"><a href="stand_ba.html#cb639-52" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-507-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb640-1"><a href="stand_ba.html#cb640-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb640-2"><a href="stand_ba.html#cb640-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb640-3"><a href="stand_ba.html#cb640-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb640-4"><a href="stand_ba.html#cb640-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb640-5"><a href="stand_ba.html#cb640-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(depth_maps_generation_quality,depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb640-6"><a href="stand_ba.html#cb640-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb640-7"><a href="stand_ba.html#cb640-7" tabindex="-1"></a></span>
<span id="cb640-8"><a href="stand_ba.html#cb640-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb640-9"><a href="stand_ba.html#cb640-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(depth_maps_generation_quality)) <span class="sc">%&gt;%</span> </span>
<span id="cb640-10"><a href="stand_ba.html#cb640-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb640-11"><a href="stand_ba.html#cb640-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb640-12"><a href="stand_ba.html#cb640-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;BA Abs. % Error&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb640-13"><a href="stand_ba.html#cb640-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb640-14"><a href="stand_ba.html#cb640-14" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb640-15"><a href="stand_ba.html#cb640-15" tabindex="-1"></a>      , <span class="st">&quot;BA Abs. % Error&lt;br&gt;median&quot;</span></span>
<span id="cb640-16"><a href="stand_ba.html#cb640-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb640-17"><a href="stand_ba.html#cb640-17" tabindex="-1"></a>    )</span>
<span id="cb640-18"><a href="stand_ba.html#cb640-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb640-19"><a href="stand_ba.html#cb640-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb640-20"><a href="stand_ba.html#cb640-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb640-21"><a href="stand_ba.html#cb640-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>depth_maps_generation_quality))) <span class="sc">%&gt;%</span> </span>
<span id="cb640-22"><a href="stand_ba.html#cb640-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-508">Table 8.5: </span>BA Abs. % Error<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
BA Abs. % Error<br>median
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>ultra high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
15.7%
</td>
<td style="text-align:left;">
2.0%
</td>
<td style="text-align:left;">
35.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
14.7%
</td>
<td style="text-align:left;">
1.8%
</td>
<td style="text-align:left;">
32.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
14.3%
</td>
<td style="text-align:left;">
2.0%
</td>
<td style="text-align:left;">
31.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
13.1%
</td>
<td style="text-align:left;">
1.9%
</td>
<td style="text-align:left;">
29.5%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
18.2%
</td>
<td style="text-align:left;">
2.1%
</td>
<td style="text-align:left;">
41.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
16.7%
</td>
<td style="text-align:left;">
2.3%
</td>
<td style="text-align:left;">
36.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
16.1%
</td>
<td style="text-align:left;">
2.2%
</td>
<td style="text-align:left;">
35.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
15.4%
</td>
<td style="text-align:left;">
2.3%
</td>
<td style="text-align:left;">
34.0%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>medium</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
23.8%
</td>
<td style="text-align:left;">
3.2%
</td>
<td style="text-align:left;">
53.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
21.0%
</td>
<td style="text-align:left;">
2.9%
</td>
<td style="text-align:left;">
45.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
20.0%
</td>
<td style="text-align:left;">
2.8%
</td>
<td style="text-align:left;">
43.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
18.8%
</td>
<td style="text-align:left;">
2.6%
</td>
<td style="text-align:left;">
41.0%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>low</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
29.9%
</td>
<td style="text-align:left;">
4.1%
</td>
<td style="text-align:left;">
67.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
26.7%
</td>
<td style="text-align:left;">
3.6%
</td>
<td style="text-align:left;">
58.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
24.7%
</td>
<td style="text-align:left;">
3.1%
</td>
<td style="text-align:left;">
53.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
22.7%
</td>
<td style="text-align:left;">
2.6%
</td>
<td style="text-align:left;">
49.4%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>lowest</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
38.9%
</td>
<td style="text-align:left;">
4.1%
</td>
<td style="text-align:left;">
89.0%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
35.7%
</td>
<td style="text-align:left;">
4.9%
</td>
<td style="text-align:left;">
81.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
33.3%
</td>
<td style="text-align:left;">
3.2%
</td>
<td style="text-align:left;">
75.4%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
31.3%
</td>
<td style="text-align:left;">
2.7%
</td>
<td style="text-align:left;">
71.1%
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="stand_ba.html#cb641-1" tabindex="-1"></a><span class="co"># first we need to define the contrasts to make</span></span>
<span id="cb641-2"><a href="stand_ba.html#cb641-2" tabindex="-1"></a>contrast_list <span class="ot">=</span> </span>
<span id="cb641-3"><a href="stand_ba.html#cb641-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb641-4"><a href="stand_ba.html#cb641-4" tabindex="-1"></a>    <span class="at">x1 =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb641-5"><a href="stand_ba.html#cb641-5" tabindex="-1"></a>    , <span class="at">x2 =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb641-6"><a href="stand_ba.html#cb641-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb641-7"><a href="stand_ba.html#cb641-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb641-8"><a href="stand_ba.html#cb641-8" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb641-9"><a href="stand_ba.html#cb641-9" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">everything</span>()</span>
<span id="cb641-10"><a href="stand_ba.html#cb641-10" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb641-11"><a href="stand_ba.html#cb641-11" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb641-12"><a href="stand_ba.html#cb641-12" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb641-13"><a href="stand_ba.html#cb641-13" tabindex="-1"></a>      )}</span>
<span id="cb641-14"><a href="stand_ba.html#cb641-14" tabindex="-1"></a>    )</span>
<span id="cb641-15"><a href="stand_ba.html#cb641-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb641-16"><a href="stand_ba.html#cb641-16" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(x1<span class="sc">&lt;</span>x2) <span class="sc">%&gt;%</span> </span>
<span id="cb641-17"><a href="stand_ba.html#cb641-17" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(x1,x2) <span class="sc">%&gt;%</span> </span>
<span id="cb641-18"><a href="stand_ba.html#cb641-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(dplyr<span class="sc">::</span><span class="fu">everything</span>(), as.character)) <span class="sc">%&gt;%</span> </span>
<span id="cb641-19"><a href="stand_ba.html#cb641-19" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">transpose</span>()</span>
<span id="cb641-20"><a href="stand_ba.html#cb641-20" tabindex="-1"></a><span class="co"># make the contrasts using compare_levels</span></span>
<span id="cb641-21"><a href="stand_ba.html#cb641-21" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb641-22"><a href="stand_ba.html#cb641-22" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb641-23"><a href="stand_ba.html#cb641-23" tabindex="-1"></a>      value</span>
<span id="cb641-24"><a href="stand_ba.html#cb641-24" tabindex="-1"></a>      , <span class="at">by =</span> depth_maps_generation_quality</span>
<span id="cb641-25"><a href="stand_ba.html#cb641-25" tabindex="-1"></a>      , <span class="at">comparison =</span> </span>
<span id="cb641-26"><a href="stand_ba.html#cb641-26" tabindex="-1"></a>        contrast_list</span>
<span id="cb641-27"><a href="stand_ba.html#cb641-27" tabindex="-1"></a>        <span class="co"># tidybayes::emmeans_comparison(&quot;revpairwise&quot;) </span></span>
<span id="cb641-28"><a href="stand_ba.html#cb641-28" tabindex="-1"></a>        <span class="co">#&quot;pairwise&quot;</span></span>
<span id="cb641-29"><a href="stand_ba.html#cb641-29" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb641-30"><a href="stand_ba.html#cb641-30" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_quality)</span>
<span id="cb641-31"><a href="stand_ba.html#cb641-31" tabindex="-1"></a></span>
<span id="cb641-32"><a href="stand_ba.html#cb641-32" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb641-33"><a href="stand_ba.html#cb641-33" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb641-34"><a href="stand_ba.html#cb641-34" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb641-35"><a href="stand_ba.html#cb641-35" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb641-36"><a href="stand_ba.html#cb641-36" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb641-37"><a href="stand_ba.html#cb641-37" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb641-38"><a href="stand_ba.html#cb641-38" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb641-39"><a href="stand_ba.html#cb641-39" tabindex="-1"></a>        <span class="st">&quot;sorter&quot;</span></span>
<span id="cb641-40"><a href="stand_ba.html#cb641-40" tabindex="-1"></a>        , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb641-41"><a href="stand_ba.html#cb641-41" tabindex="-1"></a>      )</span>
<span id="cb641-42"><a href="stand_ba.html#cb641-42" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb641-43"><a href="stand_ba.html#cb641-43" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb641-44"><a href="stand_ba.html#cb641-44" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb641-45"><a href="stand_ba.html#cb641-45" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb641-46"><a href="stand_ba.html#cb641-46" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb641-47"><a href="stand_ba.html#cb641-47" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb641-48"><a href="stand_ba.html#cb641-48" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb641-49"><a href="stand_ba.html#cb641-49" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb641-50"><a href="stand_ba.html#cb641-50" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb641-51"><a href="stand_ba.html#cb641-51" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb641-52"><a href="stand_ba.html#cb641-52" tabindex="-1"></a>      )}</span>
<span id="cb641-53"><a href="stand_ba.html#cb641-53" tabindex="-1"></a>    )</span>
<span id="cb641-54"><a href="stand_ba.html#cb641-54" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb641-55"><a href="stand_ba.html#cb641-55" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb641-56"><a href="stand_ba.html#cb641-56" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb641-57"><a href="stand_ba.html#cb641-57" tabindex="-1"></a>        <span class="fu">as.numeric</span>()</span>
<span id="cb641-58"><a href="stand_ba.html#cb641-58" tabindex="-1"></a>      )</span>
<span id="cb641-59"><a href="stand_ba.html#cb641-59" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> depth_maps_generation_filtering_mode <span class="sc">%&gt;%</span> </span>
<span id="cb641-60"><a href="stand_ba.html#cb641-60" tabindex="-1"></a>      <span class="fu">factor</span>(</span>
<span id="cb641-61"><a href="stand_ba.html#cb641-61" tabindex="-1"></a>        <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb641-62"><a href="stand_ba.html#cb641-62" tabindex="-1"></a>        , <span class="at">ordered =</span> T</span>
<span id="cb641-63"><a href="stand_ba.html#cb641-63" tabindex="-1"></a>      )</span>
<span id="cb641-64"><a href="stand_ba.html#cb641-64" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb641-65"><a href="stand_ba.html#cb641-65" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb641-66"><a href="stand_ba.html#cb641-66" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast,depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb641-67"><a href="stand_ba.html#cb641-67" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb642-1"><a href="stand_ba.html#cb642-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb642-2"><a href="stand_ba.html#cb642-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb642-3"><a href="stand_ba.html#cb642-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb642-4"><a href="stand_ba.html#cb642-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb642-5"><a href="stand_ba.html#cb642-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_filtering_mode&quot;</span></span>
<span id="cb642-6"><a href="stand_ba.html#cb642-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.55</span></span>
<span id="cb642-7"><a href="stand_ba.html#cb642-7" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb642-8"><a href="stand_ba.html#cb642-8" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb642-9"><a href="stand_ba.html#cb642-9" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb642-10"><a href="stand_ba.html#cb642-10" tabindex="-1"></a>    , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">1.2</span>,<span class="fl">0.3</span>)</span>
<span id="cb642-11"><a href="stand_ba.html#cb642-11" tabindex="-1"></a>    , <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>,<span class="fl">0.5</span>)</span>
<span id="cb642-12"><a href="stand_ba.html#cb642-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb642-13"><a href="stand_ba.html#cb642-13" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb642-14"><a href="stand_ba.html#cb642-14" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb642-15"><a href="stand_ba.html#cb642-15" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast BA Abs. % Error&quot;</span></span>
<span id="cb642-16"><a href="stand_ba.html#cb642-16" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb642-17"><a href="stand_ba.html#cb642-17" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb642-18"><a href="stand_ba.html#cb642-18" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>)</span>
<span id="cb642-19"><a href="stand_ba.html#cb642-19" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-510-1.png" width="1008" /></p>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="stand_ba.html#cb643-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb643-2"><a href="stand_ba.html#cb643-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_fltr_comp_ba_ape.png&quot;</span></span>
<span id="cb643-3"><a href="stand_ba.html#cb643-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb643-4"><a href="stand_ba.html#cb643-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb643-5"><a href="stand_ba.html#cb643-5" tabindex="-1"></a>)</span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb644-1"><a href="stand_ba.html#cb644-1" tabindex="-1"></a>brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb644-2"><a href="stand_ba.html#cb644-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb644-3"><a href="stand_ba.html#cb644-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb644-4"><a href="stand_ba.html#cb644-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb644-5"><a href="stand_ba.html#cb644-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, depth_maps_generation_filtering_mode, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb644-6"><a href="stand_ba.html#cb644-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb644-7"><a href="stand_ba.html#cb644-7" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb644-8"><a href="stand_ba.html#cb644-8" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb644-9"><a href="stand_ba.html#cb644-9" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;BA Abs. % Error&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb644-10"><a href="stand_ba.html#cb644-10" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb644-11"><a href="stand_ba.html#cb644-11" tabindex="-1"></a>      <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb644-12"><a href="stand_ba.html#cb644-12" tabindex="-1"></a>      , <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb644-13"><a href="stand_ba.html#cb644-13" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;BA Abs. % Error&quot;</span></span>
<span id="cb644-14"><a href="stand_ba.html#cb644-14" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb644-15"><a href="stand_ba.html#cb644-15" tabindex="-1"></a>    )</span>
<span id="cb644-16"><a href="stand_ba.html#cb644-16" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb644-17"><a href="stand_ba.html#cb644-17" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb644-18"><a href="stand_ba.html#cb644-18" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb644-19"><a href="stand_ba.html#cb644-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-511">Table 8.6: </span>BA Abs. % Error<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality contrast
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>BA Abs. % Error
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-2.1%
</td>
<td style="text-align:left;">
-15.8%
</td>
<td style="text-align:left;">
8.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-2.1%
</td>
<td style="text-align:left;">
9.1%
</td>
<td style="text-align:left;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-1.7%
</td>
<td style="text-align:left;">
-13.1%
</td>
<td style="text-align:left;">
8.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-1.7%
</td>
<td style="text-align:left;">
8.4%
</td>
<td style="text-align:left;">
8.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-1.6%
</td>
<td style="text-align:left;">
-13.4%
</td>
<td style="text-align:left;">
7.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-1.9%
</td>
<td style="text-align:left;">
-12.6%
</td>
<td style="text-align:left;">
6.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-1.9%
</td>
<td style="text-align:left;">
7.2%
</td>
<td style="text-align:left;">
7.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-7.4%
</td>
<td style="text-align:left;">
-26.8%
</td>
<td style="text-align:left;">
5.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-5.7%
</td>
<td style="text-align:left;">
-21.7%
</td>
<td style="text-align:left;">
5.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-5.2%
</td>
<td style="text-align:left;">
-19.8%
</td>
<td style="text-align:left;">
6.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-5.2%
</td>
<td style="text-align:left;">
-19.1%
</td>
<td style="text-align:left;">
4.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-13.3%
</td>
<td style="text-align:left;">
-39.6%
</td>
<td style="text-align:left;">
2.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-11.3%
</td>
<td style="text-align:left;">
-33.1%
</td>
<td style="text-align:left;">
3.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-9.8%
</td>
<td style="text-align:left;">
-30.0%
</td>
<td style="text-align:left;">
3.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-9.1%
</td>
<td style="text-align:left;">
-27.7%
</td>
<td style="text-align:left;">
3.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-22.4%
</td>
<td style="text-align:left;">
-62.4%
</td>
<td style="text-align:left;">
2.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-20.4%
</td>
<td style="text-align:left;">
-56.3%
</td>
<td style="text-align:left;">
2.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-18.5%
</td>
<td style="text-align:left;">
-51.8%
</td>
<td style="text-align:left;">
3.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-17.7%
</td>
<td style="text-align:left;">
-49.4%
</td>
<td style="text-align:left;">
2.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-4.9%
</td>
<td style="text-align:left;">
-23.4%
</td>
<td style="text-align:left;">
8.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-3.8%
</td>
<td style="text-align:left;">
-19.0%
</td>
<td style="text-align:left;">
7.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-3.4%
</td>
<td style="text-align:left;">
-17.5%
</td>
<td style="text-align:left;">
8.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-3.0%
</td>
<td style="text-align:left;">
-16.8%
</td>
<td style="text-align:left;">
7.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-10.8%
</td>
<td style="text-align:left;">
-35.7%
</td>
<td style="text-align:left;">
4.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-9.3%
</td>
<td style="text-align:left;">
-30.2%
</td>
<td style="text-align:left;">
4.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-7.9%
</td>
<td style="text-align:left;">
-26.3%
</td>
<td style="text-align:left;">
6.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-6.8%
</td>
<td style="text-align:left;">
-25.0%
</td>
<td style="text-align:left;">
5.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-19.9%
</td>
<td style="text-align:left;">
-58.1%
</td>
<td style="text-align:left;">
3.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-18.3%
</td>
<td style="text-align:left;">
-53.2%
</td>
<td style="text-align:left;">
3.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-16.5%
</td>
<td style="text-align:left;">
-49.1%
</td>
<td style="text-align:left;">
3.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-15.4%
</td>
<td style="text-align:left;">
-46.3%
</td>
<td style="text-align:left;">
4.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-5.3%
</td>
<td style="text-align:left;">
-29.5%
</td>
<td style="text-align:left;">
9.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-5.0%
</td>
<td style="text-align:left;">
-25.6%
</td>
<td style="text-align:left;">
-25.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-5.0%
</td>
<td style="text-align:left;">
-24.0%
</td>
<td style="text-align:left;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-4.1%
</td>
<td style="text-align:left;">
-22.2%
</td>
<td style="text-align:left;">
8.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-3.4%
</td>
<td style="text-align:left;">
-19.8%
</td>
<td style="text-align:left;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-14.1%
</td>
<td style="text-align:left;">
-50.2%
</td>
<td style="text-align:left;">
7.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-13.8%
</td>
<td style="text-align:left;">
-46.9%
</td>
<td style="text-align:left;">
5.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-12.6%
</td>
<td style="text-align:left;">
-43.3%
</td>
<td style="text-align:left;">
5.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-11.9%
</td>
<td style="text-align:left;">
-40.6%
</td>
<td style="text-align:left;">
5.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
-8.1%
</td>
<td style="text-align:left;">
-42.0%
</td>
<td style="text-align:left;">
14.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
-8.1%
</td>
<td style="text-align:left;">
-38.8%
</td>
<td style="text-align:left;">
12.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
-7.8%
</td>
<td style="text-align:left;">
-36.4%
</td>
<td style="text-align:left;">
11.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
-7.8%
</td>
<td style="text-align:left;">
-35.1%
</td>
<td style="text-align:left;">
10.1%
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequality---interaction-7" class="section level4 hasAnchor" number="8.3.2.4">
<h4><span class="header-section-number">8.3.2.4</span> Software:Quality - interaction<a href="stand_ba.html#softwarequality---interaction-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="stand_ba.html#cb645-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb645-2"><a href="stand_ba.html#cb645-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb645-3"><a href="stand_ba.html#cb645-3" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb645-4"><a href="stand_ba.html#cb645-4" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb645-5"><a href="stand_ba.html#cb645-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb645-6"><a href="stand_ba.html#cb645-6" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb645-7"><a href="stand_ba.html#cb645-7" tabindex="-1"></a>      brms_ba_ape_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb645-8"><a href="stand_ba.html#cb645-8" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb645-9"><a href="stand_ba.html#cb645-9" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb645-10"><a href="stand_ba.html#cb645-10" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb645-11"><a href="stand_ba.html#cb645-11" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software)</span>
<span id="cb645-12"><a href="stand_ba.html#cb645-12" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb645-13"><a href="stand_ba.html#cb645-13" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb645-14"><a href="stand_ba.html#cb645-14" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb645-15"><a href="stand_ba.html#cb645-15" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb645-16"><a href="stand_ba.html#cb645-16" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb645-17"><a href="stand_ba.html#cb645-17" tabindex="-1"></a>    <span class="co"># remove out-of-sample obs</span></span>
<span id="cb645-18"><a href="stand_ba.html#cb645-18" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb645-19"><a href="stand_ba.html#cb645-19" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb645-20"><a href="stand_ba.html#cb645-20" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb645-21"><a href="stand_ba.html#cb645-21" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb645-22"><a href="stand_ba.html#cb645-22" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb645-23"><a href="stand_ba.html#cb645-23" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb645-24"><a href="stand_ba.html#cb645-24" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb645-25"><a href="stand_ba.html#cb645-25" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb645-26"><a href="stand_ba.html#cb645-26" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb645-27"><a href="stand_ba.html#cb645-27" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb645-28"><a href="stand_ba.html#cb645-28" tabindex="-1"></a>    )</span>
<span id="cb645-29"><a href="stand_ba.html#cb645-29" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb645-30"><a href="stand_ba.html#cb645-30" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb645-31"><a href="stand_ba.html#cb645-31" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb645-32"><a href="stand_ba.html#cb645-32" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb645-33"><a href="stand_ba.html#cb645-33" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb645-34"><a href="stand_ba.html#cb645-34" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb645-35"><a href="stand_ba.html#cb645-35" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb645-36"><a href="stand_ba.html#cb645-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb645-37"><a href="stand_ba.html#cb645-37" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb645-38"><a href="stand_ba.html#cb645-38" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb645-39"><a href="stand_ba.html#cb645-39" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb645-40"><a href="stand_ba.html#cb645-40" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_basal_area_abs_pct_error<span class="sc">*</span>.<span class="dv">6</span>)</span>
<span id="cb645-41"><a href="stand_ba.html#cb645-41" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb645-42"><a href="stand_ba.html#cb645-42" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb645-43"><a href="stand_ba.html#cb645-43" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb645-44"><a href="stand_ba.html#cb645-44" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb645-45"><a href="stand_ba.html#cb645-45" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb645-46"><a href="stand_ba.html#cb645-46" tabindex="-1"></a>      <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.005</span>,lmt_basal_area_abs_pct_error<span class="sc">*</span><span class="fl">1.1</span>)</span>
<span id="cb645-47"><a href="stand_ba.html#cb645-47" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb645-48"><a href="stand_ba.html#cb645-48" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb645-49"><a href="stand_ba.html#cb645-49" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb645-50"><a href="stand_ba.html#cb645-50" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;BA Abs. % Error&quot;</span></span>
<span id="cb645-51"><a href="stand_ba.html#cb645-51" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of BA Abs. % Error with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb645-52"><a href="stand_ba.html#cb645-52" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb645-53"><a href="stand_ba.html#cb645-53" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb645-54"><a href="stand_ba.html#cb645-54" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb645-55"><a href="stand_ba.html#cb645-55" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb645-56"><a href="stand_ba.html#cb645-56" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb645-57"><a href="stand_ba.html#cb645-57" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb645-58"><a href="stand_ba.html#cb645-58" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb645-59"><a href="stand_ba.html#cb645-59" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-513-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb646"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb646-1"><a href="stand_ba.html#cb646-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb646-2"><a href="stand_ba.html#cb646-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb646-3"><a href="stand_ba.html#cb646-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb646-4"><a href="stand_ba.html#cb646-4" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb646-5"><a href="stand_ba.html#cb646-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb646-6"><a href="stand_ba.html#cb646-6" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb646-7"><a href="stand_ba.html#cb646-7" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb646-8"><a href="stand_ba.html#cb646-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb646-9"><a href="stand_ba.html#cb646-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span></span>
<span id="cb646-10"><a href="stand_ba.html#cb646-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb646-11"><a href="stand_ba.html#cb646-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb646-12"><a href="stand_ba.html#cb646-12" tabindex="-1"></a></span>
<span id="cb646-13"><a href="stand_ba.html#cb646-13" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb646-14"><a href="stand_ba.html#cb646-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb646-15"><a href="stand_ba.html#cb646-15" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb646-16"><a href="stand_ba.html#cb646-16" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb646-17"><a href="stand_ba.html#cb646-17" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;BA Abs. % Error&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb646-18"><a href="stand_ba.html#cb646-18" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb646-19"><a href="stand_ba.html#cb646-19" tabindex="-1"></a>      <span class="st">&quot;quality&quot;</span></span>
<span id="cb646-20"><a href="stand_ba.html#cb646-20" tabindex="-1"></a>      , <span class="st">&quot;BA Abs. % Error&lt;br&gt;median&quot;</span></span>
<span id="cb646-21"><a href="stand_ba.html#cb646-21" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb646-22"><a href="stand_ba.html#cb646-22" tabindex="-1"></a>    )</span>
<span id="cb646-23"><a href="stand_ba.html#cb646-23" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb646-24"><a href="stand_ba.html#cb646-24" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb646-25"><a href="stand_ba.html#cb646-25" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb646-26"><a href="stand_ba.html#cb646-26" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb646-27"><a href="stand_ba.html#cb646-27" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-514">Table 8.7: </span>BA Abs. % Error<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
BA Abs. % Error<br>median
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
14.8%
</td>
<td style="text-align:left;">
4.8%
</td>
<td style="text-align:left;">
28.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
16.4%
</td>
<td style="text-align:left;">
5.9%
</td>
<td style="text-align:left;">
31.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
19.1%
</td>
<td style="text-align:left;">
6.9%
</td>
<td style="text-align:left;">
37.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
27.0%
</td>
<td style="text-align:left;">
9.5%
</td>
<td style="text-align:left;">
51.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:left;">
46.0%
</td>
<td style="text-align:left;">
16.0%
</td>
<td style="text-align:left;">
89.2%
</td>
</tr>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
14.4%
</td>
<td style="text-align:left;">
4.8%
</td>
<td style="text-align:left;">
27.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
19.7%
</td>
<td style="text-align:left;">
6.8%
</td>
<td style="text-align:left;">
37.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
32.3%
</td>
<td style="text-align:left;">
11.4%
</td>
<td style="text-align:left;">
62.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
35.3%
</td>
<td style="text-align:left;">
12.7%
</td>
<td style="text-align:left;">
67.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:left;">
39.9%
</td>
<td style="text-align:left;">
13.3%
</td>
<td style="text-align:left;">
77.2%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
13.1%
</td>
<td style="text-align:left;">
4.0%
</td>
<td style="text-align:left;">
25.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
13.8%
</td>
<td style="text-align:left;">
4.2%
</td>
<td style="text-align:left;">
26.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
15.9%
</td>
<td style="text-align:left;">
5.2%
</td>
<td style="text-align:left;">
31.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
21.5%
</td>
<td style="text-align:left;">
6.3%
</td>
<td style="text-align:left;">
41.9%
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="stand_ba.html#cb647-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb647-2"><a href="stand_ba.html#cb647-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb647-3"><a href="stand_ba.html#cb647-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb647-4"><a href="stand_ba.html#cb647-4" tabindex="-1"></a>    value</span>
<span id="cb647-5"><a href="stand_ba.html#cb647-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_quality</span>
<span id="cb647-6"><a href="stand_ba.html#cb647-6" tabindex="-1"></a>    , <span class="at">comparison =</span> contrast_list</span>
<span id="cb647-7"><a href="stand_ba.html#cb647-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb647-8"><a href="stand_ba.html#cb647-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_quality)</span>
<span id="cb647-9"><a href="stand_ba.html#cb647-9" tabindex="-1"></a></span>
<span id="cb647-10"><a href="stand_ba.html#cb647-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb647-11"><a href="stand_ba.html#cb647-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb647-12"><a href="stand_ba.html#cb647-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb647-13"><a href="stand_ba.html#cb647-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb647-14"><a href="stand_ba.html#cb647-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb647-15"><a href="stand_ba.html#cb647-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb647-16"><a href="stand_ba.html#cb647-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb647-17"><a href="stand_ba.html#cb647-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb647-18"><a href="stand_ba.html#cb647-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb647-19"><a href="stand_ba.html#cb647-19" tabindex="-1"></a>    )</span>
<span id="cb647-20"><a href="stand_ba.html#cb647-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb647-21"><a href="stand_ba.html#cb647-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb647-22"><a href="stand_ba.html#cb647-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb647-23"><a href="stand_ba.html#cb647-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb647-24"><a href="stand_ba.html#cb647-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb647-25"><a href="stand_ba.html#cb647-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb647-26"><a href="stand_ba.html#cb647-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb647-27"><a href="stand_ba.html#cb647-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb647-28"><a href="stand_ba.html#cb647-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb647-29"><a href="stand_ba.html#cb647-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb647-30"><a href="stand_ba.html#cb647-30" tabindex="-1"></a>      )}</span>
<span id="cb647-31"><a href="stand_ba.html#cb647-31" tabindex="-1"></a>    )</span>
<span id="cb647-32"><a href="stand_ba.html#cb647-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb647-33"><a href="stand_ba.html#cb647-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb647-34"><a href="stand_ba.html#cb647-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb647-35"><a href="stand_ba.html#cb647-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb647-36"><a href="stand_ba.html#cb647-36" tabindex="-1"></a>      )</span>
<span id="cb647-37"><a href="stand_ba.html#cb647-37" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb647-38"><a href="stand_ba.html#cb647-38" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb647-39"><a href="stand_ba.html#cb647-39" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb647-40"><a href="stand_ba.html#cb647-40" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb647-41"><a href="stand_ba.html#cb647-41" tabindex="-1"></a></span>
<span id="cb647-42"><a href="stand_ba.html#cb647-42" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb647-43"><a href="stand_ba.html#cb647-43" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb647-44"><a href="stand_ba.html#cb647-44" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb647-45"><a href="stand_ba.html#cb647-45" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb647-46"><a href="stand_ba.html#cb647-46" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter1 <span class="sc">==</span> depth_maps_generation_quality)</span>
<span id="cb647-47"><a href="stand_ba.html#cb647-47" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb647-48"><a href="stand_ba.html#cb647-48" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb647-49"><a href="stand_ba.html#cb647-49" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb647-50"><a href="stand_ba.html#cb647-50" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter2 <span class="sc">==</span> depth_maps_generation_quality)</span>
<span id="cb647-51"><a href="stand_ba.html#cb647-51" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb648-1"><a href="stand_ba.html#cb648-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb648-2"><a href="stand_ba.html#cb648-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb648-3"><a href="stand_ba.html#cb648-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb648-4"><a href="stand_ba.html#cb648-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb648-5"><a href="stand_ba.html#cb648-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb648-6"><a href="stand_ba.html#cb648-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb648-7"><a href="stand_ba.html#cb648-7" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb648-8"><a href="stand_ba.html#cb648-8" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb648-9"><a href="stand_ba.html#cb648-9" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb648-10"><a href="stand_ba.html#cb648-10" tabindex="-1"></a>    , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">1.1</span>,<span class="fl">0.3</span>)</span>
<span id="cb648-11"><a href="stand_ba.html#cb648-11" tabindex="-1"></a>    , <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>,<span class="fl">0.5</span>)</span>
<span id="cb648-12"><a href="stand_ba.html#cb648-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb648-13"><a href="stand_ba.html#cb648-13" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb648-14"><a href="stand_ba.html#cb648-14" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by software&quot;</span></span>
<span id="cb648-15"><a href="stand_ba.html#cb648-15" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast BA Abs. % Error&quot;</span></span>
<span id="cb648-16"><a href="stand_ba.html#cb648-16" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-516-1.png" width="1008" /></p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="stand_ba.html#cb649-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb649-2"><a href="stand_ba.html#cb649-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_sftwr_comp_ba_ape.png&quot;</span></span>
<span id="cb649-3"><a href="stand_ba.html#cb649-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb649-4"><a href="stand_ba.html#cb649-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb649-5"><a href="stand_ba.html#cb649-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other APE contrasts for publication</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb650-1"><a href="stand_ba.html#cb650-1" tabindex="-1"></a>ptchwrk_qlty_sftwr_comp_ba_ape <span class="ot">=</span></span>
<span id="cb650-2"><a href="stand_ba.html#cb650-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb650-3"><a href="stand_ba.html#cb650-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb650-4"><a href="stand_ba.html#cb650-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb650-5"><a href="stand_ba.html#cb650-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb650-6"><a href="stand_ba.html#cb650-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.5</span></span>
<span id="cb650-7"><a href="stand_ba.html#cb650-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb650-8"><a href="stand_ba.html#cb650-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.6</span></span>
<span id="cb650-9"><a href="stand_ba.html#cb650-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb650-10"><a href="stand_ba.html#cb650-10" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb650-11"><a href="stand_ba.html#cb650-11" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span> <span class="co"># &quot;constrast BA Abs. % Error&quot;</span></span>
<span id="cb650-12"><a href="stand_ba.html#cb650-12" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;BA Abs. % Error constrast&quot;</span></span>
<span id="cb650-13"><a href="stand_ba.html#cb650-13" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb650-14"><a href="stand_ba.html#cb650-14" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb650-15"><a href="stand_ba.html#cb650-15" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span></span>
<span id="cb650-16"><a href="stand_ba.html#cb650-16" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb650-17"><a href="stand_ba.html#cb650-17" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb650-18"><a href="stand_ba.html#cb650-18" tabindex="-1"></a>    ) </span>
<span id="cb650-19"><a href="stand_ba.html#cb650-19" tabindex="-1"></a><span class="co"># ptchwrk_qlty_sftwr_comp_ba_ape</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="stand_ba.html#cb651-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb651-2"><a href="stand_ba.html#cb651-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb651-3"><a href="stand_ba.html#cb651-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb651-4"><a href="stand_ba.html#cb651-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb651-5"><a href="stand_ba.html#cb651-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, software, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb651-6"><a href="stand_ba.html#cb651-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, contrast) <span class="sc">%&gt;%</span> </span>
<span id="cb651-7"><a href="stand_ba.html#cb651-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb651-8"><a href="stand_ba.html#cb651-8" tabindex="-1"></a></span>
<span id="cb651-9"><a href="stand_ba.html#cb651-9" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb651-10"><a href="stand_ba.html#cb651-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb651-11"><a href="stand_ba.html#cb651-11" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb651-12"><a href="stand_ba.html#cb651-12" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb651-13"><a href="stand_ba.html#cb651-13" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;BA Abs. % Error&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb651-14"><a href="stand_ba.html#cb651-14" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb651-15"><a href="stand_ba.html#cb651-15" tabindex="-1"></a>      <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb651-16"><a href="stand_ba.html#cb651-16" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;BA Abs. % Error&quot;</span></span>
<span id="cb651-17"><a href="stand_ba.html#cb651-17" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb651-18"><a href="stand_ba.html#cb651-18" tabindex="-1"></a>    )</span>
<span id="cb651-19"><a href="stand_ba.html#cb651-19" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb651-20"><a href="stand_ba.html#cb651-20" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb651-21"><a href="stand_ba.html#cb651-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb651-22"><a href="stand_ba.html#cb651-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb651-23"><a href="stand_ba.html#cb651-23" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-518">Table 8.8: </span>BA Abs. % Error<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality contrast
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>BA Abs. % Error
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="10">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:left;">
-1.6%
</td>
<td style="text-align:left;">
-10.6%
</td>
<td style="text-align:left;">
6.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:left;">
-4.1%
</td>
<td style="text-align:left;">
-15.5%
</td>
<td style="text-align:left;">
5.4%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:left;">
-11.7%
</td>
<td style="text-align:left;">
-28.4%
</td>
<td style="text-align:left;">
-0.4%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - lowest
</td>
<td style="text-align:left;">
-30.7%
</td>
<td style="text-align:left;">
-63.6%
</td>
<td style="text-align:left;">
-7.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:left;">
-2.5%
</td>
<td style="text-align:left;">
-13.6%
</td>
<td style="text-align:left;">
7.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:left;">
-10.1%
</td>
<td style="text-align:left;">
-26.3%
</td>
<td style="text-align:left;">
1.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - lowest
</td>
<td style="text-align:left;">
-28.9%
</td>
<td style="text-align:left;">
-62.1%
</td>
<td style="text-align:left;">
-7.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:left;">
-7.3%
</td>
<td style="text-align:left;">
-23.1%
</td>
<td style="text-align:left;">
4.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - lowest
</td>
<td style="text-align:left;">
-26.1%
</td>
<td style="text-align:left;">
-57.9%
</td>
<td style="text-align:left;">
-4.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low - lowest
</td>
<td style="text-align:left;">
-18.2%
</td>
<td style="text-align:left;">
-46.4%
</td>
<td style="text-align:left;">
1.2%
</td>
</tr>
<tr grouplength="10">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:left;">
-5.0%
</td>
<td style="text-align:left;">
-16.8%
</td>
<td style="text-align:left;">
3.8%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:left;">
-17.4%
</td>
<td style="text-align:left;">
-39.6%
</td>
<td style="text-align:left;">
-2.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:left;">
-20.3%
</td>
<td style="text-align:left;">
-43.9%
</td>
<td style="text-align:left;">
-3.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - lowest
</td>
<td style="text-align:left;">
-25.2%
</td>
<td style="text-align:left;">
-53.2%
</td>
<td style="text-align:left;">
-5.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:left;">
-12.0%
</td>
<td style="text-align:left;">
-32.6%
</td>
<td style="text-align:left;">
1.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:left;">
-15.0%
</td>
<td style="text-align:left;">
-36.2%
</td>
<td style="text-align:left;">
-0.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - lowest
</td>
<td style="text-align:left;">
-19.6%
</td>
<td style="text-align:left;">
-45.7%
</td>
<td style="text-align:left;">
-1.4%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:left;">
-2.8%
</td>
<td style="text-align:left;">
-22.7%
</td>
<td style="text-align:left;">
15.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - lowest
</td>
<td style="text-align:left;">
-7.0%
</td>
<td style="text-align:left;">
-33.2%
</td>
<td style="text-align:left;">
15.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low - lowest
</td>
<td style="text-align:left;">
-4.5%
</td>
<td style="text-align:left;">
-28.7%
</td>
<td style="text-align:left;">
17.7%
</td>
</tr>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:left;">
-0.7%
</td>
<td style="text-align:left;">
-9.6%
</td>
<td style="text-align:left;">
7.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:left;">
-2.7%
</td>
<td style="text-align:left;">
-13.4%
</td>
<td style="text-align:left;">
6.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:left;">
-8.1%
</td>
<td style="text-align:left;">
-22.5%
</td>
<td style="text-align:left;">
2.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:left;">
-1.9%
</td>
<td style="text-align:left;">
-12.2%
</td>
<td style="text-align:left;">
7.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:left;">
-7.4%
</td>
<td style="text-align:left;">
-21.6%
</td>
<td style="text-align:left;">
2.9%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:left;">
-5.3%
</td>
<td style="text-align:left;">
-19.0%
</td>
<td style="text-align:left;">
5.3%
</td>
</tr>
</tbody>
</table>
</div>
<p>The contrasts above address the question “are there differences in APE based on dense point cloud generation quality within each software?”.</p>
<p>To address the different question of “are there differences in APE based on the processing software used at a given dense point cloud generation quality?” we need to utilize a different formulation of the <code>comparison</code> parameter within our call to the <code>tidybayes::compare_levels</code> function and calculate the contrast by <code>software</code> instead</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="stand_ba.html#cb652-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb652-2"><a href="stand_ba.html#cb652-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb652-3"><a href="stand_ba.html#cb652-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb652-4"><a href="stand_ba.html#cb652-4" tabindex="-1"></a>    value</span>
<span id="cb652-5"><a href="stand_ba.html#cb652-5" tabindex="-1"></a>    , <span class="at">by =</span> software</span>
<span id="cb652-6"><a href="stand_ba.html#cb652-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb652-7"><a href="stand_ba.html#cb652-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb652-8"><a href="stand_ba.html#cb652-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> software) <span class="sc">%&gt;%</span> </span>
<span id="cb652-9"><a href="stand_ba.html#cb652-9" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb652-10"><a href="stand_ba.html#cb652-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb652-11"><a href="stand_ba.html#cb652-11" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb652-12"><a href="stand_ba.html#cb652-12" tabindex="-1"></a></span>
<span id="cb652-13"><a href="stand_ba.html#cb652-13" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb652-14"><a href="stand_ba.html#cb652-14" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb652-15"><a href="stand_ba.html#cb652-15" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb652-16"><a href="stand_ba.html#cb652-16" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb652-17"><a href="stand_ba.html#cb652-17" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb652-18"><a href="stand_ba.html#cb652-18" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb652-19"><a href="stand_ba.html#cb652-19" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb652-20"><a href="stand_ba.html#cb652-20" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb652-21"><a href="stand_ba.html#cb652-21" tabindex="-1"></a>    )</span>
<span id="cb652-22"><a href="stand_ba.html#cb652-22" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb652-23"><a href="stand_ba.html#cb652-23" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb652-24"><a href="stand_ba.html#cb652-24" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb652-25"><a href="stand_ba.html#cb652-25" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb652-26"><a href="stand_ba.html#cb652-26" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb652-27"><a href="stand_ba.html#cb652-27" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb652-28"><a href="stand_ba.html#cb652-28" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(sorter1 <span class="sc">==</span> software, depth_maps_generation_quality)</span>
<span id="cb652-29"><a href="stand_ba.html#cb652-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb652-30"><a href="stand_ba.html#cb652-30" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb652-31"><a href="stand_ba.html#cb652-31" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb652-32"><a href="stand_ba.html#cb652-32" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(sorter2 <span class="sc">==</span> software, depth_maps_generation_quality)</span>
<span id="cb652-33"><a href="stand_ba.html#cb652-33" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="stand_ba.html#cb653-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb653-2"><a href="stand_ba.html#cb653-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb653-3"><a href="stand_ba.html#cb653-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb653-4"><a href="stand_ba.html#cb653-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb653-5"><a href="stand_ba.html#cb653-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_quality&quot;</span></span>
<span id="cb653-6"><a href="stand_ba.html#cb653-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb653-7"><a href="stand_ba.html#cb653-7" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb653-8"><a href="stand_ba.html#cb653-8" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb653-9"><a href="stand_ba.html#cb653-9" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb653-10"><a href="stand_ba.html#cb653-10" tabindex="-1"></a>    , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.7</span>,<span class="fl">0.6</span>)</span>
<span id="cb653-11"><a href="stand_ba.html#cb653-11" tabindex="-1"></a>    , <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="fl">0.6</span>,<span class="fl">0.6</span>,<span class="fl">0.3</span>)</span>
<span id="cb653-12"><a href="stand_ba.html#cb653-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb653-13"><a href="stand_ba.html#cb653-13" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(depth_maps_generation_quality), <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb653-14"><a href="stand_ba.html#cb653-14" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb653-15"><a href="stand_ba.html#cb653-15" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb653-16"><a href="stand_ba.html#cb653-16" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast BA Abs. % Error&quot;</span></span>
<span id="cb653-17"><a href="stand_ba.html#cb653-17" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb653-18"><a href="stand_ba.html#cb653-18" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb653-19"><a href="stand_ba.html#cb653-19" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">75</span>, .<span class="dv">13</span>)</span>
<span id="cb653-20"><a href="stand_ba.html#cb653-20" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb653-21"><a href="stand_ba.html#cb653-21" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb653-22"><a href="stand_ba.html#cb653-22" tabindex="-1"></a>    <span class="at">legend.key.width  =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb653-23"><a href="stand_ba.html#cb653-23" tabindex="-1"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="dv">7</span>, <span class="st">&quot;lines&quot;</span>)</span>
<span id="cb653-24"><a href="stand_ba.html#cb653-24" tabindex="-1"></a>  )))</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-520-1.png" width="1008" /></p>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="stand_ba.html#cb654-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb654-2"><a href="stand_ba.html#cb654-2" tabindex="-1"></a>  <span class="st">&quot;../data/sftwr_qlty_comp_ba_ape.png&quot;</span></span>
<span id="cb654-3"><a href="stand_ba.html#cb654-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb654-4"><a href="stand_ba.html#cb654-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb654-5"><a href="stand_ba.html#cb654-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other APE contrasts for publication</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="stand_ba.html#cb655-1" tabindex="-1"></a>ptchwrk_sftwr_qlty_comp_ba_ape <span class="ot">=</span></span>
<span id="cb655-2"><a href="stand_ba.html#cb655-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb655-3"><a href="stand_ba.html#cb655-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb655-4"><a href="stand_ba.html#cb655-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;software contrast&quot;</span></span>
<span id="cb655-5"><a href="stand_ba.html#cb655-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_quality&quot;</span></span>
<span id="cb655-6"><a href="stand_ba.html#cb655-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb655-7"><a href="stand_ba.html#cb655-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb655-8"><a href="stand_ba.html#cb655-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.8</span></span>
<span id="cb655-9"><a href="stand_ba.html#cb655-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb655-10"><a href="stand_ba.html#cb655-10" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(depth_maps_generation_quality), <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb655-11"><a href="stand_ba.html#cb655-11" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb655-12"><a href="stand_ba.html#cb655-12" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb655-13"><a href="stand_ba.html#cb655-13" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;BA Abs. % Error constrast&quot;</span></span>
<span id="cb655-14"><a href="stand_ba.html#cb655-14" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb655-15"><a href="stand_ba.html#cb655-15" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb655-16"><a href="stand_ba.html#cb655-16" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;inside&quot;</span></span>
<span id="cb655-17"><a href="stand_ba.html#cb655-17" tabindex="-1"></a>      , <span class="at">legend.position.inside =</span> <span class="fu">c</span>(.<span class="dv">8</span>, .<span class="dv">10</span>)</span>
<span id="cb655-18"><a href="stand_ba.html#cb655-18" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb655-19"><a href="stand_ba.html#cb655-19" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb655-20"><a href="stand_ba.html#cb655-20" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb655-21"><a href="stand_ba.html#cb655-21" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb655-22"><a href="stand_ba.html#cb655-22" tabindex="-1"></a>      <span class="at">legend.key.width  =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb655-23"><a href="stand_ba.html#cb655-23" tabindex="-1"></a>      <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="fl">6.5</span>, <span class="st">&quot;lines&quot;</span>)</span>
<span id="cb655-24"><a href="stand_ba.html#cb655-24" tabindex="-1"></a>    )))</span>
<span id="cb655-25"><a href="stand_ba.html#cb655-25" tabindex="-1"></a><span class="co"># ptchwrk_sftwr_qlty_comp_ba_ape</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb656-1"><a href="stand_ba.html#cb656-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb656-2"><a href="stand_ba.html#cb656-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb656-3"><a href="stand_ba.html#cb656-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb656-4"><a href="stand_ba.html#cb656-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb656-5"><a href="stand_ba.html#cb656-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, depth_maps_generation_quality, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb656-6"><a href="stand_ba.html#cb656-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb656-7"><a href="stand_ba.html#cb656-7" tabindex="-1"></a>  </span>
<span id="cb656-8"><a href="stand_ba.html#cb656-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb656-9"><a href="stand_ba.html#cb656-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(contrast)) <span class="sc">%&gt;%</span> </span>
<span id="cb656-10"><a href="stand_ba.html#cb656-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb656-11"><a href="stand_ba.html#cb656-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb656-12"><a href="stand_ba.html#cb656-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;BA Abs. % Error&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb656-13"><a href="stand_ba.html#cb656-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb656-14"><a href="stand_ba.html#cb656-14" tabindex="-1"></a>      <span class="st">&quot;quality&quot;</span></span>
<span id="cb656-15"><a href="stand_ba.html#cb656-15" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;BA Abs. % Error&quot;</span></span>
<span id="cb656-16"><a href="stand_ba.html#cb656-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb656-17"><a href="stand_ba.html#cb656-17" tabindex="-1"></a>    )</span>
<span id="cb656-18"><a href="stand_ba.html#cb656-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb656-19"><a href="stand_ba.html#cb656-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb656-20"><a href="stand_ba.html#cb656-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb656-21"><a href="stand_ba.html#cb656-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>contrast))) <span class="sc">%&gt;%</span> </span>
<span id="cb656-22"><a href="stand_ba.html#cb656-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-523">Table 8.9: </span>BA Abs. % Error<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>BA Abs. % Error
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP - METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
-0.3%
</td>
<td style="text-align:left;">
-9.5%
</td>
<td style="text-align:left;">
8.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
3.0%
</td>
<td style="text-align:left;">
-6.8%
</td>
<td style="text-align:left;">
14.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
12.5%
</td>
<td style="text-align:left;">
-1.9%
</td>
<td style="text-align:left;">
34.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
7.6%
</td>
<td style="text-align:left;">
-7.7%
</td>
<td style="text-align:left;">
29.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:left;">
-5.3%
</td>
<td style="text-align:left;">
-35.1%
</td>
<td style="text-align:left;">
18.6%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D - METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
-1.5%
</td>
<td style="text-align:left;">
-10.7%
</td>
<td style="text-align:left;">
7.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
-2.3%
</td>
<td style="text-align:left;">
-12.7%
</td>
<td style="text-align:left;">
6.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
-2.9%
</td>
<td style="text-align:left;">
-15.3%
</td>
<td style="text-align:left;">
7.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
-4.9%
</td>
<td style="text-align:left;">
-22.2%
</td>
<td style="text-align:left;">
9.4%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D - OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:left;">
-1.1%
</td>
<td style="text-align:left;">
-10.7%
</td>
<td style="text-align:left;">
8.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:left;">
-5.5%
</td>
<td style="text-align:left;">
-18.2%
</td>
<td style="text-align:left;">
4.4%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:left;">
-15.7%
</td>
<td style="text-align:left;">
-39.0%
</td>
<td style="text-align:left;">
-0.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:left;">
-12.9%
</td>
<td style="text-align:left;">
-36.4%
</td>
<td style="text-align:left;">
4.0%
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarefiltering---interaction-7" class="section level4 hasAnchor" number="8.3.2.5">
<h4><span class="header-section-number">8.3.2.5</span> Software:Filtering - interaction<a href="stand_ba.html#softwarefiltering---interaction-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="stand_ba.html#cb657-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb657-2"><a href="stand_ba.html#cb657-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb657-3"><a href="stand_ba.html#cb657-3" tabindex="-1"></a>    <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb657-4"><a href="stand_ba.html#cb657-4" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb657-5"><a href="stand_ba.html#cb657-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb657-6"><a href="stand_ba.html#cb657-6" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb657-7"><a href="stand_ba.html#cb657-7" tabindex="-1"></a>      brms_ba_ape_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb657-8"><a href="stand_ba.html#cb657-8" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb657-9"><a href="stand_ba.html#cb657-9" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb657-10"><a href="stand_ba.html#cb657-10" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb657-11"><a href="stand_ba.html#cb657-11" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb657-12"><a href="stand_ba.html#cb657-12" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb657-13"><a href="stand_ba.html#cb657-13" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb657-14"><a href="stand_ba.html#cb657-14" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb657-15"><a href="stand_ba.html#cb657-15" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb657-16"><a href="stand_ba.html#cb657-16" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb657-17"><a href="stand_ba.html#cb657-17" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb657-18"><a href="stand_ba.html#cb657-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb657-19"><a href="stand_ba.html#cb657-19" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_filtering_mode, software)</span>
<span id="cb657-20"><a href="stand_ba.html#cb657-20" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_filtering_mode, software)</span>
<span id="cb657-21"><a href="stand_ba.html#cb657-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb657-22"><a href="stand_ba.html#cb657-22" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb657-23"><a href="stand_ba.html#cb657-23" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb657-24"><a href="stand_ba.html#cb657-24" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb657-25"><a href="stand_ba.html#cb657-25" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb657-26"><a href="stand_ba.html#cb657-26" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb657-27"><a href="stand_ba.html#cb657-27" tabindex="-1"></a>    )</span>
<span id="cb657-28"><a href="stand_ba.html#cb657-28" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb657-29"><a href="stand_ba.html#cb657-29" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb657-30"><a href="stand_ba.html#cb657-30" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb657-31"><a href="stand_ba.html#cb657-31" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb657-32"><a href="stand_ba.html#cb657-32" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb657-33"><a href="stand_ba.html#cb657-33" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb657-34"><a href="stand_ba.html#cb657-34" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb657-35"><a href="stand_ba.html#cb657-35" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb657-36"><a href="stand_ba.html#cb657-36" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb657-37"><a href="stand_ba.html#cb657-37" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb657-38"><a href="stand_ba.html#cb657-38" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb657-39"><a href="stand_ba.html#cb657-39" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_basal_area_abs_pct_error<span class="sc">*</span>.<span class="dv">6</span>)</span>
<span id="cb657-40"><a href="stand_ba.html#cb657-40" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb657-41"><a href="stand_ba.html#cb657-41" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb657-42"><a href="stand_ba.html#cb657-42" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb657-43"><a href="stand_ba.html#cb657-43" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_filtering_mode)) <span class="sc">+</span></span>
<span id="cb657-44"><a href="stand_ba.html#cb657-44" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb657-45"><a href="stand_ba.html#cb657-45" tabindex="-1"></a>      <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.005</span>,lmt_basal_area_abs_pct_error<span class="sc">*</span><span class="fl">1.1</span>)</span>
<span id="cb657-46"><a href="stand_ba.html#cb657-46" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb657-47"><a href="stand_ba.html#cb657-47" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb657-48"><a href="stand_ba.html#cb657-48" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb657-49"><a href="stand_ba.html#cb657-49" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;BA Abs. % Error&quot;</span></span>
<span id="cb657-50"><a href="stand_ba.html#cb657-50" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of BA Abs. % Error with 95% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb657-51"><a href="stand_ba.html#cb657-51" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb657-52"><a href="stand_ba.html#cb657-52" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb657-53"><a href="stand_ba.html#cb657-53" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb657-54"><a href="stand_ba.html#cb657-54" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb657-55"><a href="stand_ba.html#cb657-55" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb657-56"><a href="stand_ba.html#cb657-56" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb657-57"><a href="stand_ba.html#cb657-57" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb657-58"><a href="stand_ba.html#cb657-58" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-524-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="stand_ba.html#cb658-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb658-2"><a href="stand_ba.html#cb658-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb658-3"><a href="stand_ba.html#cb658-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb658-4"><a href="stand_ba.html#cb658-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb658-5"><a href="stand_ba.html#cb658-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb658-6"><a href="stand_ba.html#cb658-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb658-7"><a href="stand_ba.html#cb658-7" tabindex="-1"></a></span>
<span id="cb658-8"><a href="stand_ba.html#cb658-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb658-9"><a href="stand_ba.html#cb658-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb658-10"><a href="stand_ba.html#cb658-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb658-11"><a href="stand_ba.html#cb658-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb658-12"><a href="stand_ba.html#cb658-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;BA Abs. % Error&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb658-13"><a href="stand_ba.html#cb658-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb658-14"><a href="stand_ba.html#cb658-14" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb658-15"><a href="stand_ba.html#cb658-15" tabindex="-1"></a>      , <span class="st">&quot;BA Abs. % Error&lt;br&gt;median&quot;</span></span>
<span id="cb658-16"><a href="stand_ba.html#cb658-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb658-17"><a href="stand_ba.html#cb658-17" tabindex="-1"></a>    )</span>
<span id="cb658-18"><a href="stand_ba.html#cb658-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb658-19"><a href="stand_ba.html#cb658-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb658-20"><a href="stand_ba.html#cb658-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb658-21"><a href="stand_ba.html#cb658-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb658-22"><a href="stand_ba.html#cb658-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-525">Table 8.10: </span>BA Abs. % Error<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
BA Abs. % Error<br>median
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
28.4%
</td>
<td style="text-align:left;">
6.6%
</td>
<td style="text-align:left;">
58.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
21.8%
</td>
<td style="text-align:left;">
5.3%
</td>
<td style="text-align:left;">
44.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
20.2%
</td>
<td style="text-align:left;">
4.8%
</td>
<td style="text-align:left;">
41.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
18.7%
</td>
<td style="text-align:left;">
4.4%
</td>
<td style="text-align:left;">
38.5%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
26.4%
</td>
<td style="text-align:left;">
6.4%
</td>
<td style="text-align:left;">
55.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
26.6%
</td>
<td style="text-align:left;">
6.1%
</td>
<td style="text-align:left;">
54.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
25.7%
</td>
<td style="text-align:left;">
6.9%
</td>
<td style="text-align:left;">
54.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
22.9%
</td>
<td style="text-align:left;">
5.7%
</td>
<td style="text-align:left;">
47.6%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:left;">
20.2%
</td>
<td style="text-align:left;">
3.8%
</td>
<td style="text-align:left;">
45.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:left;">
18.5%
</td>
<td style="text-align:left;">
4.9%
</td>
<td style="text-align:left;">
39.5%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:left;">
16.9%
</td>
<td style="text-align:left;">
4.4%
</td>
<td style="text-align:left;">
36.0%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:left;">
16.0%
</td>
<td style="text-align:left;">
3.8%
</td>
<td style="text-align:left;">
33.5%
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="stand_ba.html#cb659-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb659-2"><a href="stand_ba.html#cb659-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb659-3"><a href="stand_ba.html#cb659-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb659-4"><a href="stand_ba.html#cb659-4" tabindex="-1"></a>    value</span>
<span id="cb659-5"><a href="stand_ba.html#cb659-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_filtering_mode</span>
<span id="cb659-6"><a href="stand_ba.html#cb659-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb659-7"><a href="stand_ba.html#cb659-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb659-8"><a href="stand_ba.html#cb659-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_filtering_mode)</span>
<span id="cb659-9"><a href="stand_ba.html#cb659-9" tabindex="-1"></a></span>
<span id="cb659-10"><a href="stand_ba.html#cb659-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb659-11"><a href="stand_ba.html#cb659-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb659-12"><a href="stand_ba.html#cb659-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb659-13"><a href="stand_ba.html#cb659-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb659-14"><a href="stand_ba.html#cb659-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb659-15"><a href="stand_ba.html#cb659-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb659-16"><a href="stand_ba.html#cb659-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb659-17"><a href="stand_ba.html#cb659-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb659-18"><a href="stand_ba.html#cb659-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb659-19"><a href="stand_ba.html#cb659-19" tabindex="-1"></a>    )</span>
<span id="cb659-20"><a href="stand_ba.html#cb659-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb659-21"><a href="stand_ba.html#cb659-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb659-22"><a href="stand_ba.html#cb659-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb659-23"><a href="stand_ba.html#cb659-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb659-24"><a href="stand_ba.html#cb659-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb659-25"><a href="stand_ba.html#cb659-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb659-26"><a href="stand_ba.html#cb659-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb659-27"><a href="stand_ba.html#cb659-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb659-28"><a href="stand_ba.html#cb659-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb659-29"><a href="stand_ba.html#cb659-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb659-30"><a href="stand_ba.html#cb659-30" tabindex="-1"></a>      )}</span>
<span id="cb659-31"><a href="stand_ba.html#cb659-31" tabindex="-1"></a>    )</span>
<span id="cb659-32"><a href="stand_ba.html#cb659-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb659-33"><a href="stand_ba.html#cb659-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb659-34"><a href="stand_ba.html#cb659-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb659-35"><a href="stand_ba.html#cb659-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb659-36"><a href="stand_ba.html#cb659-36" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb659-37"><a href="stand_ba.html#cb659-37" tabindex="-1"></a>      <span class="co"># re order for filtering mode</span></span>
<span id="cb659-38"><a href="stand_ba.html#cb659-38" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb659-39"><a href="stand_ba.html#cb659-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb659-40"><a href="stand_ba.html#cb659-40" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb659-41"><a href="stand_ba.html#cb659-41" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb659-42"><a href="stand_ba.html#cb659-42" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb659-43"><a href="stand_ba.html#cb659-43" tabindex="-1"></a></span>
<span id="cb659-44"><a href="stand_ba.html#cb659-44" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb659-45"><a href="stand_ba.html#cb659-45" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb659-46"><a href="stand_ba.html#cb659-46" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb659-47"><a href="stand_ba.html#cb659-47" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_filtering_mode)</span>
<span id="cb659-48"><a href="stand_ba.html#cb659-48" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter1 <span class="sc">==</span> depth_maps_generation_filtering_mode)</span>
<span id="cb659-49"><a href="stand_ba.html#cb659-49" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb659-50"><a href="stand_ba.html#cb659-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb659-51"><a href="stand_ba.html#cb659-51" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_filtering_mode)</span>
<span id="cb659-52"><a href="stand_ba.html#cb659-52" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter2 <span class="sc">==</span> depth_maps_generation_filtering_mode)</span>
<span id="cb659-53"><a href="stand_ba.html#cb659-53" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="stand_ba.html#cb660-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb660-2"><a href="stand_ba.html#cb660-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb660-3"><a href="stand_ba.html#cb660-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb660-4"><a href="stand_ba.html#cb660-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb660-5"><a href="stand_ba.html#cb660-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb660-6"><a href="stand_ba.html#cb660-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.6</span></span>
<span id="cb660-7"><a href="stand_ba.html#cb660-7" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb660-8"><a href="stand_ba.html#cb660-8" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb660-9"><a href="stand_ba.html#cb660-9" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb660-10"><a href="stand_ba.html#cb660-10" tabindex="-1"></a>    , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.8</span>,<span class="fl">0.65</span>)</span>
<span id="cb660-11"><a href="stand_ba.html#cb660-11" tabindex="-1"></a>    , <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="fl">0.8</span>,<span class="fl">0.8</span>,<span class="fl">0.4</span>)</span>
<span id="cb660-12"><a href="stand_ba.html#cb660-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb660-13"><a href="stand_ba.html#cb660-13" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb660-14"><a href="stand_ba.html#cb660-14" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by software&quot;</span></span>
<span id="cb660-15"><a href="stand_ba.html#cb660-15" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast BA Abs. % Error&quot;</span></span>
<span id="cb660-16"><a href="stand_ba.html#cb660-16" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-527-1.png" width="1008" /></p>
<div class="sourceCode" id="cb661"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb661-1"><a href="stand_ba.html#cb661-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb661-2"><a href="stand_ba.html#cb661-2" tabindex="-1"></a>  <span class="st">&quot;../data/fltr_sftwr_comp_ba_ape.png&quot;</span></span>
<span id="cb661-3"><a href="stand_ba.html#cb661-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb661-4"><a href="stand_ba.html#cb661-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb661-5"><a href="stand_ba.html#cb661-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other APE contrasts for publication</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="stand_ba.html#cb662-1" tabindex="-1"></a>ptchwrk_fltr_sftwr_comp_ba_ape <span class="ot">=</span></span>
<span id="cb662-2"><a href="stand_ba.html#cb662-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb662-3"><a href="stand_ba.html#cb662-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb662-4"><a href="stand_ba.html#cb662-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode contrast&quot;</span></span>
<span id="cb662-5"><a href="stand_ba.html#cb662-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb662-6"><a href="stand_ba.html#cb662-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb662-7"><a href="stand_ba.html#cb662-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb662-8"><a href="stand_ba.html#cb662-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.6</span></span>
<span id="cb662-9"><a href="stand_ba.html#cb662-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb662-10"><a href="stand_ba.html#cb662-10" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb662-11"><a href="stand_ba.html#cb662-11" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span> <span class="co"># &quot;constrast BA Abs. % Error&quot;</span></span>
<span id="cb662-12"><a href="stand_ba.html#cb662-12" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;BA Abs. % Error constrast&quot;</span></span>
<span id="cb662-13"><a href="stand_ba.html#cb662-13" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb662-14"><a href="stand_ba.html#cb662-14" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb662-15"><a href="stand_ba.html#cb662-15" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span></span>
<span id="cb662-16"><a href="stand_ba.html#cb662-16" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb662-17"><a href="stand_ba.html#cb662-17" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb662-18"><a href="stand_ba.html#cb662-18" tabindex="-1"></a>    ) </span>
<span id="cb662-19"><a href="stand_ba.html#cb662-19" tabindex="-1"></a><span class="co"># ptchwrk_fltr_sftwr_comp_ba_ape</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="stand_ba.html#cb663-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb663-2"><a href="stand_ba.html#cb663-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb663-3"><a href="stand_ba.html#cb663-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb663-4"><a href="stand_ba.html#cb663-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb663-5"><a href="stand_ba.html#cb663-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, software, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb663-6"><a href="stand_ba.html#cb663-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, contrast) <span class="sc">%&gt;%</span> </span>
<span id="cb663-7"><a href="stand_ba.html#cb663-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb663-8"><a href="stand_ba.html#cb663-8" tabindex="-1"></a></span>
<span id="cb663-9"><a href="stand_ba.html#cb663-9" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb663-10"><a href="stand_ba.html#cb663-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb663-11"><a href="stand_ba.html#cb663-11" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb663-12"><a href="stand_ba.html#cb663-12" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb663-13"><a href="stand_ba.html#cb663-13" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;BA Abs. % Error&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb663-14"><a href="stand_ba.html#cb663-14" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb663-15"><a href="stand_ba.html#cb663-15" tabindex="-1"></a>      <span class="st">&quot;filtering contrast&quot;</span></span>
<span id="cb663-16"><a href="stand_ba.html#cb663-16" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;BA Abs. % Error&quot;</span></span>
<span id="cb663-17"><a href="stand_ba.html#cb663-17" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb663-18"><a href="stand_ba.html#cb663-18" tabindex="-1"></a>    )</span>
<span id="cb663-19"><a href="stand_ba.html#cb663-19" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb663-20"><a href="stand_ba.html#cb663-20" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb663-21"><a href="stand_ba.html#cb663-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb663-22"><a href="stand_ba.html#cb663-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb663-23"><a href="stand_ba.html#cb663-23" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-529">Table 8.11: </span>BA Abs. % Error<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering contrast
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>BA Abs. % Error
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:left;">
-1.2%
</td>
<td style="text-align:left;">
-10.7%
</td>
<td style="text-align:left;">
6.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:left;">
-2.6%
</td>
<td style="text-align:left;">
-13.5%
</td>
<td style="text-align:left;">
5.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - aggressive
</td>
<td style="text-align:left;">
-8.9%
</td>
<td style="text-align:left;">
-27.2%
</td>
<td style="text-align:left;">
1.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:left;">
-1.3%
</td>
<td style="text-align:left;">
-11.4%
</td>
<td style="text-align:left;">
7.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - aggressive
</td>
<td style="text-align:left;">
-7.4%
</td>
<td style="text-align:left;">
-24.8%
</td>
<td style="text-align:left;">
2.6%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate - aggressive
</td>
<td style="text-align:left;">
-5.8%
</td>
<td style="text-align:left;">
-22.8%
</td>
<td style="text-align:left;">
4.0%
</td>
</tr>
<tr grouplength="7">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:left;">
-2.4%
</td>
<td style="text-align:left;">
-15.0%
</td>
<td style="text-align:left;">
7.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:left;">
-3.2%
</td>
<td style="text-align:left;">
-17.0%
</td>
<td style="text-align:left;">
6.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - aggressive
</td>
<td style="text-align:left;">
-3.2%
</td>
<td style="text-align:left;">
-17.8%
</td>
<td style="text-align:left;">
8.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:left;">
-0.7%
</td>
<td style="text-align:left;">
-13.0%
</td>
<td style="text-align:left;">
10.3%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - aggressive
</td>
<td style="text-align:left;">
-0.7%
</td>
<td style="text-align:left;">
-15.2%
</td>
<td style="text-align:left;">
12.1%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - aggressive
</td>
<td style="text-align:left;">
-0.7%
</td>
<td style="text-align:left;">
12.3%
</td>
<td style="text-align:left;">
12.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate - aggressive
</td>
<td style="text-align:left;">
0.0%
</td>
<td style="text-align:left;">
-14.0%
</td>
<td style="text-align:left;">
12.8%
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:left;">
-0.9%
</td>
<td style="text-align:left;">
-9.2%
</td>
<td style="text-align:left;">
6.7%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:left;">
-2.3%
</td>
<td style="text-align:left;">
-11.9%
</td>
<td style="text-align:left;">
5.2%
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:left;">
-1.3%
</td>
<td style="text-align:left;">
-10.5%
</td>
<td style="text-align:left;">
6.6%
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequalityfiltering---interaction-7" class="section level4 hasAnchor" number="8.3.2.6">
<h4><span class="header-section-number">8.3.2.6</span> Software:Quality:Filtering - interaction<a href="stand_ba.html#softwarequalityfiltering---interaction-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="stand_ba.html#cb664-1" tabindex="-1"></a><span class="co"># get draws</span></span>
<span id="cb664-2"><a href="stand_ba.html#cb664-2" tabindex="-1"></a>fltr_sftwr_draws_temp <span class="ot">=</span></span>
<span id="cb664-3"><a href="stand_ba.html#cb664-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb664-4"><a href="stand_ba.html#cb664-4" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb664-5"><a href="stand_ba.html#cb664-5" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb664-6"><a href="stand_ba.html#cb664-6" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb664-7"><a href="stand_ba.html#cb664-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb664-8"><a href="stand_ba.html#cb664-8" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb664-9"><a href="stand_ba.html#cb664-9" tabindex="-1"></a>    brms_ba_ape_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb664-10"><a href="stand_ba.html#cb664-10" tabindex="-1"></a>    <span class="co"># this part is crucial</span></span>
<span id="cb664-11"><a href="stand_ba.html#cb664-11" tabindex="-1"></a>    , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span> <span class="co"># main effects</span></span>
<span id="cb664-12"><a href="stand_ba.html#cb664-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb664-13"><a href="stand_ba.html#cb664-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb664-14"><a href="stand_ba.html#cb664-14" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb664-15"><a href="stand_ba.html#cb664-15" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb664-16"><a href="stand_ba.html#cb664-16" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb664-17"><a href="stand_ba.html#cb664-17" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb664-18"><a href="stand_ba.html#cb664-18" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb664-19"><a href="stand_ba.html#cb664-19" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb664-20"><a href="stand_ba.html#cb664-20" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb664-21"><a href="stand_ba.html#cb664-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb664-22"><a href="stand_ba.html#cb664-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb664-23"><a href="stand_ba.html#cb664-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb664-24"><a href="stand_ba.html#cb664-24" tabindex="-1"></a></span>
<span id="cb664-25"><a href="stand_ba.html#cb664-25" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb664-26"><a href="stand_ba.html#cb664-26" tabindex="-1"></a>qlty_fltr_sftwr_ba_ape <span class="ot">=</span></span>
<span id="cb664-27"><a href="stand_ba.html#cb664-27" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb664-28"><a href="stand_ba.html#cb664-28" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb664-29"><a href="stand_ba.html#cb664-29" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb664-30"><a href="stand_ba.html#cb664-30" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb664-31"><a href="stand_ba.html#cb664-31" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb664-32"><a href="stand_ba.html#cb664-32" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb664-33"><a href="stand_ba.html#cb664-33" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb664-34"><a href="stand_ba.html#cb664-34" tabindex="-1"></a>      <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb664-35"><a href="stand_ba.html#cb664-35" tabindex="-1"></a>        <span class="at">y =</span> value</span>
<span id="cb664-36"><a href="stand_ba.html#cb664-36" tabindex="-1"></a>        , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb664-37"><a href="stand_ba.html#cb664-37" tabindex="-1"></a>        , <span class="at">fill =</span> med</span>
<span id="cb664-38"><a href="stand_ba.html#cb664-38" tabindex="-1"></a>      )</span>
<span id="cb664-39"><a href="stand_ba.html#cb664-39" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb664-40"><a href="stand_ba.html#cb664-40" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb664-41"><a href="stand_ba.html#cb664-41" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb664-42"><a href="stand_ba.html#cb664-42" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb664-43"><a href="stand_ba.html#cb664-43" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb664-44"><a href="stand_ba.html#cb664-44" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb664-45"><a href="stand_ba.html#cb664-45" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb664-46"><a href="stand_ba.html#cb664-46" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb664-47"><a href="stand_ba.html#cb664-47" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb664-48"><a href="stand_ba.html#cb664-48" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb664-49"><a href="stand_ba.html#cb664-49" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb664-50"><a href="stand_ba.html#cb664-50" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_basal_area_abs_pct_error<span class="sc">*</span>.<span class="dv">6</span>)</span>
<span id="cb664-51"><a href="stand_ba.html#cb664-51" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb664-52"><a href="stand_ba.html#cb664-52" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb664-53"><a href="stand_ba.html#cb664-53" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb664-54"><a href="stand_ba.html#cb664-54" tabindex="-1"></a>    <span class="fu">facet_grid</span>(</span>
<span id="cb664-55"><a href="stand_ba.html#cb664-55" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb664-56"><a href="stand_ba.html#cb664-56" tabindex="-1"></a>      , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb664-57"><a href="stand_ba.html#cb664-57" tabindex="-1"></a>      <span class="co"># , switch = &quot;y&quot;</span></span>
<span id="cb664-58"><a href="stand_ba.html#cb664-58" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb664-59"><a href="stand_ba.html#cb664-59" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb664-60"><a href="stand_ba.html#cb664-60" tabindex="-1"></a>      <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.005</span>,lmt_basal_area_abs_pct_error<span class="sc">*</span><span class="fl">1.45</span>)</span>
<span id="cb664-61"><a href="stand_ba.html#cb664-61" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb664-62"><a href="stand_ba.html#cb664-62" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb664-63"><a href="stand_ba.html#cb664-63" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb664-64"><a href="stand_ba.html#cb664-64" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;BA Abs. % Error&quot;</span></span>
<span id="cb664-65"><a href="stand_ba.html#cb664-65" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of BA Abs. % Error with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb664-66"><a href="stand_ba.html#cb664-66" tabindex="-1"></a>      <span class="co"># , caption = form_temp</span></span>
<span id="cb664-67"><a href="stand_ba.html#cb664-67" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb664-68"><a href="stand_ba.html#cb664-68" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb664-69"><a href="stand_ba.html#cb664-69" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb664-70"><a href="stand_ba.html#cb664-70" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb664-71"><a href="stand_ba.html#cb664-71" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb664-72"><a href="stand_ba.html#cb664-72" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb664-73"><a href="stand_ba.html#cb664-73" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb664-74"><a href="stand_ba.html#cb664-74" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb664-75"><a href="stand_ba.html#cb664-75" tabindex="-1"></a>      <span class="co"># , strip.placement = &quot;outside&quot;</span></span>
<span id="cb664-76"><a href="stand_ba.html#cb664-76" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb664-77"><a href="stand_ba.html#cb664-77" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb664-78"><a href="stand_ba.html#cb664-78" tabindex="-1"></a>      <span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">lwd =</span> <span class="cn">NA</span>))</span>
<span id="cb664-79"><a href="stand_ba.html#cb664-79" tabindex="-1"></a>    )</span>
<span id="cb664-80"><a href="stand_ba.html#cb664-80" tabindex="-1"></a><span class="co"># print it</span></span>
<span id="cb664-81"><a href="stand_ba.html#cb664-81" tabindex="-1"></a>qlty_fltr_sftwr_ba_ape</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-530-1.png" width="1008" /></p>
<div class="sourceCode" id="cb665"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb665-1"><a href="stand_ba.html#cb665-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_ba_ape.png&quot;</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span>)</span></code></pre></div>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="stand_ba.html#cb666-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb666-2"><a href="stand_ba.html#cb666-2" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb666-3"><a href="stand_ba.html#cb666-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb666-4"><a href="stand_ba.html#cb666-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb666-5"><a href="stand_ba.html#cb666-5" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb666-6"><a href="stand_ba.html#cb666-6" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb666-7"><a href="stand_ba.html#cb666-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb666-8"><a href="stand_ba.html#cb666-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb666-9"><a href="stand_ba.html#cb666-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(</span>
<span id="cb666-10"><a href="stand_ba.html#cb666-10" tabindex="-1"></a>    software, depth_maps_generation_quality, depth_maps_generation_filtering_mode</span>
<span id="cb666-11"><a href="stand_ba.html#cb666-11" tabindex="-1"></a>    , value, .lower, .upper</span>
<span id="cb666-12"><a href="stand_ba.html#cb666-12" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb666-13"><a href="stand_ba.html#cb666-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb666-14"><a href="stand_ba.html#cb666-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb666-15"><a href="stand_ba.html#cb666-15" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.cols =</span> is.numeric, <span class="at">.fns =</span> <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">percent</span>(.x,<span class="at">accuracy =</span> <span class="fl">0.1</span>)))</span>
<span id="cb666-16"><a href="stand_ba.html#cb666-16" tabindex="-1"></a></span>
<span id="cb666-17"><a href="stand_ba.html#cb666-17" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb666-18"><a href="stand_ba.html#cb666-18" tabindex="-1"></a>  <span class="co"># dplyr::select(-c(software)) %&gt;% </span></span>
<span id="cb666-19"><a href="stand_ba.html#cb666-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb666-20"><a href="stand_ba.html#cb666-20" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb666-21"><a href="stand_ba.html#cb666-21" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;BA Abs. % Error&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb666-22"><a href="stand_ba.html#cb666-22" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb666-23"><a href="stand_ba.html#cb666-23" tabindex="-1"></a>      <span class="st">&quot;software&quot;</span>, <span class="st">&quot;quality&quot;</span>, <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb666-24"><a href="stand_ba.html#cb666-24" tabindex="-1"></a>      , <span class="st">&quot;BA Abs. % Error&lt;br&gt;median&quot;</span></span>
<span id="cb666-25"><a href="stand_ba.html#cb666-25" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb666-26"><a href="stand_ba.html#cb666-26" tabindex="-1"></a>    )</span>
<span id="cb666-27"><a href="stand_ba.html#cb666-27" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb666-28"><a href="stand_ba.html#cb666-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb666-29"><a href="stand_ba.html#cb666-29" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb666-30"><a href="stand_ba.html#cb666-30" tabindex="-1"></a>  <span class="co"># kableExtra::pack_rows(index = table(forcats::fct_inorder(table_temp$software))) %&gt;% </span></span>
<span id="cb666-31"><a href="stand_ba.html#cb666-31" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb666-32"><a href="stand_ba.html#cb666-32" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-531">Table 8.12: </span>BA Abs. % Error<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
software
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
BA Abs. % Error<br>median
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
METASHAPE
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
61.6%
</td>
<td style="text-align:left;">
23.1%
</td>
<td style="text-align:left;">
116.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
47.8%
</td>
<td style="text-align:left;">
18.4%
</td>
<td style="text-align:left;">
88.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
42.5%
</td>
<td style="text-align:left;">
16.8%
</td>
<td style="text-align:left;">
79.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
39.5%
</td>
<td style="text-align:left;">
14.9%
</td>
<td style="text-align:left;">
73.9%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
37.9%
</td>
<td style="text-align:left;">
14.5%
</td>
<td style="text-align:left;">
70.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
27.4%
</td>
<td style="text-align:left;">
11.1%
</td>
<td style="text-align:left;">
50.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
24.3%
</td>
<td style="text-align:left;">
9.2%
</td>
<td style="text-align:left;">
45.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
22.0%
</td>
<td style="text-align:left;">
7.9%
</td>
<td style="text-align:left;">
40.9%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
26.2%
</td>
<td style="text-align:left;">
10.0%
</td>
<td style="text-align:left;">
48.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
18.7%
</td>
<td style="text-align:left;">
7.3%
</td>
<td style="text-align:left;">
35.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
17.3%
</td>
<td style="text-align:left;">
6.4%
</td>
<td style="text-align:left;">
32.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
16.1%
</td>
<td style="text-align:left;">
5.9%
</td>
<td style="text-align:left;">
30.2%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
21.1%
</td>
<td style="text-align:left;">
7.9%
</td>
<td style="text-align:left;">
39.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
16.0%
</td>
<td style="text-align:left;">
6.4%
</td>
<td style="text-align:left;">
30.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
15.3%
</td>
<td style="text-align:left;">
5.8%
</td>
<td style="text-align:left;">
28.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
14.5%
</td>
<td style="text-align:left;">
5.6%
</td>
<td style="text-align:left;">
26.9%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
18.6%
</td>
<td style="text-align:left;">
6.9%
</td>
<td style="text-align:left;">
35.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
14.6%
</td>
<td style="text-align:left;">
5.7%
</td>
<td style="text-align:left;">
27.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
14.1%
</td>
<td style="text-align:left;">
5.5%
</td>
<td style="text-align:left;">
26.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
12.8%
</td>
<td style="text-align:left;">
4.9%
</td>
<td style="text-align:left;">
23.6%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
OPENDRONEMAP
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
43.0%
</td>
<td style="text-align:left;">
15.5%
</td>
<td style="text-align:left;">
80.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
43.5%
</td>
<td style="text-align:left;">
16.6%
</td>
<td style="text-align:left;">
81.5%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
41.5%
</td>
<td style="text-align:left;">
15.7%
</td>
<td style="text-align:left;">
77.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
36.9%
</td>
<td style="text-align:left;">
14.8%
</td>
<td style="text-align:left;">
69.9%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
39.4%
</td>
<td style="text-align:left;">
16.3%
</td>
<td style="text-align:left;">
75.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
38.7%
</td>
<td style="text-align:left;">
14.9%
</td>
<td style="text-align:left;">
71.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
36.3%
</td>
<td style="text-align:left;">
14.8%
</td>
<td style="text-align:left;">
67.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
31.9%
</td>
<td style="text-align:left;">
12.5%
</td>
<td style="text-align:left;">
59.1%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
35.8%
</td>
<td style="text-align:left;">
14.0%
</td>
<td style="text-align:left;">
68.3%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
34.9%
</td>
<td style="text-align:left;">
13.3%
</td>
<td style="text-align:left;">
65.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
33.8%
</td>
<td style="text-align:left;">
13.3%
</td>
<td style="text-align:left;">
63.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
30.1%
</td>
<td style="text-align:left;">
11.9%
</td>
<td style="text-align:left;">
56.1%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
20.5%
</td>
<td style="text-align:left;">
7.7%
</td>
<td style="text-align:left;">
38.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
21.0%
</td>
<td style="text-align:left;">
8.1%
</td>
<td style="text-align:left;">
38.9%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
20.7%
</td>
<td style="text-align:left;">
8.1%
</td>
<td style="text-align:left;">
38.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
18.5%
</td>
<td style="text-align:left;">
7.2%
</td>
<td style="text-align:left;">
34.2%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:left;">
14.8%
</td>
<td style="text-align:left;">
5.6%
</td>
<td style="text-align:left;">
28.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
15.5%
</td>
<td style="text-align:left;">
6.2%
</td>
<td style="text-align:left;">
29.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
15.2%
</td>
<td style="text-align:left;">
5.8%
</td>
<td style="text-align:left;">
28.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
12.9%
</td>
<td style="text-align:left;">
4.7%
</td>
<td style="text-align:left;">
24.4%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
PIX4D
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
23.0%
</td>
<td style="text-align:left;">
9.2%
</td>
<td style="text-align:left;">
43.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
20.0%
</td>
<td style="text-align:left;">
7.4%
</td>
<td style="text-align:left;">
37.4%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
18.1%
</td>
<td style="text-align:left;">
6.6%
</td>
<td style="text-align:left;">
34.4%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
16.1%
</td>
<td style="text-align:left;">
6.2%
</td>
<td style="text-align:left;">
31.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
14.7%
</td>
<td style="text-align:left;">
5.5%
</td>
<td style="text-align:left;">
28.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
13.9%
</td>
<td style="text-align:left;">
5.3%
</td>
<td style="text-align:left;">
26.5%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
14.0%
</td>
<td style="text-align:left;">
5.2%
</td>
<td style="text-align:left;">
26.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
13.1%
</td>
<td style="text-align:left;">
5.2%
</td>
<td style="text-align:left;">
24.6%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
12.6%
</td>
<td style="text-align:left;">
5.0%
</td>
<td style="text-align:left;">
23.6%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
ultra high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:left;">
13.5%
</td>
<td style="text-align:left;">
4.8%
</td>
<td style="text-align:left;">
25.2%
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:left;">
12.7%
</td>
<td style="text-align:left;">
4.7%
</td>
<td style="text-align:left;">
23.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:left;">
11.7%
</td>
<td style="text-align:left;">
4.3%
</td>
<td style="text-align:left;">
21.8%
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="stand_ba.html#cb667-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb667-2"><a href="stand_ba.html#cb667-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb667-3"><a href="stand_ba.html#cb667-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb667-4"><a href="stand_ba.html#cb667-4" tabindex="-1"></a>    value</span>
<span id="cb667-5"><a href="stand_ba.html#cb667-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_filtering_mode</span>
<span id="cb667-6"><a href="stand_ba.html#cb667-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb667-7"><a href="stand_ba.html#cb667-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb667-8"><a href="stand_ba.html#cb667-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_filtering_mode)</span>
<span id="cb667-9"><a href="stand_ba.html#cb667-9" tabindex="-1"></a></span>
<span id="cb667-10"><a href="stand_ba.html#cb667-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb667-11"><a href="stand_ba.html#cb667-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb667-12"><a href="stand_ba.html#cb667-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb667-13"><a href="stand_ba.html#cb667-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb667-14"><a href="stand_ba.html#cb667-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb667-15"><a href="stand_ba.html#cb667-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb667-16"><a href="stand_ba.html#cb667-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb667-17"><a href="stand_ba.html#cb667-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb667-18"><a href="stand_ba.html#cb667-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb667-19"><a href="stand_ba.html#cb667-19" tabindex="-1"></a>    )</span>
<span id="cb667-20"><a href="stand_ba.html#cb667-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb667-21"><a href="stand_ba.html#cb667-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb667-22"><a href="stand_ba.html#cb667-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb667-23"><a href="stand_ba.html#cb667-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb667-24"><a href="stand_ba.html#cb667-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb667-25"><a href="stand_ba.html#cb667-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb667-26"><a href="stand_ba.html#cb667-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb667-27"><a href="stand_ba.html#cb667-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb667-28"><a href="stand_ba.html#cb667-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb667-29"><a href="stand_ba.html#cb667-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb667-30"><a href="stand_ba.html#cb667-30" tabindex="-1"></a>      )}</span>
<span id="cb667-31"><a href="stand_ba.html#cb667-31" tabindex="-1"></a>    )</span>
<span id="cb667-32"><a href="stand_ba.html#cb667-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb667-33"><a href="stand_ba.html#cb667-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb667-34"><a href="stand_ba.html#cb667-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb667-35"><a href="stand_ba.html#cb667-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb667-36"><a href="stand_ba.html#cb667-36" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb667-37"><a href="stand_ba.html#cb667-37" tabindex="-1"></a>      <span class="co"># re order for filtering mode</span></span>
<span id="cb667-38"><a href="stand_ba.html#cb667-38" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb667-39"><a href="stand_ba.html#cb667-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb667-40"><a href="stand_ba.html#cb667-40" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb667-41"><a href="stand_ba.html#cb667-41" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb667-42"><a href="stand_ba.html#cb667-42" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb667-43"><a href="stand_ba.html#cb667-43" tabindex="-1"></a></span>
<span id="cb667-44"><a href="stand_ba.html#cb667-44" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb667-45"><a href="stand_ba.html#cb667-45" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb667-46"><a href="stand_ba.html#cb667-46" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb667-47"><a href="stand_ba.html#cb667-47" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb667-48"><a href="stand_ba.html#cb667-48" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, sorter1<span class="sc">==</span>depth_maps_generation_filtering_mode)</span>
<span id="cb667-49"><a href="stand_ba.html#cb667-49" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb667-50"><a href="stand_ba.html#cb667-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb667-51"><a href="stand_ba.html#cb667-51" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb667-52"><a href="stand_ba.html#cb667-52" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, sorter2<span class="sc">==</span>depth_maps_generation_filtering_mode)</span>
<span id="cb667-53"><a href="stand_ba.html#cb667-53" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb667-54"><a href="stand_ba.html#cb667-54" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>())</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="stand_ba.html#cb668-1" tabindex="-1"></a>brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb668-2"><a href="stand_ba.html#cb668-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb668-3"><a href="stand_ba.html#cb668-3" tabindex="-1"></a>    <span class="at">facet =</span> <span class="fu">c</span>(<span class="st">&quot;depth_maps_generation_quality&quot;</span>, <span class="st">&quot;software&quot;</span>)</span>
<span id="cb668-4"><a href="stand_ba.html#cb668-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb668-5"><a href="stand_ba.html#cb668-5" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="dv">0</span></span>
<span id="cb668-6"><a href="stand_ba.html#cb668-6" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb668-7"><a href="stand_ba.html#cb668-7" tabindex="-1"></a>  <span class="fu">facet_grid</span>(</span>
<span id="cb668-8"><a href="stand_ba.html#cb668-8" tabindex="-1"></a>    <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb668-9"><a href="stand_ba.html#cb668-9" tabindex="-1"></a>    , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb668-10"><a href="stand_ba.html#cb668-10" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb668-11"><a href="stand_ba.html#cb668-11" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb668-12"><a href="stand_ba.html#cb668-12" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb668-13"><a href="stand_ba.html#cb668-13" tabindex="-1"></a>    , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.8</span>,<span class="fl">0.4</span>)</span>
<span id="cb668-14"><a href="stand_ba.html#cb668-14" tabindex="-1"></a>    , <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="fl">0.8</span>,<span class="fl">0.8</span>,<span class="fl">0.4</span>)</span>
<span id="cb668-15"><a href="stand_ba.html#cb668-15" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb668-16"><a href="stand_ba.html#cb668-16" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb668-17"><a href="stand_ba.html#cb668-17" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb668-18"><a href="stand_ba.html#cb668-18" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast BA Abs. % Error&quot;</span></span>
<span id="cb668-19"><a href="stand_ba.html#cb668-19" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-533-1.png" width="1008" /></p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="stand_ba.html#cb669-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb669-2"><a href="stand_ba.html#cb669-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_fltr_sftwr_comp_ba_ape.png&quot;</span></span>
<span id="cb669-3"><a href="stand_ba.html#cb669-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb669-4"><a href="stand_ba.html#cb669-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb669-5"><a href="stand_ba.html#cb669-5" tabindex="-1"></a>)</span></code></pre></div>
<p>Export some final images for publication</p>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="stand_ba.html#cb670-1" tabindex="-1"></a>p1_temp <span class="ot">=</span> qlty_fltr_sftwr_ba_pe <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;A: Basal Area % Error&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>))</span>
<span id="cb670-2"><a href="stand_ba.html#cb670-2" tabindex="-1"></a>p2_temp <span class="ot">=</span> qlty_fltr_sftwr_ba_ape <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;B: Basal Area Abs. % Error&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>))</span>
<span id="cb670-3"><a href="stand_ba.html#cb670-3" tabindex="-1"></a><span class="co"># export</span></span>
<span id="cb670-4"><a href="stand_ba.html#cb670-4" tabindex="-1"></a>p1_temp <span class="sc">/</span> p2_temp</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-534-1.png" width="1008" /></p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="stand_ba.html#cb671-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb671-2"><a href="stand_ba.html#cb671-2" tabindex="-1"></a>    <span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_ba_comb.jpeg&quot;</span>)</span>
<span id="cb671-3"><a href="stand_ba.html#cb671-3" tabindex="-1"></a>    , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>()</span>
<span id="cb671-4"><a href="stand_ba.html#cb671-4" tabindex="-1"></a>    , <span class="at">width =</span> <span class="fl">8.5</span></span>
<span id="cb671-5"><a href="stand_ba.html#cb671-5" tabindex="-1"></a>    , <span class="at">height =</span> <span class="dv">11</span></span>
<span id="cb671-6"><a href="stand_ba.html#cb671-6" tabindex="-1"></a>    , <span class="at">units =</span> <span class="st">&quot;in&quot;</span></span>
<span id="cb671-7"><a href="stand_ba.html#cb671-7" tabindex="-1"></a>    , <span class="at">dpi =</span> <span class="st">&quot;print&quot;</span></span>
<span id="cb671-8"><a href="stand_ba.html#cb671-8" tabindex="-1"></a>  )</span></code></pre></div>
<p><code>patchwork</code> of Height APE contrasts</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="stand_ba.html#cb672-1" tabindex="-1"></a>layout_temp <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb672-2"><a href="stand_ba.html#cb672-2" tabindex="-1"></a>    <span class="co"># area(t, l, b, r)</span></span>
<span id="cb672-3"><a href="stand_ba.html#cb672-3" tabindex="-1"></a>    patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb672-4"><a href="stand_ba.html#cb672-4" tabindex="-1"></a>    , patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb672-5"><a href="stand_ba.html#cb672-5" tabindex="-1"></a>    , patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb672-6"><a href="stand_ba.html#cb672-6" tabindex="-1"></a>  )</span>
<span id="cb672-7"><a href="stand_ba.html#cb672-7" tabindex="-1"></a>  <span class="co"># check the layout</span></span>
<span id="cb672-8"><a href="stand_ba.html#cb672-8" tabindex="-1"></a>  <span class="co"># plot(layout_temp)</span></span>
<span id="cb672-9"><a href="stand_ba.html#cb672-9" tabindex="-1"></a><span class="do">############################</span></span>
<span id="cb672-10"><a href="stand_ba.html#cb672-10" tabindex="-1"></a><span class="co"># patchwork for height</span></span>
<span id="cb672-11"><a href="stand_ba.html#cb672-11" tabindex="-1"></a><span class="do">############################</span></span>
<span id="cb672-12"><a href="stand_ba.html#cb672-12" tabindex="-1"></a>  ptchwrk_qlty_sftwr_comp_ba_ape <span class="sc">+</span> </span>
<span id="cb672-13"><a href="stand_ba.html#cb672-13" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;A: Quality Contrast by Software&quot;</span>) <span class="sc">+</span></span>
<span id="cb672-14"><a href="stand_ba.html#cb672-14" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb672-15"><a href="stand_ba.html#cb672-15" tabindex="-1"></a>  ptchwrk_fltr_sftwr_comp_ba_ape <span class="sc">+</span> </span>
<span id="cb672-16"><a href="stand_ba.html#cb672-16" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;B: Filtering Mode Contrast by Software&quot;</span>) <span class="sc">+</span></span>
<span id="cb672-17"><a href="stand_ba.html#cb672-17" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb672-18"><a href="stand_ba.html#cb672-18" tabindex="-1"></a>  patchwork<span class="sc">::</span><span class="fu">free</span>(</span>
<span id="cb672-19"><a href="stand_ba.html#cb672-19" tabindex="-1"></a>    ptchwrk_sftwr_qlty_comp_ba_ape <span class="sc">+</span> </span>
<span id="cb672-20"><a href="stand_ba.html#cb672-20" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;C: Software Contrast by Quality&quot;</span>) <span class="sc">+</span></span>
<span id="cb672-21"><a href="stand_ba.html#cb672-21" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) ) <span class="sc">+</span></span>
<span id="cb672-22"><a href="stand_ba.html#cb672-22" tabindex="-1"></a>  <span class="co"># plot_annotation(tag_levels = list(c(&#39;#&#39;, &#39;&amp;&#39;), &#39;1&#39;)) +</span></span>
<span id="cb672-23"><a href="stand_ba.html#cb672-23" tabindex="-1"></a>  patchwork<span class="sc">::</span><span class="fu">plot_layout</span>(</span>
<span id="cb672-24"><a href="stand_ba.html#cb672-24" tabindex="-1"></a>    <span class="at">design =</span> layout_temp</span>
<span id="cb672-25"><a href="stand_ba.html#cb672-25" tabindex="-1"></a>    , <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.01</span>,<span class="dv">1</span>)</span>
<span id="cb672-26"><a href="stand_ba.html#cb672-26" tabindex="-1"></a>    , <span class="at">heights =</span> <span class="fu">c</span>(<span class="fl">0.01</span>,<span class="dv">1</span>,<span class="fl">0.01</span>,<span class="dv">1</span>,<span class="fl">0.01</span>)</span>
<span id="cb672-27"><a href="stand_ba.html#cb672-27" tabindex="-1"></a>  ) <span class="sc">&amp;</span></span>
<span id="cb672-28"><a href="stand_ba.html#cb672-28" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb672-29"><a href="stand_ba.html#cb672-29" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb672-30"><a href="stand_ba.html#cb672-30" tabindex="-1"></a>    , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">1.1</span>,<span class="fl">0.52</span>)</span>
<span id="cb672-31"><a href="stand_ba.html#cb672-31" tabindex="-1"></a>    , <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="fl">0.8</span>,<span class="fl">0.8</span>,<span class="fl">0.4</span>)</span>
<span id="cb672-32"><a href="stand_ba.html#cb672-32" tabindex="-1"></a>  ) <span class="sc">&amp;</span></span>
<span id="cb672-33"><a href="stand_ba.html#cb672-33" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb672-34"><a href="stand_ba.html#cb672-34" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb672-35"><a href="stand_ba.html#cb672-35" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> <span class="fl">0.0</span>)</span>
<span id="cb672-36"><a href="stand_ba.html#cb672-36" tabindex="-1"></a>    <span class="co"># , plot.background = element_rect(colour = &quot;gray88&quot;, fill=NA, size=3)</span></span>
<span id="cb672-37"><a href="stand_ba.html#cb672-37" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-535-1.png" width="1008" /></p>
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb673-1"><a href="stand_ba.html#cb673-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb673-2"><a href="stand_ba.html#cb673-2" tabindex="-1"></a>    <span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">&quot;../data/all_ba_ape_contrasts.jpeg&quot;</span>)</span>
<span id="cb673-3"><a href="stand_ba.html#cb673-3" tabindex="-1"></a>    , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>()</span>
<span id="cb673-4"><a href="stand_ba.html#cb673-4" tabindex="-1"></a>    , <span class="at">width =</span> <span class="dv">11</span></span>
<span id="cb673-5"><a href="stand_ba.html#cb673-5" tabindex="-1"></a>    , <span class="at">height =</span> <span class="fl">8.5</span></span>
<span id="cb673-6"><a href="stand_ba.html#cb673-6" tabindex="-1"></a>    , <span class="at">units =</span> <span class="st">&quot;in&quot;</span></span>
<span id="cb673-7"><a href="stand_ba.html#cb673-7" tabindex="-1"></a>    , <span class="at">dpi =</span> <span class="st">&quot;print&quot;</span></span>
<span id="cb673-8"><a href="stand_ba.html#cb673-8" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
</div>
<div id="posterior-predictive-checks-2" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Posterior Predictive Checks<a href="stand_ba.html#posterior-predictive-checks-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Markov chain Monte Carlo (MCMC) simulations were conducted using the <code>brms</code> package (Bürkner 2017) to estimate posterior predictive distributions of the parameters of interest. We ran three chains of 100,000 iterations with the first 50,000 discarded as burn-in. Trace-plots were utilized to visually assess model convergence and sufficient convergence was checked with <span class="math inline">\(\hat{R}\)</span> values near 1 (<a href="https://scholar.google.com/scholar?cluster=14209404114665352991&amp;hl=en&amp;as_sdt=0,6">Brooks &amp; Gelman, 1998</a>). Posterior predictive checks were used to evaluate model goodness-of-fit by comparing data simulated from the model with the observed data used to estimate the model parameters (<a href="https://scholar.google.com/scholar?cluster=9228589188684720156&amp;hl=en&amp;as_sdt=0,6">Hobbs &amp; Hooten, 2015</a>). Calculating the proportion of MCMC iterations in which the test statistic (i.e., mean and sum of squares) from the simulated data and observed data are more extreme than one another provides the Bayesian P-value. Lack of fit is indicated by a value close to 0 or 1 while a value of 0.5 indicates perfect fit (<a href="https://scholar.google.com/scholar?cluster=9228589188684720156&amp;hl=en&amp;as_sdt=0,6">Hobbs &amp; Hooten, 2015</a>).</p>
<p>To learn more about this approach to posterior predictive checks, check out Gabry’s (2022) vignette, <a href="https://cran.r-project.org/web/packages/bayesplot/vignettes/graphical-ppcs.html">Graphical posterior predictive checks using the bayesplot package</a>.</p>
<div id="prior-distriubutions-1" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Prior Distriubutions<a href="stand_ba.html#prior-distriubutions-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="stand_ba.html#cb674-1" tabindex="-1"></a>plt_prior11<span class="sc">+</span>plt_prior12 <span class="sc">&amp;</span></span>
<span id="cb674-2"><a href="stand_ba.html#cb674-2" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>))</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-536-1.png" width="1008" /></p>
</div>
<div id="trace-plots-1" class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Trace-plots<a href="stand_ba.html#trace-plots-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>check the trace plots for problems with convergence of the Markov chains</p>
<div id="basal-area-percent-error" class="section level4 hasAnchor" number="8.4.2.1">
<h4><span class="header-section-number">8.4.2.1</span> Basal Area Percent Error<a href="stand_ba.html#basal-area-percent-error" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="stand_ba.html#cb675-1" tabindex="-1"></a><span class="co"># height mean error</span></span>
<span id="cb675-2"><a href="stand_ba.html#cb675-2" tabindex="-1"></a><span class="fu">plot</span>(brms_ba_pe_mod)</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-537-1.png" width="1008" /><img src="metashape_testing_files/figure-html/unnamed-chunk-537-2.png" width="1008" /></p>
</div>
<div id="basal-area-abs.-percent-error" class="section level4 hasAnchor" number="8.4.2.2">
<h4><span class="header-section-number">8.4.2.2</span> Basal Area Abs. Percent Error<a href="stand_ba.html#basal-area-abs.-percent-error" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="stand_ba.html#cb676-1" tabindex="-1"></a><span class="co"># height rmse</span></span>
<span id="cb676-2"><a href="stand_ba.html#cb676-2" tabindex="-1"></a><span class="fu">plot</span>(brms_ba_ape_mod)</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-538-1.png" width="1008" /><img src="metashape_testing_files/figure-html/unnamed-chunk-538-2.png" width="1008" /></p>
</div>
</div>
<div id="hatr-values-1" class="section level3 hasAnchor" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> <span class="math inline">\(\hat{R}\)</span> values<a href="stand_ba.html#hatr-values-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb677-1"><a href="stand_ba.html#cb677-1" tabindex="-1"></a>plt_rhat_temp <span class="ot">&lt;-</span> <span class="cf">function</span>(my_mod) {</span>
<span id="cb677-2"><a href="stand_ba.html#cb677-2" tabindex="-1"></a>  my_mod <span class="sc">%&gt;%</span> </span>
<span id="cb677-3"><a href="stand_ba.html#cb677-3" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">rhat</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb677-4"><a href="stand_ba.html#cb677-4" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb677-5"><a href="stand_ba.html#cb677-5" tabindex="-1"></a>    tibble<span class="sc">::</span><span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;parameter&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb677-6"><a href="stand_ba.html#cb677-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename_with</span>(tolower) <span class="sc">%&gt;%</span> </span>
<span id="cb677-7"><a href="stand_ba.html#cb677-7" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">rhat =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb677-8"><a href="stand_ba.html#cb677-8" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb677-9"><a href="stand_ba.html#cb677-9" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_starts</span>(parameter, <span class="st">&quot;b_&quot;</span>) </span>
<span id="cb677-10"><a href="stand_ba.html#cb677-10" tabindex="-1"></a>      <span class="sc">|</span> stringr<span class="sc">::</span><span class="fu">str_starts</span>(parameter, <span class="st">&quot;r_&quot;</span>) </span>
<span id="cb677-11"><a href="stand_ba.html#cb677-11" tabindex="-1"></a>      <span class="sc">|</span> stringr<span class="sc">::</span><span class="fu">str_starts</span>(parameter, <span class="st">&quot;sd_&quot;</span>) </span>
<span id="cb677-12"><a href="stand_ba.html#cb677-12" tabindex="-1"></a>      <span class="sc">|</span> parameter <span class="sc">==</span> <span class="st">&quot;phi&quot;</span></span>
<span id="cb677-13"><a href="stand_ba.html#cb677-13" tabindex="-1"></a>      <span class="sc">|</span> parameter <span class="sc">==</span> <span class="st">&quot;sigma&quot;</span></span>
<span id="cb677-14"><a href="stand_ba.html#cb677-14" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb677-15"><a href="stand_ba.html#cb677-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb677-16"><a href="stand_ba.html#cb677-16" tabindex="-1"></a>      <span class="at">parameter =</span> parameter <span class="sc">%&gt;%</span> </span>
<span id="cb677-17"><a href="stand_ba.html#cb677-17" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;depth_maps_generation_quality&quot;</span>, <span class="st">&quot;quality&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb677-18"><a href="stand_ba.html#cb677-18" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;depth_maps_generation_filtering_mode&quot;</span>, <span class="st">&quot;filtering&quot;</span>)</span>
<span id="cb677-19"><a href="stand_ba.html#cb677-19" tabindex="-1"></a>      , <span class="at">chk =</span> (rhat <span class="sc">&lt;=</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">0.998</span> <span class="sc">|</span> rhat <span class="sc">&gt;=</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">1.002</span>)</span>
<span id="cb677-20"><a href="stand_ba.html#cb677-20" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb677-21"><a href="stand_ba.html#cb677-21" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> rhat, <span class="at">y =</span> parameter, <span class="at">color =</span> chk, <span class="at">fill =</span> chk)) <span class="sc">+</span></span>
<span id="cb677-22"><a href="stand_ba.html#cb677-22" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">color =</span> <span class="st">&quot;gray44&quot;</span>, <span class="at">lwd =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb677-23"><a href="stand_ba.html#cb677-23" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">0.998</span>, <span class="at">lwd =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb677-24"><a href="stand_ba.html#cb677-24" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">1.002</span>, <span class="at">lwd =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb677-25"><a href="stand_ba.html#cb677-25" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">0.999</span>, <span class="at">lwd =</span> <span class="fl">1.2</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb677-26"><a href="stand_ba.html#cb677-26" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">1.001</span>, <span class="at">lwd =</span> <span class="fl">1.2</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb677-27"><a href="stand_ba.html#cb677-27" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb677-28"><a href="stand_ba.html#cb677-28" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;navy&quot;</span>, <span class="st">&quot;firebrick&quot;</span>)) <span class="sc">+</span></span>
<span id="cb677-29"><a href="stand_ba.html#cb677-29" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;navy&quot;</span>, <span class="st">&quot;firebrick&quot;</span>)) <span class="sc">+</span></span>
<span id="cb677-30"><a href="stand_ba.html#cb677-30" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="cn">NULL</span>, <span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb677-31"><a href="stand_ba.html#cb677-31" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb677-32"><a href="stand_ba.html#cb677-32" tabindex="-1"></a>      <span class="at">x =</span> latex2exp<span class="sc">::</span><span class="fu">TeX</span>(<span class="st">&quot;$</span><span class="sc">\\</span><span class="st">hat{R}$&quot;</span>)</span>
<span id="cb677-33"><a href="stand_ba.html#cb677-33" tabindex="-1"></a>      , <span class="at">subtitle =</span> latex2exp<span class="sc">::</span><span class="fu">TeX</span>(<span class="st">&quot;MCMC chain convergence check for $</span><span class="sc">\\</span><span class="st">hat{R}$ values&quot;</span>)</span>
<span id="cb677-34"><a href="stand_ba.html#cb677-34" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb677-35"><a href="stand_ba.html#cb677-35" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb677-36"><a href="stand_ba.html#cb677-36" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb677-37"><a href="stand_ba.html#cb677-37" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb677-38"><a href="stand_ba.html#cb677-38" tabindex="-1"></a>      , <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb677-39"><a href="stand_ba.html#cb677-39" tabindex="-1"></a>      , <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb677-40"><a href="stand_ba.html#cb677-40" tabindex="-1"></a>      , <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb677-41"><a href="stand_ba.html#cb677-41" tabindex="-1"></a>      , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb677-42"><a href="stand_ba.html#cb677-42" tabindex="-1"></a>      , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb677-43"><a href="stand_ba.html#cb677-43" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb677-44"><a href="stand_ba.html#cb677-44" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb677-45"><a href="stand_ba.html#cb677-45" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb677-46"><a href="stand_ba.html#cb677-46" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fl">6.5</span>)</span>
<span id="cb677-47"><a href="stand_ba.html#cb677-47" tabindex="-1"></a>    )</span>
<span id="cb677-48"><a href="stand_ba.html#cb677-48" tabindex="-1"></a>}</span>
<span id="cb677-49"><a href="stand_ba.html#cb677-49" tabindex="-1"></a><span class="co"># plot together with patchwork</span></span>
<span id="cb677-50"><a href="stand_ba.html#cb677-50" tabindex="-1"></a>brms_ba_pe_mod <span class="sc">%&gt;%</span> <span class="fu">plt_rhat_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Basal Area Percent Error&quot;</span>) <span class="sc">+</span></span>
<span id="cb677-51"><a href="stand_ba.html#cb677-51" tabindex="-1"></a>brms_ba_ape_mod <span class="sc">%&gt;%</span> <span class="fu">plt_rhat_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Basal Area Absolute Percent Error&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb677-52"><a href="stand_ba.html#cb677-52" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-539-1.png" width="1008" /></p>
</div>
<div id="ess-values-1" class="section level3 hasAnchor" number="8.4.4">
<h3><span class="header-section-number">8.4.4</span> ESS values<a href="stand_ba.html#ess-values-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The effective length of an MCMC chain is indicated by the effective sample size (ESS), which refers to the sample size of the MCMC chain <strong>not</strong> to the sample size of the data
<a href="https://sites.google.com/site/doingbayesiandataanalysis/">Kruschke (2015)</a> notes:</p>
<blockquote>
<p>One simple guideline is this: For reasonably accurate and stable estimates of the limits of the 95% HDI, an ESS of 10,000 is recommended. This is merely a heuristic based on experience with practical applications, it is not a requirement. If accuracy of the HDI limits is not crucial for your application, then a smaller ESS may be sufficient. (p.184)</p>
</blockquote>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="stand_ba.html#cb678-1" tabindex="-1"></a>plt_ess_temp <span class="ot">&lt;-</span> <span class="cf">function</span>(my_mod) {</span>
<span id="cb678-2"><a href="stand_ba.html#cb678-2" tabindex="-1"></a><span class="co"># get ess values from model summary</span></span>
<span id="cb678-3"><a href="stand_ba.html#cb678-3" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(</span>
<span id="cb678-4"><a href="stand_ba.html#cb678-4" tabindex="-1"></a>    <span class="fu">summary</span>(my_mod) <span class="sc">%&gt;%</span> </span>
<span id="cb678-5"><a href="stand_ba.html#cb678-5" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="st">&quot;random&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb678-6"><a href="stand_ba.html#cb678-6" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb678-7"><a href="stand_ba.html#cb678-7" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">keep_at</span>(<span class="sc">~</span> .x <span class="sc">==</span> <span class="st">&quot;Bulk_ESS&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb678-8"><a href="stand_ba.html#cb678-8" tabindex="-1"></a>      <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb678-9"><a href="stand_ba.html#cb678-9" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb678-10"><a href="stand_ba.html#cb678-10" tabindex="-1"></a>    , <span class="fu">summary</span>(my_mod) <span class="sc">%&gt;%</span> </span>
<span id="cb678-11"><a href="stand_ba.html#cb678-11" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="st">&quot;fixed&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb678-12"><a href="stand_ba.html#cb678-12" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb678-13"><a href="stand_ba.html#cb678-13" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">keep_at</span>(<span class="sc">~</span> .x <span class="sc">==</span> <span class="st">&quot;Bulk_ESS&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb678-14"><a href="stand_ba.html#cb678-14" tabindex="-1"></a>      <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb678-15"><a href="stand_ba.html#cb678-15" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb678-16"><a href="stand_ba.html#cb678-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb678-17"><a href="stand_ba.html#cb678-17" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">ess =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb678-18"><a href="stand_ba.html#cb678-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">parameter =</span> dplyr<span class="sc">::</span><span class="fu">row_number</span>(), <span class="at">chk =</span> ess<span class="sc">&lt;</span><span class="dv">10000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb678-19"><a href="stand_ba.html#cb678-19" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ess, <span class="at">y =</span> parameter, <span class="at">color =</span> chk, <span class="at">fill =</span> chk)) <span class="sc">+</span></span>
<span id="cb678-20"><a href="stand_ba.html#cb678-20" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10000</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">color =</span> <span class="st">&quot;gray44&quot;</span>, <span class="at">lwd =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb678-21"><a href="stand_ba.html#cb678-21" tabindex="-1"></a>  <span class="fu">geom_segment</span>( <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend=</span>ess, <span class="at">yend=</span>parameter), <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb678-22"><a href="stand_ba.html#cb678-22" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb678-23"><a href="stand_ba.html#cb678-23" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;navy&quot;</span>, <span class="st">&quot;firebrick&quot;</span>)) <span class="sc">+</span></span>
<span id="cb678-24"><a href="stand_ba.html#cb678-24" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;navy&quot;</span>, <span class="st">&quot;firebrick&quot;</span>)) <span class="sc">+</span></span>
<span id="cb678-25"><a href="stand_ba.html#cb678-25" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>, <span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb678-26"><a href="stand_ba.html#cb678-26" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb678-27"><a href="stand_ba.html#cb678-27" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb678-28"><a href="stand_ba.html#cb678-28" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;ESS&quot;</span></span>
<span id="cb678-29"><a href="stand_ba.html#cb678-29" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;MCMC chain resolution check for effective sample size (ESS) values&quot;</span></span>
<span id="cb678-30"><a href="stand_ba.html#cb678-30" tabindex="-1"></a>    , <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb678-31"><a href="stand_ba.html#cb678-31" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb678-32"><a href="stand_ba.html#cb678-32" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb678-33"><a href="stand_ba.html#cb678-33" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb678-34"><a href="stand_ba.html#cb678-34" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb678-35"><a href="stand_ba.html#cb678-35" tabindex="-1"></a>    , <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">4</span>)</span>
<span id="cb678-36"><a href="stand_ba.html#cb678-36" tabindex="-1"></a>    , <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb678-37"><a href="stand_ba.html#cb678-37" tabindex="-1"></a>    , <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb678-38"><a href="stand_ba.html#cb678-38" tabindex="-1"></a>    , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb678-39"><a href="stand_ba.html#cb678-39" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb678-40"><a href="stand_ba.html#cb678-40" tabindex="-1"></a>    , <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb678-41"><a href="stand_ba.html#cb678-41" tabindex="-1"></a>    , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb678-42"><a href="stand_ba.html#cb678-42" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fl">6.5</span>)</span>
<span id="cb678-43"><a href="stand_ba.html#cb678-43" tabindex="-1"></a>  )</span>
<span id="cb678-44"><a href="stand_ba.html#cb678-44" tabindex="-1"></a>}</span>
<span id="cb678-45"><a href="stand_ba.html#cb678-45" tabindex="-1"></a></span>
<span id="cb678-46"><a href="stand_ba.html#cb678-46" tabindex="-1"></a><span class="co"># plot together with patchwork</span></span>
<span id="cb678-47"><a href="stand_ba.html#cb678-47" tabindex="-1"></a>brms_ba_pe_mod <span class="sc">%&gt;%</span> <span class="fu">plt_ess_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Basal Area Percent Error&quot;</span>) <span class="sc">+</span></span>
<span id="cb678-48"><a href="stand_ba.html#cb678-48" tabindex="-1"></a>brms_ba_ape_mod <span class="sc">%&gt;%</span> <span class="fu">plt_ess_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Basal Area Absolute Percent Error&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb678-49"><a href="stand_ba.html#cb678-49" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-540-1.png" width="1008" /></p>
</div>
<div id="mean-and-sd-1" class="section level3 hasAnchor" number="8.4.5">
<h3><span class="header-section-number">8.4.5</span> Mean and SD<a href="stand_ba.html#mean-and-sd-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>posterior predictive check for the overall model combining mean and sd</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb679-1"><a href="stand_ba.html#cb679-1" tabindex="-1"></a>plt_pp_temp <span class="ot">&lt;-</span> <span class="cf">function</span>(my_mod) {</span>
<span id="cb679-2"><a href="stand_ba.html#cb679-2" tabindex="-1"></a>  my_mod <span class="sc">%&gt;%</span> </span>
<span id="cb679-3"><a href="stand_ba.html#cb679-3" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">pp_check</span>(<span class="at">type =</span> <span class="st">&quot;stat_2d&quot;</span>, <span class="at">ndraws =</span> <span class="dv">5000</span>) <span class="sc">+</span></span>
<span id="cb679-4"><a href="stand_ba.html#cb679-4" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb679-5"><a href="stand_ba.html#cb679-5" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb679-6"><a href="stand_ba.html#cb679-6" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>, <span class="at">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb679-7"><a href="stand_ba.html#cb679-7" tabindex="-1"></a>      , <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb679-8"><a href="stand_ba.html#cb679-8" tabindex="-1"></a>      , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb679-9"><a href="stand_ba.html#cb679-9" tabindex="-1"></a>    )</span>
<span id="cb679-10"><a href="stand_ba.html#cb679-10" tabindex="-1"></a>}</span>
<span id="cb679-11"><a href="stand_ba.html#cb679-11" tabindex="-1"></a><span class="co"># plot together with patchwork</span></span>
<span id="cb679-12"><a href="stand_ba.html#cb679-12" tabindex="-1"></a>brms_ba_pe_mod <span class="sc">%&gt;%</span> <span class="fu">plt_pp_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Basal Area Percent Error&quot;</span>) <span class="sc">+</span></span>
<span id="cb679-13"><a href="stand_ba.html#cb679-13" tabindex="-1"></a>brms_ba_ape_mod <span class="sc">%&gt;%</span> <span class="fu">plt_pp_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Basal Area Absolute Percent Error&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb679-14"><a href="stand_ba.html#cb679-14" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-541-1.png" width="1008" /></p>
<div id="bayesian-p-value-1" class="section level4 hasAnchor" number="8.4.5.1">
<h4><span class="header-section-number">8.4.5.1</span> Bayesian p-value<a href="stand_ba.html#bayesian-p-value-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The Bayesian p-value is the probability that a test statistic in the reference distribution exceeds its value in the data. The Bayesian p-value is calculated from the posterior predictive distribution of the new data and the distribution of the observed data. We estimate the probability that the test statistic calculated from “new” data arising from our model (<span class="math inline">\(y_{new}\)</span>) is more extreme than the test statistic calculated from the observed data (<span class="math inline">\(y\)</span>): <span class="math inline">\(\text{P-value}(y) = Pr(T(y_{new}) &gt; T(y))\)</span> where the test statistic <span class="math inline">\(T(y)\)</span> describes the distribution of the data as a summary of the data; it could be the mean, variance, the coefﬁcient of variation, the kurtosis, the maximum, or the minimum of the observed data set, or it might be an “omnibus” statistic like a squared discrepancy or a chi-square value <a href="https://scholar.google.com/scholar?cluster=9228589188684720156&amp;oi=gsb&amp;hl=en&amp;as_sdt=0,6">Hobbs and Hooten (2015, p. 188)</a></p>
<blockquote>
<p>Bayesian P values for mean and standard deviation test statistics The P values for the mean (P mean) give the probability that the mean of the data of new, out-of-sample observations simulated from the model exceeds the mean of the observed data. The P values for the standard deviation (P SD) give the probability that the standard deviation of new, out-of-sample observations simulated from the model exceeds the standard deviation of the observed data. Large (<span class="math inline">\(\gtrapprox 0.90\)</span>) or small (<span class="math inline">\(\lessapprox 0.10\)</span>) values indicate lack of fit. <a href="https://scholar.google.com/scholar?cluster=9228589188684720156&amp;oi=gsb&amp;hl=en&amp;as_sdt=0,6">Hobbs and Hooten (2015)</a>;<a href="https://esajournals.onlinelibrary.wiley.com/doi/abs/10.1002/ecm.1598">Hobbs et al. (2024, Appendix S2 p. 8)</a></p>
</blockquote>
<p>Check the Bayesian p-values between the models</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="stand_ba.html#cb680-1" tabindex="-1"></a><span class="co"># get the model p-values</span></span>
<span id="cb680-2"><a href="stand_ba.html#cb680-2" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(</span>
<span id="cb680-3"><a href="stand_ba.html#cb680-3" tabindex="-1"></a>    <span class="fu">get_mod_p_val</span>(brms_ba_pe_mod, <span class="at">my_var =</span> <span class="st">&quot;basal_area_pct_error&quot;</span>, <span class="at">ndraws =</span> <span class="dv">5000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb680-4"><a href="stand_ba.html#cb680-4" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">&quot;brms_ba_pe_mod&quot;</span>)</span>
<span id="cb680-5"><a href="stand_ba.html#cb680-5" tabindex="-1"></a>    , <span class="fu">get_mod_p_val</span>(brms_ba_ape_mod, <span class="at">my_var =</span> <span class="st">&quot;basal_area_abs_pct_error&quot;</span>, <span class="at">ndraws =</span> <span class="dv">5000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb680-6"><a href="stand_ba.html#cb680-6" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">&quot;brms_ba_ape_mod&quot;</span>)</span>
<span id="cb680-7"><a href="stand_ba.html#cb680-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb680-8"><a href="stand_ba.html#cb680-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb680-9"><a href="stand_ba.html#cb680-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(<span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb680-10"><a href="stand_ba.html#cb680-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>()</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
model
</th>
<th style="text-align:right;">
P.mean
</th>
<th style="text-align:right;">
P.sd
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
brms_ba_pe_mod
</td>
<td style="text-align:right;">
0.51
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
<tr>
<td style="text-align:left;">
brms_ba_ape_mod
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="stats_detected.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
