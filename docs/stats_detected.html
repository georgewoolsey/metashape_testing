<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 7 Statistical Analysis: Detected Tree Reliability | SfM Processing Software Comparison</title>
  <meta name="description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 7 Statistical Analysis: Detected Tree Reliability | SfM Processing Software Comparison" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 7 Statistical Analysis: Detected Tree Reliability | SfM Processing Software Comparison" />
  
  <meta name="twitter:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="George Woolsey" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="stats_validation.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/canopy ht. (m)_710c8e-1/data_stars_canopyhtm72e8d4.txt"></script>
<script src="libs/joda-0.0.1/joda.js"></script>
<script src="libs/joda-0.0.1/addImageQuery-bindings.js"></script>
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Code") elem.value = "Show Code";
    else elem.value = "Hide Code";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Code" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="sfm_data.html"><a href="sfm_data.html"><i class="fa fa-check"></i><b>2</b> SfM Image Processing Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="sfm_data.html"><a href="sfm_data.html#udp"><i class="fa fa-check"></i><b>2.1</b> User-Defined Parameters</a></li>
<li class="chapter" data-level="2.2" data-path="sfm_data.html"><a href="sfm_data.html#metashape-image-processing"><i class="fa fa-check"></i><b>2.2</b> Metashape Image Processing</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="sfm_data.html"><a href="sfm_data.html#metashape-report-pdf-data-extraction"><i class="fa fa-check"></i><b>2.2.1</b> Metashape Report PDF Data Extraction</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="sfm_data.html"><a href="sfm_data.html#metashape-report-data-exploration"><i class="fa fa-check"></i><b>2.3</b> Metashape Report Data Exploration</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="sfm_data.html"><a href="sfm_data.html#preliminaries"><i class="fa fa-check"></i><b>2.3.1</b> Preliminaries</a></li>
<li class="chapter" data-level="2.3.2" data-path="sfm_data.html"><a href="sfm_data.html#metashape-processing-time-summary"><i class="fa fa-check"></i><b>2.3.2</b> Metashape Processing Time Summary</a></li>
<li class="chapter" data-level="2.3.3" data-path="sfm_data.html"><a href="sfm_data.html#flight-and-sparse-cloud-metrics"><i class="fa fa-check"></i><b>2.3.3</b> Flight and Sparse Cloud Metrics</a></li>
<li class="chapter" data-level="2.3.4" data-path="sfm_data.html"><a href="sfm_data.html#metashape-dense-point-cloud-summary"><i class="fa fa-check"></i><b>2.3.4</b> Metashape Dense Point Cloud Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html"><i class="fa fa-check"></i><b>3</b> <strong>R</strong> Point Cloud Processing</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#odm-and-pix4d-image-processing"><i class="fa fa-check"></i><b>3.1</b> ODM and Pix4D Image Processing</a></li>
<li class="chapter" data-level="3.2" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#number-of-files-summary"><i class="fa fa-check"></i><b>3.2</b> Number of files summary</a></li>
<li class="chapter" data-level="3.3" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#processing-time-summary"><i class="fa fa-check"></i><b>3.3</b> Processing Time Summary</a></li>
<li class="chapter" data-level="3.4" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#processing-time-vs-points"><i class="fa fa-check"></i><b>3.4</b> Processing Time vs # Points</a></li>
<li class="chapter" data-level="3.5" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#processing-section-timing"><i class="fa fa-check"></i><b>3.5</b> Processing Section Timing</a></li>
<li class="chapter" data-level="3.6" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#summary-of-point-cloud-data"><i class="fa fa-check"></i><b>3.6</b> Summary of point cloud data</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#table"><i class="fa fa-check"></i><b>3.6.1</b> Table</a></li>
<li class="chapter" data-level="3.6.2" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#plot-summary"><i class="fa fa-check"></i><b>3.6.2</b> Plot summary</a></li>
<li class="chapter" data-level="3.6.3" data-path="ptcld_analysis.html"><a href="ptcld_analysis.html#sfm-image-processing-time-summary"><i class="fa fa-check"></i><b>3.6.3</b> SfM image processing time summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="stats_processing_time.html"><a href="stats_processing_time.html"><i class="fa fa-check"></i><b>4</b> Statistical Analysis: Processing Time</a>
<ul>
<li class="chapter" data-level="4.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#one_pred_mod"><i class="fa fa-check"></i><b>4.1</b> One Nominal Predictor</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#summary-statistics"><i class="fa fa-check"></i><b>4.1.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.1.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#linear-model"><i class="fa fa-check"></i><b>4.1.2</b> Linear Model</a></li>
<li class="chapter" data-level="4.1.3" data-path="stats_processing_time.html"><a href="stats_processing_time.html#anova"><i class="fa fa-check"></i><b>4.1.3</b> ANOVA</a></li>
<li class="chapter" data-level="4.1.4" data-path="stats_processing_time.html"><a href="stats_processing_time.html#one_pred_mod_bays"><i class="fa fa-check"></i><b>4.1.4</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#two_pred_mod"><i class="fa fa-check"></i><b>4.2</b> Two Nominal Predictors</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#summary-statistics-1"><i class="fa fa-check"></i><b>4.2.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.2.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#linear-model-1"><i class="fa fa-check"></i><b>4.2.2</b> Linear Model</a></li>
<li class="chapter" data-level="4.2.3" data-path="stats_processing_time.html"><a href="stats_processing_time.html#anova-1"><i class="fa fa-check"></i><b>4.2.3</b> ANOVA</a></li>
<li class="chapter" data-level="4.2.4" data-path="stats_processing_time.html"><a href="stats_processing_time.html#two_pred_mod_bays"><i class="fa fa-check"></i><b>4.2.4</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="stats_processing_time.html"><a href="stats_processing_time.html#two-nominal-predictors-site-effects"><i class="fa fa-check"></i><b>4.3</b> Two Nominal Predictors + site effects</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#summary-statistics-2"><i class="fa fa-check"></i><b>4.3.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.3.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#id_3_pred_mod_bays"><i class="fa fa-check"></i><b>4.3.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="stats_processing_time.html"><a href="stats_processing_time.html#gamma-two-nominal-predictors-site-effects"><i class="fa fa-check"></i><b>4.4</b> Gamma: Two Nominal Predictors + site effects</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="stats_processing_time.html"><a href="stats_processing_time.html#summary-statistics-3"><i class="fa fa-check"></i><b>4.4.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.4.2" data-path="stats_processing_time.html"><a href="stats_processing_time.html#id_4_pred_mod_bays"><i class="fa fa-check"></i><b>4.4.2</b> Bayesian</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="field_valid.html"><a href="field_valid.html"><i class="fa fa-check"></i><b>5</b> Field Validation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="field_valid.html"><a href="field_valid.html#setup"><i class="fa fa-check"></i><b>5.1</b> Setup</a></li>
<li class="chapter" data-level="5.2" data-path="field_valid.html"><a href="field_valid.html#data-load-functions"><i class="fa fa-check"></i><b>5.2</b> Data Load Functions</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="field_valid.html"><a href="field_valid.html#summary-of-field-validation-plot-data"><i class="fa fa-check"></i><b>5.2.1</b> Summary of field validation plot data</a></li>
<li class="chapter" data-level="5.2.2" data-path="field_valid.html"><a href="field_valid.html#load-uas-data-function"><i class="fa fa-check"></i><b>5.2.2</b> Load UAS data function</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="field_valid.html"><a href="field_valid.html#validation-data-functions"><i class="fa fa-check"></i><b>5.3</b> Validation Data Functions</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="field_valid.html"><a href="field_valid.html#true-positive-identification"><i class="fa fa-check"></i><b>5.3.1</b> True Positive Identification</a></li>
<li class="chapter" data-level="5.3.2" data-path="field_valid.html"><a href="field_valid.html#combine-with-commission-and-omission"><i class="fa fa-check"></i><b>5.3.2</b> Combine with Commission and Omission</a></li>
<li class="chapter" data-level="5.3.3" data-path="field_valid.html"><a href="field_valid.html#full-validation-function"><i class="fa fa-check"></i><b>5.3.3</b> Full validation function</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="field_valid.html"><a href="field_valid.html#full-pipeline-function"><i class="fa fa-check"></i><b>5.4</b> Full pipeline function</a></li>
<li class="chapter" data-level="5.5" data-path="field_valid.html"><a href="field_valid.html#apply-validation-for-all"><i class="fa fa-check"></i><b>5.5</b> Apply validation for all</a></li>
<li class="chapter" data-level="5.6" data-path="field_valid.html"><a href="field_valid.html#full-validation-summary-data"><i class="fa fa-check"></i><b>5.6</b> Full Validation Summary Data</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="field_valid.html"><a href="field_valid.html#true-positive-commission-ommission"><i class="fa fa-check"></i><b>5.6.1</b> True Positive, Commission, Ommission</a></li>
<li class="chapter" data-level="5.6.2" data-path="field_valid.html"><a href="field_valid.html#f-score"><i class="fa fa-check"></i><b>5.6.2</b> F-score</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="field_valid.html"><a href="field_valid.html#valid_ex"><i class="fa fa-check"></i><b>5.7</b> Example Validation Process</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="field_valid.html"><a href="field_valid.html#data-load"><i class="fa fa-check"></i><b>5.7.1</b> Data Load</a></li>
<li class="chapter" data-level="5.7.2" data-path="field_valid.html"><a href="field_valid.html#orthomosaic-data"><i class="fa fa-check"></i><b>5.7.2</b> Orthomosaic Data</a></li>
<li class="chapter" data-level="5.7.3" data-path="field_valid.html"><a href="field_valid.html#field-data"><i class="fa fa-check"></i><b>5.7.3</b> Field Data</a></li>
<li class="chapter" data-level="5.7.4" data-path="field_valid.html"><a href="field_valid.html#uas-data"><i class="fa fa-check"></i><b>5.7.4</b> UAS Data</a></li>
<li class="chapter" data-level="5.7.5" data-path="field_valid.html"><a href="field_valid.html#true-positives"><i class="fa fa-check"></i><b>5.7.5</b> True Positives</a></li>
<li class="chapter" data-level="5.7.6" data-path="field_valid.html"><a href="field_valid.html#field-uas-comparison"><i class="fa fa-check"></i><b>5.7.6</b> Field &amp; UAS Comparison</a></li>
<li class="chapter" data-level="5.7.7" data-path="field_valid.html"><a href="field_valid.html#combine-plots"><i class="fa fa-check"></i><b>5.7.7</b> Combine Plots</a></li>
<li class="chapter" data-level="5.7.8" data-path="field_valid.html"><a href="field_valid.html#height-vs.-dbh-of-tp-co-om"><i class="fa fa-check"></i><b>5.7.8</b> Height vs. DBH of <span class="math inline">\(Tp\)</span>, <span class="math inline">\(Co\)</span>, <span class="math inline">\(Om\)</span></a></li>
<li class="chapter" data-level="5.7.9" data-path="field_valid.html"><a href="field_valid.html#height-and-dbh-distribution-tp-co-om"><i class="fa fa-check"></i><b>5.7.9</b> Height and DBH Distribution <span class="math inline">\(Tp\)</span>, <span class="math inline">\(Co\)</span>, <span class="math inline">\(Om\)</span></a></li>
<li class="chapter" data-level="5.7.10" data-path="field_valid.html"><a href="field_valid.html#detected-overstory-tp-height-difference"><i class="fa fa-check"></i><b>5.7.10</b> Detected Overstory (<span class="math inline">\(TP\)</span>) Height Difference</a></li>
<li class="chapter" data-level="5.7.11" data-path="field_valid.html"><a href="field_valid.html#detected-overstory-tp-dbh-difference"><i class="fa fa-check"></i><b>5.7.11</b> Detected Overstory (<span class="math inline">\(TP\)</span>) DBH Difference</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="field_valid.html"><a href="field_valid.html#mapped-validation-for-all-sites"><i class="fa fa-check"></i><b>5.8</b> Mapped validation for all sites</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="field_valid.html"><a href="field_valid.html#plotting-function"><i class="fa fa-check"></i><b>5.8.1</b> Plotting Function</a></li>
<li class="chapter" data-level="5.8.2" data-path="field_valid.html"><a href="field_valid.html#validation-maps"><i class="fa fa-check"></i><b>5.8.2</b> Validation Maps</a></li>
<li class="chapter" data-level="5.8.3" data-path="field_valid.html"><a href="field_valid.html#validation-maps-combined"><i class="fa fa-check"></i><b>5.8.3</b> Validation Maps Combined</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="field_valid.html"><a href="field_valid.html#field-data-descriptive-statistics"><i class="fa fa-check"></i><b>5.9</b> Field Data Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="field_valid.html"><a href="field_valid.html#table-of-height-summary-statistics"><i class="fa fa-check"></i><b>5.9.1</b> Table of Height Summary Statistics</a></li>
<li class="chapter" data-level="5.9.2" data-path="field_valid.html"><a href="field_valid.html#table-of-dbh-summary-statistics"><i class="fa fa-check"></i><b>5.9.2</b> Table of DBH Summary Statistics</a></li>
<li class="chapter" data-level="5.9.3" data-path="field_valid.html"><a href="field_valid.html#height-and-dbh-distribution"><i class="fa fa-check"></i><b>5.9.3</b> Height and DBH Distribution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="stats_validation.html"><a href="stats_validation.html"><i class="fa fa-check"></i><b>6</b> Statistical Analysis: Validation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="stats_validation.html"><a href="stats_validation.html#setup-1"><i class="fa fa-check"></i><b>6.1</b> Setup</a></li>
<li class="chapter" data-level="6.2" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-4"><i class="fa fa-check"></i><b>6.2</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.3" data-path="stats_validation.html"><a href="stats_validation.html#f_one_pred_mod"><i class="fa fa-check"></i><b>6.3</b> One Nominal Predictor</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-5"><i class="fa fa-check"></i><b>6.3.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.3.2" data-path="stats_validation.html"><a href="stats_validation.html#f_one_pred_mod_bays"><i class="fa fa-check"></i><b>6.3.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="stats_validation.html"><a href="stats_validation.html#f_two_pred_mod"><i class="fa fa-check"></i><b>6.4</b> Two Nominal Predictors</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-6"><i class="fa fa-check"></i><b>6.4.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.4.2" data-path="stats_validation.html"><a href="stats_validation.html#f_two_pred_mod_bays"><i class="fa fa-check"></i><b>6.4.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="stats_validation.html"><a href="stats_validation.html#f_three_pred_mod"><i class="fa fa-check"></i><b>6.5</b> Three Nominal Predictors</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-7"><i class="fa fa-check"></i><b>6.5.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.5.2" data-path="stats_validation.html"><a href="stats_validation.html#f_three_pred_mod_bays"><i class="fa fa-check"></i><b>6.5.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="stats_validation.html"><a href="stats_validation.html#three-nominal-predictors-site-effects"><i class="fa fa-check"></i><b>6.6</b> Three Nominal Predictors + site effects</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-8"><i class="fa fa-check"></i><b>6.6.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.6.2" data-path="stats_validation.html"><a href="stats_validation.html#f_4_pred_mod_bays"><i class="fa fa-check"></i><b>6.6.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="stats_validation.html"><a href="stats_validation.html#beta_mod"><i class="fa fa-check"></i><b>6.7</b> The beta: Three Nominal Predictors + site effects</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-9"><i class="fa fa-check"></i><b>6.7.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.7.2" data-path="stats_validation.html"><a href="stats_validation.html#f_5_pred_mod_bays"><i class="fa fa-check"></i><b>6.7.2</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="stats_validation.html"><a href="stats_validation.html#heterogeneous-variances-and-robustness-against-outliers"><i class="fa fa-check"></i><b>6.8</b> Heterogeneous variances and robustness against outliers</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="stats_validation.html"><a href="stats_validation.html#f_5_5_pred_mod_bays"><i class="fa fa-check"></i><b>6.8.1</b> Bayesian</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="stats_validation.html"><a href="stats_validation.html#overstory-and-understory-validation"><i class="fa fa-check"></i><b>6.9</b> Overstory and Understory Validation</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="stats_validation.html"><a href="stats_validation.html#summary-statistics-10"><i class="fa fa-check"></i><b>6.9.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="6.9.2" data-path="stats_validation.html"><a href="stats_validation.html#f_6_pred_mod_bays"><i class="fa fa-check"></i><b>6.9.2</b> Bayesian</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stats_detected.html"><a href="stats_detected.html"><i class="fa fa-check"></i><b>7</b> Statistical Analysis: Detected Tree Reliability</a>
<ul>
<li class="chapter" data-level="7.1" data-path="stats_detected.html"><a href="stats_detected.html#model-definition"><i class="fa fa-check"></i><b>7.1</b> Model Definition</a></li>
<li class="chapter" data-level="7.2" data-path="stats_detected.html"><a href="stats_detected.html#setup-2"><i class="fa fa-check"></i><b>7.2</b> Setup</a></li>
<li class="chapter" data-level="7.3" data-path="stats_detected.html"><a href="stats_detected.html#tree-height"><i class="fa fa-check"></i><b>7.3</b> Tree Height</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="stats_detected.html"><a href="stats_detected.html#summary-statistics-11"><i class="fa fa-check"></i><b>7.3.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="7.3.2" data-path="stats_detected.html"><a href="stats_detected.html#model-height-mean-error-bias"><i class="fa fa-check"></i><b>7.3.2</b> Model: Height Mean Error (bias)</a></li>
<li class="chapter" data-level="7.3.3" data-path="stats_detected.html"><a href="stats_detected.html#model-height-rmse-precision"><i class="fa fa-check"></i><b>7.3.3</b> Model: Height RMSE (precision)</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="stats_detected.html"><a href="stats_detected.html#tree-dbh"><i class="fa fa-check"></i><b>7.4</b> Tree DBH</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="stats_detected.html"><a href="stats_detected.html#summary-statistics-12"><i class="fa fa-check"></i><b>7.4.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="7.4.2" data-path="stats_detected.html"><a href="stats_detected.html#model-dbh-mean-error-bias"><i class="fa fa-check"></i><b>7.4.2</b> Model: DBH Mean Error (bias)</a></li>
<li class="chapter" data-level="7.4.3" data-path="stats_detected.html"><a href="stats_detected.html#model-dbh-rmse-precision"><i class="fa fa-check"></i><b>7.4.3</b> Model: DBH RMSE (precision)</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="stats_detected.html"><a href="stats_detected.html#posterior-predictive-checks-1"><i class="fa fa-check"></i><b>7.5</b> Posterior Predictive Checks</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="stats_detected.html"><a href="stats_detected.html#prior-distriubutions"><i class="fa fa-check"></i><b>7.5.1</b> Prior Distriubutions</a></li>
<li class="chapter" data-level="7.5.2" data-path="stats_detected.html"><a href="stats_detected.html#trace-plots"><i class="fa fa-check"></i><b>7.5.2</b> Trace-plots</a></li>
<li class="chapter" data-level="7.5.3" data-path="stats_detected.html"><a href="stats_detected.html#hatr-values"><i class="fa fa-check"></i><b>7.5.3</b> <span class="math inline">\(\hat{R}\)</span> values</a></li>
<li class="chapter" data-level="7.5.4" data-path="stats_detected.html"><a href="stats_detected.html#ess-values"><i class="fa fa-check"></i><b>7.5.4</b> ESS values</a></li>
<li class="chapter" data-level="7.5.5" data-path="stats_detected.html"><a href="stats_detected.html#mean-and-sd"><i class="fa fa-check"></i><b>7.5.5</b> Mean and SD</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SfM Processing Software Comparison</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stats_detected" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Section 7</span> Statistical Analysis: Detected Tree Reliability<a href="stats_detected.html#stats_detected" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section, we’ll evaluate the influence of the processing parameters on UAS-detected tree height and DBH reliability.</p>
<p>The UAS and Field validation data was built and described in <a href="field_valid.html#field_valid">this section</a>. For this section we will only look at data from “matched” UAS-field tree pairs (i.e. true positive trees). For successfully matched trees, the UAS tree height and DBH values were compared to field survey tree values to determine the mean error and root mean square error (RMSE). The mean error quantifies the bias of the UAS data while the RMSE quantifies the precision of the UAS data.</p>
<p>We will utilize our “full” model presented in the <a href="stats_validation.html#f_4_pred_mod_bays">prior section</a> in which we modeled the F-score which is a measure of how well the UAS detected trees represent the field survey trees.</p>
<p>For a more in-depth review of the traditional treatment of this sort of data structure called multifactor analysis of variance (ANOVA) compared to the Bayesian hierarchical generalization of the traditional ANOVA model used here see <a href="stats_processing_time.html#stats_processing_time">this previous section</a>.</p>
<div id="model-definition" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Model Definition<a href="stats_detected.html#model-definition" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will used the same model structure for all dependent variables of interest in this section which include:</p>
<ul>
<li>Height Mean Error (m)</li>
<li>Height RMSE (m)</li>
<li>DBH Mean Error (cm)</li>
<li>DBH RMSE (cm)</li>
</ul>
<p><a href="https://sites.google.com/site/doingbayesiandataanalysis/">Kruschke (2015)</a> describes the Hierarchical Bayesian approach to describe groups of metric data with multiple nominal predictors when every subject (“study site” in our research) only contributes one observation per cell/condition:</p>
<blockquote>
<p><span class="math display">\[\begin{align*}
y = &amp; \; \beta_0 \\
&amp; + \overrightarrow \beta_1 \overrightarrow x_1 + \overrightarrow \beta_2 \overrightarrow x_2 + \overrightarrow \beta_{1 \times 2} \overrightarrow x_{1 \times 2} \\
&amp; + \overrightarrow \beta_S \overrightarrow x_S
\end{align*}\]</span></p>
</blockquote>
<blockquote>
<p>In other words, we assume a main effect of subject, but no interaction of subject with other predictors. In this model, the subject effect (deflection) is constant across treatments, and the treatment effects (deflections) are constant across subjects. Notice that the model makes no requirement that every subject contributes a datum to every condition. Indeed, the model allows zero or multiple data per subject per condition. Bayesian estimation makes no assumptions or requirements that the design is balanced (i.e., has equal numbers of measurement in each cell). (p. 608)</p>
</blockquote>
<p>and see section 20 from <a href="https://bookdown.org/content/3686/metric-predicted-variable-with-multiple-nominal-predictors.html">Kurz’s ebook supplement</a></p>
<p>The metric predicted variable with three nominal predictor variables and subject-level effects model has the form:</p>
<p><span class="math display">\[\begin{align*}
y_{i} \sim &amp; \operatorname{Normal}\bigl(\mu_{i}, \sigma_{y} \bigr) \\
\mu_{i} = &amp; \beta_0 \\
&amp; + \sum_{j=1}^{J=5} \beta_{1[j]} x_{1[j]} + \sum_{k=1}^{K=4} \beta_{2[k]} x_{2[k]} + \sum_{f=1}^{F=3} \beta_{3[f]} x_{3[f]} + \sum_{s=1}^{S=5} \beta_{4[s]} x_{4[s]}  \\
&amp; + \sum_{j,k} \beta_{1\times2[j,k]} x_{1\times2[j,k]} + \sum_{j,f} \beta_{1\times3[j,f]} x_{1\times3[j,f]} + \sum_{k,f} \beta_{2\times3[k,f]} x_{2\times3[k,f]} \\
&amp; + \sum_{j,k,f} \beta_{1\times2\times3[j,k,f]} x_{1\times2\times3[j,k,f]} \\
\beta_{0}  \sim &amp; \operatorname{Normal}(\bar{y},y_{SD} \times 5) \\
\beta_{1[j]}  \sim &amp; \operatorname{Normal}(\bar{y},\sigma_{\beta_{1}}) \\
\beta_{2[k]}  \sim &amp; \operatorname{Normal}(\bar{y},\sigma_{\beta_{2}}) \\
\beta_{3[f]}  \sim &amp; \operatorname{Normal}(\bar{y},\sigma_{\beta_{3}}) \\
\beta_{4[s]}  \sim &amp; \operatorname{Normal}(\bar{y},\sigma_{\beta_{4}}) \\
\beta_{1\times2[j,k]}  \sim &amp; \operatorname{Normal}(\bar{y},\sigma_{\beta_{1\times2}}) \\
\beta_{1\times3[j,f]}  \sim &amp; \operatorname{Normal}(\bar{y},\sigma_{\beta_{1\times3}}) \\
\beta_{2\times3[k,f]}  \sim &amp; \operatorname{Normal}(\bar{y},\sigma_{\beta_{2\times3}}) \\
\sigma_{\beta_{1}} \sim &amp; \operatorname{Gamma}(shape,rate) \\
\sigma_{\beta_{2}} \sim &amp; \operatorname{Gamma}(shape,rate) \\
\sigma_{\beta_{3}} \sim &amp; \operatorname{Gamma}(shape,rate) \\
\sigma_{\beta_{4}} \sim &amp; \operatorname{Gamma}(shape,rate) \\
\sigma_{\beta_{1\times2}} \sim &amp; \operatorname{Gamma}(shape,rate) \\
\sigma_{\beta_{1\times3}} \sim &amp; \operatorname{Gamma}(shape,rate) \\
\sigma_{\beta_{2\times3}} \sim &amp; \operatorname{Gamma}(shape,rate) \\
\sigma_{y} \sim &amp; \operatorname{Cauchy}(0,y_{SD}) \\
\end{align*}\]</span></p>
<p>, where <span class="math inline">\(j\)</span> is the depth map generation quality setting corresponding to observation <span class="math inline">\(i\)</span>, <span class="math inline">\(k\)</span> is the depth map filtering mode setting corresponding to observation <span class="math inline">\(i\)</span>, <span class="math inline">\(f\)</span> is the processing software corresponding to observation <span class="math inline">\(i\)</span>, and <span class="math inline">\(s\)</span> is the study site corresponding to observation <span class="math inline">\(i\)</span></p>
<p><em>for this model, we’ll define the priors following <a href="https://bookdown.org/content/3686/metric-predicted-variable-with-multiple-nominal-predictors.html#implementation-in-jags-brms.-1">Kurz</a></em></p>
<p><a href="https://sites.google.com/site/doingbayesiandataanalysis/">Kruschke (2015)</a> explains this prior distribution methodology:</p>
<blockquote>
<p>we let the data serve as a proxy and we set the prior wide relative to the variance in the data, called <code>ySD</code>. Analogously, the normal prior for the baseline <code>a0</code> is centered on the data mean and made very wide relative to the variance of the data. The goal is merely to achieve scale invariance, so that whatever is the measurement scale of the data, the prior will be broad and noncommittal on that scale…The prior on <code>aSigma</code> is a gamma distribution that is broad on the scale of the data, and that has a nonzero mode so that its probability density drops to zero as <code>aSigma</code> approaches zero. Specifically, the shape and rate parameters of the gamma distribution are set so its mode is <code>sd(y)/2</code> and its standard deviation is <code>2*sd(y)</code> (p.560-561)</p>
</blockquote>
</div>
<div id="setup-2" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Setup<a href="stats_detected.html#setup-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>load the data if needed</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="stats_detected.html#cb500-1" tabindex="-1"></a><span class="co"># load data if needed</span></span>
<span id="cb500-2"><a href="stats_detected.html#cb500-2" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">ls</span>()[<span class="fu">ls</span>() <span class="sc">%in%</span> <span class="st">&quot;ptcld_validation_data&quot;</span>] <span class="sc">%&gt;%</span> <span class="fu">length</span>()<span class="sc">==</span><span class="dv">0</span>){</span>
<span id="cb500-3"><a href="stats_detected.html#cb500-3" tabindex="-1"></a> ptcld_validation_data <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;../data/ptcld_full_analysis_data.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb500-4"><a href="stats_detected.html#cb500-4" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb500-5"><a href="stats_detected.html#cb500-5" tabindex="-1"></a>      <span class="at">depth_maps_generation_quality =</span> <span class="fu">factor</span>(</span>
<span id="cb500-6"><a href="stats_detected.html#cb500-6" tabindex="-1"></a>          depth_maps_generation_quality <span class="sc">%&gt;%</span> </span>
<span id="cb500-7"><a href="stats_detected.html#cb500-7" tabindex="-1"></a>            <span class="fu">tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb500-8"><a href="stats_detected.html#cb500-8" tabindex="-1"></a>            stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;ultrahigh&quot;</span>, <span class="st">&quot;ultra high&quot;</span>)</span>
<span id="cb500-9"><a href="stats_detected.html#cb500-9" tabindex="-1"></a>          , <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb500-10"><a href="stats_detected.html#cb500-10" tabindex="-1"></a>          , <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb500-11"><a href="stats_detected.html#cb500-11" tabindex="-1"></a>            <span class="st">&quot;lowest&quot;</span></span>
<span id="cb500-12"><a href="stats_detected.html#cb500-12" tabindex="-1"></a>            , <span class="st">&quot;low&quot;</span></span>
<span id="cb500-13"><a href="stats_detected.html#cb500-13" tabindex="-1"></a>            , <span class="st">&quot;medium&quot;</span></span>
<span id="cb500-14"><a href="stats_detected.html#cb500-14" tabindex="-1"></a>            , <span class="st">&quot;high&quot;</span></span>
<span id="cb500-15"><a href="stats_detected.html#cb500-15" tabindex="-1"></a>            , <span class="st">&quot;ultra high&quot;</span></span>
<span id="cb500-16"><a href="stats_detected.html#cb500-16" tabindex="-1"></a>          )</span>
<span id="cb500-17"><a href="stats_detected.html#cb500-17" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb500-18"><a href="stats_detected.html#cb500-18" tabindex="-1"></a>      , <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">factor</span>(</span>
<span id="cb500-19"><a href="stats_detected.html#cb500-19" tabindex="-1"></a>          depth_maps_generation_filtering_mode <span class="sc">%&gt;%</span> <span class="fu">tolower</span>()</span>
<span id="cb500-20"><a href="stats_detected.html#cb500-20" tabindex="-1"></a>          , <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb500-21"><a href="stats_detected.html#cb500-21" tabindex="-1"></a>          , <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb500-22"><a href="stats_detected.html#cb500-22" tabindex="-1"></a>            <span class="st">&quot;disabled&quot;</span></span>
<span id="cb500-23"><a href="stats_detected.html#cb500-23" tabindex="-1"></a>            , <span class="st">&quot;mild&quot;</span></span>
<span id="cb500-24"><a href="stats_detected.html#cb500-24" tabindex="-1"></a>            , <span class="st">&quot;moderate&quot;</span></span>
<span id="cb500-25"><a href="stats_detected.html#cb500-25" tabindex="-1"></a>            , <span class="st">&quot;aggressive&quot;</span></span>
<span id="cb500-26"><a href="stats_detected.html#cb500-26" tabindex="-1"></a>          )</span>
<span id="cb500-27"><a href="stats_detected.html#cb500-27" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb500-28"><a href="stats_detected.html#cb500-28" tabindex="-1"></a>    )</span>
<span id="cb500-29"><a href="stats_detected.html#cb500-29" tabindex="-1"></a>}</span></code></pre></div>
<p>What is this data?</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="stats_detected.html#cb501-1" tabindex="-1"></a><span class="co"># what is this data?</span></span>
<span id="cb501-2"><a href="stats_detected.html#cb501-2" tabindex="-1"></a>ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 260
## Columns: 92
## $ tracking_file_full_path              &lt;chr&gt; &quot;D:\\SfM_Software_Comparison\\Met…
## $ software                             &lt;chr&gt; &quot;METASHAPE&quot;, &quot;METASHAPE&quot;, &quot;METASH…
## $ study_site                           &lt;chr&gt; &quot;KAIBAB_HIGH&quot;, &quot;KAIBAB_HIGH&quot;, &quot;KA…
## $ processing_attribute1                &lt;chr&gt; &quot;HIGH&quot;, &quot;HIGH&quot;, &quot;HIGH&quot;, &quot;HIGH&quot;, &quot;…
## $ processing_attribute2                &lt;chr&gt; &quot;AGGRESSIVE&quot;, &quot;DISABLED&quot;, &quot;MILD&quot;,…
## $ processing_attribute3                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ file_name                            &lt;chr&gt; &quot;HIGH_AGGRESSIVE&quot;, &quot;HIGH_DISABLED…
## $ number_of_points                     &lt;int&gt; 52974294, 72549206, 69858217, 698…
## $ las_area_m2                          &lt;dbl&gt; 86661.27, 87175.42, 86404.78, 864…
## $ timer_tile_time_mins                 &lt;dbl&gt; 0.63600698, 2.49318542, 0.8413380…
## $ timer_class_dtm_norm_chm_time_mins   &lt;dbl&gt; 3.6559556, 5.3289152, 5.1638296, …
## $ timer_treels_time_mins               &lt;dbl&gt; 8.9065272, 19.2119663, 12.3391793…
## $ timer_itd_time_mins                  &lt;dbl&gt; 0.02202115, 0.02449968, 0.0379844…
## $ timer_competition_time_mins          &lt;dbl&gt; 0.10590740, 0.17865245, 0.1212486…
## $ timer_estdbh_time_mins               &lt;dbl&gt; 0.02290262, 0.02382533, 0.0219917…
## $ timer_silv_time_mins                 &lt;dbl&gt; 0.012565533, 0.015940932, 0.01503…
## $ timer_total_time_mins                &lt;dbl&gt; 13.361886, 27.276985, 18.540606, …
## $ sttng_input_las_dir                  &lt;chr&gt; &quot;D:/Metashape_Testing_2024&quot;, &quot;D:/…
## $ sttng_use_parallel_processing        &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE…
## $ sttng_desired_chm_res                &lt;dbl&gt; 0.25, 0.25, 0.25, 0.25, 0.25, 0.2…
## $ sttng_max_height_threshold_m         &lt;int&gt; 60, 60, 60, 60, 60, 60, 60, 60, 6…
## $ sttng_minimum_tree_height_m          &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
## $ sttng_dbh_max_size_m                 &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
## $ sttng_local_dbh_model                &lt;chr&gt; &quot;rf&quot;, &quot;rf&quot;, &quot;rf&quot;, &quot;rf&quot;, &quot;rf&quot;, &quot;rf…
## $ sttng_user_supplied_epsg             &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ sttng_accuracy_level                 &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
## $ sttng_pts_m2_for_triangulation       &lt;int&gt; 20, 20, 20, 20, 20, 20, 20, 20, 2…
## $ sttng_normalization_with             &lt;chr&gt; &quot;triangulation&quot;, &quot;triangulation&quot;,…
## $ sttng_competition_buffer_m           &lt;int&gt; 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, …
## $ depth_maps_generation_quality        &lt;ord&gt; high, high, high, high, low, low,…
## $ depth_maps_generation_filtering_mode &lt;ord&gt; aggressive, disabled, mild, moder…
## $ total_sfm_time_min                   &lt;dbl&gt; 54.800000, 60.316667, 55.933333, …
## $ number_of_points_sfm                 &lt;dbl&gt; 52974294, 72549206, 69858217, 698…
## $ total_sfm_time_norm                  &lt;dbl&gt; 0.1117823680, 0.1237564664, 0.114…
## $ processed_data_dir                   &lt;chr&gt; &quot;D:/SfM_Software_Comparison/Metas…
## $ processing_id                        &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11…
## $ true_positive_n_trees                &lt;dbl&gt; 229, 261, 260, 234, 220, 175, 231…
## $ commission_n_trees                   &lt;dbl&gt; 173, 222, 213, 193, 148, 223, 163…
## $ omission_n_trees                     &lt;dbl&gt; 772, 740, 741, 767, 781, 826, 770…
## $ f_score                              &lt;dbl&gt; 0.3264433, 0.3517520, 0.3527815, …
## $ tree_height_m_me                     &lt;dbl&gt; 0.270336679, 0.283568790, 0.31223…
## $ tree_height_m_mpe                    &lt;dbl&gt; 0.002357383, 0.013286785, 0.01427…
## $ tree_height_m_mae                    &lt;dbl&gt; 0.7873610, 0.6886235, 0.6914983, …
## $ tree_height_m_mape                   &lt;dbl&gt; 0.06624939, 0.06903969, 0.0605504…
## $ tree_height_m_smape                  &lt;dbl&gt; 0.06776453, 0.06838733, 0.0604101…
## $ tree_height_m_mse                    &lt;dbl&gt; 0.9842433, 0.8507862, 0.8259923, …
## $ tree_height_m_rmse                   &lt;dbl&gt; 0.9920904, 0.9223807, 0.9088412, …
## $ dbh_cm_me                            &lt;dbl&gt; 9.1574422, 6.5724212, 8.4176764, …
## $ dbh_cm_mpe                           &lt;dbl&gt; 0.864045437, 0.815188062, 0.95647…
## $ dbh_cm_mae                           &lt;dbl&gt; 11.563377, 9.446345, 11.669532, 8…
## $ dbh_cm_mape                          &lt;dbl&gt; 0.9054747, 0.8694597, 1.0134134, …
## $ dbh_cm_smape                         &lt;dbl&gt; 0.4587661, 0.4675111, 0.5094006, …
## $ dbh_cm_mse                           &lt;dbl&gt; 168.76487, 113.76273, 165.36220, …
## $ dbh_cm_rmse                          &lt;dbl&gt; 12.990954, 10.665961, 12.859323, …
## $ overstory_commission_n_trees         &lt;dbl&gt; 141, 178, 178, 160, 95, 173, 120,…
## $ understory_commission_n_trees        &lt;dbl&gt; 32, 44, 35, 33, 53, 50, 43, 39, 1…
## $ overstory_omission_n_trees           &lt;dbl&gt; 558, 560, 545, 556, 554, 598, 545…
## $ understory_omission_n_trees          &lt;dbl&gt; 214, 180, 196, 211, 227, 228, 225…
## $ overstory_true_positive_n_trees      &lt;dbl&gt; 185, 183, 198, 187, 189, 145, 198…
## $ understory_true_positive_n_trees     &lt;dbl&gt; 44, 78, 62, 47, 31, 30, 33, 40, 2…
## $ overstory_f_score                    &lt;dbl&gt; 0.3461179, 0.3315217, 0.3538874, …
## $ understory_f_score                   &lt;dbl&gt; 0.2634731, 0.4105263, 0.3492958, …
## $ overstory_tree_height_m_me           &lt;dbl&gt; 0.41693172, 0.44114110, 0.4421674…
## $ understory_tree_height_m_me          &lt;dbl&gt; -0.34602886, -0.08612009, -0.1027…
## $ overstory_tree_height_m_mpe          &lt;dbl&gt; 0.020790675, 0.024558478, 0.02411…
## $ understory_tree_height_m_mpe         &lt;dbl&gt; -0.075146232, -0.013158341, -0.01…
## $ overstory_tree_height_m_mae          &lt;dbl&gt; 0.8201433, 0.7820879, 0.7770369, …
## $ understory_tree_height_m_mae         &lt;dbl&gt; 0.6495266, 0.4693415, 0.4183269, …
## $ overstory_tree_height_m_mape         &lt;dbl&gt; 0.04662933, 0.04863237, 0.0487081…
## $ understory_tree_height_m_mape        &lt;dbl&gt; 0.14874284, 0.11691842, 0.0983694…
## $ overstory_tree_height_m_smape        &lt;dbl&gt; 0.04589942, 0.04776615, 0.0479123…
## $ understory_tree_height_m_smape       &lt;dbl&gt; 0.15969736, 0.11676780, 0.1003222…
## $ overstory_tree_height_m_mse          &lt;dbl&gt; 1.0623763, 1.0055835, 0.9739823, …
## $ understory_tree_height_m_mse         &lt;dbl&gt; 0.6557300, 0.4876080, 0.3533791, …
## $ overstory_tree_height_m_rmse         &lt;dbl&gt; 1.0307164, 1.0027878, 0.9869054, …
## $ understory_tree_height_m_rmse        &lt;dbl&gt; 0.8097715, 0.6982893, 0.5944570, …
## $ overstory_dbh_cm_me                  &lt;dbl&gt; 7.14062864, 4.28291683, 5.9942336…
## $ understory_dbh_cm_me                 &lt;dbl&gt; 17.637226, 11.943951, 16.157058, …
## $ overstory_dbh_cm_mpe                 &lt;dbl&gt; 0.35616828, 0.28046688, 0.3848487…
## $ understory_dbh_cm_mpe                &lt;dbl&gt; 2.99943801, 2.06972621, 2.7820046…
## $ overstory_dbh_cm_mae                 &lt;dbl&gt; 10.118785, 8.381792, 10.264347, 8…
## $ understory_dbh_cm_mae                &lt;dbl&gt; 17.637226, 11.943951, 16.157058, …
## $ overstory_dbh_cm_mape                &lt;dbl&gt; 0.4074510, 0.3578707, 0.4596121, …
## $ understory_dbh_cm_mape               &lt;dbl&gt; 2.9994380, 2.0697262, 2.7820046, …
## $ overstory_dbh_cm_smape               &lt;dbl&gt; 0.3090883, 0.2850588, 0.3444494, …
## $ understory_dbh_cm_smape              &lt;dbl&gt; 1.0880930, 0.8955723, 1.0361800, …
## $ overstory_dbh_cm_mse                 &lt;dbl&gt; 133.06320, 98.05838, 132.81185, 9…
## $ understory_dbh_cm_mse                &lt;dbl&gt; 318.874161, 150.607541, 269.31332…
## $ overstory_dbh_cm_rmse                &lt;dbl&gt; 11.535303, 9.902443, 11.524402, 9…
## $ understory_dbh_cm_rmse               &lt;dbl&gt; 17.857048, 12.272226, 16.410768, …
## $ validation_file_full_path            &lt;chr&gt; &quot;D:/SfM_Software_Comparison/Metas…
## $ overstory_ht_m                       &lt;dbl&gt; 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, …</code></pre>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="stats_detected.html#cb503-1" tabindex="-1"></a><span class="co"># a row is unique by...</span></span>
<span id="cb503-2"><a href="stats_detected.html#cb503-2" tabindex="-1"></a><span class="fu">identical</span>(</span>
<span id="cb503-3"><a href="stats_detected.html#cb503-3" tabindex="-1"></a>  <span class="fu">nrow</span>(ptcld_validation_data)</span>
<span id="cb503-4"><a href="stats_detected.html#cb503-4" tabindex="-1"></a>  , ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb503-5"><a href="stats_detected.html#cb503-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(</span>
<span id="cb503-6"><a href="stats_detected.html#cb503-6" tabindex="-1"></a>      study_site, software</span>
<span id="cb503-7"><a href="stats_detected.html#cb503-7" tabindex="-1"></a>      , depth_maps_generation_quality</span>
<span id="cb503-8"><a href="stats_detected.html#cb503-8" tabindex="-1"></a>      , depth_maps_generation_filtering_mode</span>
<span id="cb503-9"><a href="stats_detected.html#cb503-9" tabindex="-1"></a>      , processing_attribute3 <span class="co"># need to align all by software so this will go away or be filled</span></span>
<span id="cb503-10"><a href="stats_detected.html#cb503-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb503-11"><a href="stats_detected.html#cb503-11" tabindex="-1"></a>    <span class="fu">nrow</span>()</span>
<span id="cb503-12"><a href="stats_detected.html#cb503-12" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>load our plotting functions if needed (not showing these functions here but see the <a href="stats_validation.html#stats_validation">prior section</a> for function definitions)</p>
</div>
<div id="tree-height" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Tree Height<a href="stats_detected.html#tree-height" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="summary-statistics-11" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Summary Statistics<a href="stats_detected.html#summary-statistics-11" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="height-mean-error-bias" class="section level4 hasAnchor" number="7.3.1.1">
<h4><span class="header-section-number">7.3.1.1</span> Height Mean Error (bias)<a href="stats_detected.html#height-mean-error-bias" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="stats_detected.html#cb505-1" tabindex="-1"></a>  <span class="co"># summarize data</span></span>
<span id="cb505-2"><a href="stats_detected.html#cb505-2" tabindex="-1"></a>  dta_temp <span class="ot">=</span> ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb505-3"><a href="stats_detected.html#cb505-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span></span>
<span id="cb505-4"><a href="stats_detected.html#cb505-4" tabindex="-1"></a>    <span class="co"># collapse across study site</span></span>
<span id="cb505-5"><a href="stats_detected.html#cb505-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb505-6"><a href="stats_detected.html#cb505-6" tabindex="-1"></a>      <span class="at">tree_height_m_me =</span> <span class="fu">mean</span>(tree_height_m_me, <span class="at">na.rm =</span> T)</span>
<span id="cb505-7"><a href="stats_detected.html#cb505-7" tabindex="-1"></a>      , <span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb505-8"><a href="stats_detected.html#cb505-8" tabindex="-1"></a>    )</span>
<span id="cb505-9"><a href="stats_detected.html#cb505-9" tabindex="-1"></a>  <span class="co"># set limits for color scale</span></span>
<span id="cb505-10"><a href="stats_detected.html#cb505-10" tabindex="-1"></a>  lmt_tree_height_m_me <span class="ot">=</span> <span class="fu">ceiling</span>(<span class="dv">10</span><span class="sc">*</span><span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">range</span>(dta_temp<span class="sc">$</span>tree_height_m_me, <span class="at">na.rm =</span> T))))<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb505-11"><a href="stats_detected.html#cb505-11" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_dichromat(&quot;BluetoOrange.10&quot;)(10))</span></span>
<span id="cb505-12"><a href="stats_detected.html#cb505-12" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_div_gradient()(seq(0, 1, length.out = 7)))</span></span>
<span id="cb505-13"><a href="stats_detected.html#cb505-13" tabindex="-1"></a>  <span class="co"># plot it</span></span>
<span id="cb505-14"><a href="stats_detected.html#cb505-14" tabindex="-1"></a>  dta_temp <span class="sc">%&gt;%</span> </span>
<span id="cb505-15"><a href="stats_detected.html#cb505-15" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb505-16"><a href="stats_detected.html#cb505-16" tabindex="-1"></a>      <span class="at">y =</span> depth_maps_generation_quality</span>
<span id="cb505-17"><a href="stats_detected.html#cb505-17" tabindex="-1"></a>      , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb505-18"><a href="stats_detected.html#cb505-18" tabindex="-1"></a>      , <span class="at">fill =</span> tree_height_m_me</span>
<span id="cb505-19"><a href="stats_detected.html#cb505-19" tabindex="-1"></a>      , <span class="at">label =</span> <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">comma</span>(tree_height_m_me,<span class="at">accuracy =</span> <span class="fl">0.01</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">(n=&quot;</span>, n,<span class="st">&quot;)&quot;</span>)</span>
<span id="cb505-20"><a href="stats_detected.html#cb505-20" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb505-21"><a href="stats_detected.html#cb505-21" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb505-22"><a href="stats_detected.html#cb505-22" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb505-23"><a href="stats_detected.html#cb505-23" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(software)) <span class="sc">+</span> </span>
<span id="cb505-24"><a href="stats_detected.html#cb505-24" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb505-25"><a href="stats_detected.html#cb505-25" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb505-26"><a href="stats_detected.html#cb505-26" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb505-27"><a href="stats_detected.html#cb505-27" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb505-28"><a href="stats_detected.html#cb505-28" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb505-29"><a href="stats_detected.html#cb505-29" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_tree_height_m_me,lmt_tree_height_m_me)</span>
<span id="cb505-30"><a href="stats_detected.html#cb505-30" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb505-31"><a href="stats_detected.html#cb505-31" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb505-32"><a href="stats_detected.html#cb505-32" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb505-33"><a href="stats_detected.html#cb505-33" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb505-34"><a href="stats_detected.html#cb505-34" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb505-35"><a href="stats_detected.html#cb505-35" tabindex="-1"></a>      , <span class="at">y =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb505-36"><a href="stats_detected.html#cb505-36" tabindex="-1"></a>      , <span class="at">fill =</span> <span class="st">&quot;Height Mean Error (m)&quot;</span></span>
<span id="cb505-37"><a href="stats_detected.html#cb505-37" tabindex="-1"></a>      , <span class="at">title =</span> <span class="st">&quot;mean height mean error (m) and # of study sites&quot;</span></span>
<span id="cb505-38"><a href="stats_detected.html#cb505-38" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="fu">paste</span>(</span>
<span id="cb505-39"><a href="stats_detected.html#cb505-39" tabindex="-1"></a>        <span class="st">&quot;negative values = UAS tree height &lt; field tree height&quot;</span></span>
<span id="cb505-40"><a href="stats_detected.html#cb505-40" tabindex="-1"></a>        , <span class="st">&quot; || &quot;</span></span>
<span id="cb505-41"><a href="stats_detected.html#cb505-41" tabindex="-1"></a>        , <span class="st">&quot;positive values = UAS tree height &gt; field tree height&quot;</span></span>
<span id="cb505-42"><a href="stats_detected.html#cb505-42" tabindex="-1"></a>      )</span>
<span id="cb505-43"><a href="stats_detected.html#cb505-43" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb505-44"><a href="stats_detected.html#cb505-44" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb505-45"><a href="stats_detected.html#cb505-45" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb505-46"><a href="stats_detected.html#cb505-46" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb505-47"><a href="stats_detected.html#cb505-47" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb505-48"><a href="stats_detected.html#cb505-48" tabindex="-1"></a>      , <span class="at">panel.background =</span> <span class="fu">element_blank</span>()</span>
<span id="cb505-49"><a href="stats_detected.html#cb505-49" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb505-50"><a href="stats_detected.html#cb505-50" tabindex="-1"></a>      <span class="co"># , plot.title = element_text(hjust = 0.5)</span></span>
<span id="cb505-51"><a href="stats_detected.html#cb505-51" tabindex="-1"></a>      <span class="co"># , plot.subtitle = element_text(hjust = 0.5)</span></span>
<span id="cb505-52"><a href="stats_detected.html#cb505-52" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb505-53"><a href="stats_detected.html#cb505-53" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-375-1.png" width="1008" /></p>
</div>
<div id="height-rmse-precision" class="section level4 hasAnchor" number="7.3.1.2">
<h4><span class="header-section-number">7.3.1.2</span> Height RMSE (precision)<a href="stats_detected.html#height-rmse-precision" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="stats_detected.html#cb506-1" tabindex="-1"></a>  <span class="co"># summarize data</span></span>
<span id="cb506-2"><a href="stats_detected.html#cb506-2" tabindex="-1"></a>  dta_temp <span class="ot">=</span> ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb506-3"><a href="stats_detected.html#cb506-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span></span>
<span id="cb506-4"><a href="stats_detected.html#cb506-4" tabindex="-1"></a>    <span class="co"># collapse across study site</span></span>
<span id="cb506-5"><a href="stats_detected.html#cb506-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb506-6"><a href="stats_detected.html#cb506-6" tabindex="-1"></a>      <span class="at">tree_height_m_rmse =</span> <span class="fu">mean</span>(tree_height_m_rmse, <span class="at">na.rm =</span> T)</span>
<span id="cb506-7"><a href="stats_detected.html#cb506-7" tabindex="-1"></a>      , <span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb506-8"><a href="stats_detected.html#cb506-8" tabindex="-1"></a>    )</span>
<span id="cb506-9"><a href="stats_detected.html#cb506-9" tabindex="-1"></a>  <span class="co"># set limits for color scale</span></span>
<span id="cb506-10"><a href="stats_detected.html#cb506-10" tabindex="-1"></a>  lmt_tree_height_m_rmse <span class="ot">=</span> <span class="fu">ceiling</span>(<span class="fl">1.02</span><span class="sc">*</span><span class="dv">10</span><span class="sc">*</span><span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">range</span>(dta_temp<span class="sc">$</span>tree_height_m_rmse, <span class="at">na.rm =</span> T))))<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb506-11"><a href="stats_detected.html#cb506-11" tabindex="-1"></a>  <span class="co"># scales::show_col(viridis::mako(n = 10, begin = 0.2, end = 0.9, direction = -1))</span></span>
<span id="cb506-12"><a href="stats_detected.html#cb506-12" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_div_gradient()(seq(0, 1, length.out = 7)))</span></span>
<span id="cb506-13"><a href="stats_detected.html#cb506-13" tabindex="-1"></a>  <span class="co"># plot it</span></span>
<span id="cb506-14"><a href="stats_detected.html#cb506-14" tabindex="-1"></a>  dta_temp <span class="sc">%&gt;%</span> </span>
<span id="cb506-15"><a href="stats_detected.html#cb506-15" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb506-16"><a href="stats_detected.html#cb506-16" tabindex="-1"></a>      <span class="at">y =</span> depth_maps_generation_quality</span>
<span id="cb506-17"><a href="stats_detected.html#cb506-17" tabindex="-1"></a>      , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb506-18"><a href="stats_detected.html#cb506-18" tabindex="-1"></a>      , <span class="at">fill =</span> tree_height_m_rmse</span>
<span id="cb506-19"><a href="stats_detected.html#cb506-19" tabindex="-1"></a>      , <span class="at">label =</span> <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">comma</span>(tree_height_m_rmse,<span class="at">accuracy =</span> <span class="fl">0.01</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">(n=&quot;</span>, n,<span class="st">&quot;)&quot;</span>)</span>
<span id="cb506-20"><a href="stats_detected.html#cb506-20" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb506-21"><a href="stats_detected.html#cb506-21" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb506-22"><a href="stats_detected.html#cb506-22" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb506-23"><a href="stats_detected.html#cb506-23" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(software)) <span class="sc">+</span> </span>
<span id="cb506-24"><a href="stats_detected.html#cb506-24" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb506-25"><a href="stats_detected.html#cb506-25" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb506-26"><a href="stats_detected.html#cb506-26" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb506-27"><a href="stats_detected.html#cb506-27" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb506-28"><a href="stats_detected.html#cb506-28" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb506-29"><a href="stats_detected.html#cb506-29" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_tree_height_m_rmse)</span>
<span id="cb506-30"><a href="stats_detected.html#cb506-30" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb506-31"><a href="stats_detected.html#cb506-31" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb506-32"><a href="stats_detected.html#cb506-32" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb506-33"><a href="stats_detected.html#cb506-33" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb506-34"><a href="stats_detected.html#cb506-34" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb506-35"><a href="stats_detected.html#cb506-35" tabindex="-1"></a>      , <span class="at">y =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb506-36"><a href="stats_detected.html#cb506-36" tabindex="-1"></a>      , <span class="at">fill =</span> <span class="st">&quot;Height RMSE (m)&quot;</span></span>
<span id="cb506-37"><a href="stats_detected.html#cb506-37" tabindex="-1"></a>      , <span class="at">title =</span> <span class="st">&quot;mean height RMSE (m) and # of study sites&quot;</span></span>
<span id="cb506-38"><a href="stats_detected.html#cb506-38" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb506-39"><a href="stats_detected.html#cb506-39" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb506-40"><a href="stats_detected.html#cb506-40" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb506-41"><a href="stats_detected.html#cb506-41" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb506-42"><a href="stats_detected.html#cb506-42" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb506-43"><a href="stats_detected.html#cb506-43" tabindex="-1"></a>      , <span class="at">panel.background =</span> <span class="fu">element_blank</span>()</span>
<span id="cb506-44"><a href="stats_detected.html#cb506-44" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb506-45"><a href="stats_detected.html#cb506-45" tabindex="-1"></a>      <span class="co"># , plot.title = element_text(hjust = 0.5)</span></span>
<span id="cb506-46"><a href="stats_detected.html#cb506-46" tabindex="-1"></a>      <span class="co"># , plot.subtitle = element_text(hjust = 0.5)</span></span>
<span id="cb506-47"><a href="stats_detected.html#cb506-47" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb506-48"><a href="stats_detected.html#cb506-48" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-376-1.png" width="1008" /></p>
</div>
</div>
<div id="model-height-mean-error-bias" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Model: Height Mean Error (bias)<a href="stats_detected.html#model-height-mean-error-bias" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="stats_detected.html#cb507-1" tabindex="-1"></a><span class="co"># from Kurz: </span></span>
<span id="cb507-2"><a href="stats_detected.html#cb507-2" tabindex="-1"></a>gamma_a_b_from_omega_sigma <span class="ot">=</span> <span class="cf">function</span>(mode, sd) {</span>
<span id="cb507-3"><a href="stats_detected.html#cb507-3" tabindex="-1"></a>  <span class="cf">if</span> (mode <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;mode must be &gt; 0&quot;</span>)</span>
<span id="cb507-4"><a href="stats_detected.html#cb507-4" tabindex="-1"></a>  <span class="cf">if</span> (sd   <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;sd must be &gt; 0&quot;</span>)</span>
<span id="cb507-5"><a href="stats_detected.html#cb507-5" tabindex="-1"></a>  rate <span class="ot">=</span> (mode <span class="sc">+</span> <span class="fu">sqrt</span>(mode<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb507-6"><a href="stats_detected.html#cb507-6" tabindex="-1"></a>  shape <span class="ot">=</span> <span class="dv">1</span> <span class="sc">+</span> mode <span class="sc">*</span> rate</span>
<span id="cb507-7"><a href="stats_detected.html#cb507-7" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">shape =</span> shape, <span class="at">rate =</span> rate))</span>
<span id="cb507-8"><a href="stats_detected.html#cb507-8" tabindex="-1"></a>}</span>
<span id="cb507-9"><a href="stats_detected.html#cb507-9" tabindex="-1"></a></span>
<span id="cb507-10"><a href="stats_detected.html#cb507-10" tabindex="-1"></a>mean_y_temp <span class="ot">=</span> <span class="fu">mean</span>(ptcld_validation_data<span class="sc">$</span>tree_height_m_me, <span class="at">na.rm =</span> T)</span>
<span id="cb507-11"><a href="stats_detected.html#cb507-11" tabindex="-1"></a>sd_y_temp   <span class="ot">=</span> <span class="fu">sd</span>(ptcld_validation_data<span class="sc">$</span>tree_height_m_me, <span class="at">na.rm =</span> T)</span>
<span id="cb507-12"><a href="stats_detected.html#cb507-12" tabindex="-1"></a></span>
<span id="cb507-13"><a href="stats_detected.html#cb507-13" tabindex="-1"></a>omega_temp <span class="ot">=</span> sd_y_temp <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb507-14"><a href="stats_detected.html#cb507-14" tabindex="-1"></a>sigma_temp <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> sd_y_temp</span>
<span id="cb507-15"><a href="stats_detected.html#cb507-15" tabindex="-1"></a></span>
<span id="cb507-16"><a href="stats_detected.html#cb507-16" tabindex="-1"></a>s_r_temp <span class="ot">=</span> <span class="fu">gamma_a_b_from_omega_sigma</span>(<span class="at">mode =</span> omega_temp, <span class="at">sd =</span> sigma_temp)</span>
<span id="cb507-17"><a href="stats_detected.html#cb507-17" tabindex="-1"></a></span>
<span id="cb507-18"><a href="stats_detected.html#cb507-18" tabindex="-1"></a>stanvars_temp <span class="ot">=</span> </span>
<span id="cb507-19"><a href="stats_detected.html#cb507-19" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(mean_y_temp,    <span class="at">name =</span> <span class="st">&quot;mean_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb507-20"><a href="stats_detected.html#cb507-20" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(sd_y_temp,      <span class="at">name =</span> <span class="st">&quot;sd_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb507-21"><a href="stats_detected.html#cb507-21" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>shape, <span class="at">name =</span> <span class="st">&quot;alpha&quot;</span>) <span class="sc">+</span></span>
<span id="cb507-22"><a href="stats_detected.html#cb507-22" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>rate,  <span class="at">name =</span> <span class="st">&quot;beta&quot;</span>)</span></code></pre></div>
<div id="prior-distributions-1" class="section level4 hasAnchor" number="7.3.2.1">
<h4><span class="header-section-number">7.3.2.1</span> Prior distributions<a href="stats_detected.html#prior-distributions-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="stats_detected.html#cb508-1" tabindex="-1"></a><span class="do">#### setting priors</span></span>
<span id="cb508-2"><a href="stats_detected.html#cb508-2" tabindex="-1"></a><span class="co"># required libraries: tidyverse, tidybayes, brms, palettetown, latex2exp</span></span>
<span id="cb508-3"><a href="stats_detected.html#cb508-3" tabindex="-1"></a>priors_temp <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb508-4"><a href="stats_detected.html#cb508-4" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y_temp, sd_y_temp <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb508-5"><a href="stats_detected.html#cb508-5" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(s_r_temp<span class="sc">$</span>shape, s_r_temp<span class="sc">$</span>rate), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb508-6"><a href="stats_detected.html#cb508-6" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y_temp), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb508-7"><a href="stats_detected.html#cb508-7" tabindex="-1"></a>  )</span>
<span id="cb508-8"><a href="stats_detected.html#cb508-8" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb508-9"><a href="stats_detected.html#cb508-9" tabindex="-1"></a>plt_prior1 <span class="ot">=</span> </span>
<span id="cb508-10"><a href="stats_detected.html#cb508-10" tabindex="-1"></a>priors_temp <span class="sc">%&gt;%</span> </span>
<span id="cb508-11"><a href="stats_detected.html#cb508-11" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">parse_dist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb508-12"><a href="stats_detected.html#cb508-12" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">marginalize_lkjcorr</span>(<span class="at">K =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb508-13"><a href="stats_detected.html#cb508-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb508-14"><a href="stats_detected.html#cb508-14" tabindex="-1"></a>    .args</span>
<span id="cb508-15"><a href="stats_detected.html#cb508-15" tabindex="-1"></a>    , <span class="at">sep =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb508-16"><a href="stats_detected.html#cb508-16" tabindex="-1"></a>    , <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb508-17"><a href="stats_detected.html#cb508-17" tabindex="-1"></a>    , <span class="at">remove =</span> F</span>
<span id="cb508-18"><a href="stats_detected.html#cb508-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb508-19"><a href="stats_detected.html#cb508-19" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb508-20"><a href="stats_detected.html#cb508-20" tabindex="-1"></a>    <span class="at">distrib =</span> <span class="fu">paste0</span>(</span>
<span id="cb508-21"><a href="stats_detected.html#cb508-21" tabindex="-1"></a>      class, <span class="st">&quot; ~ &quot;</span></span>
<span id="cb508-22"><a href="stats_detected.html#cb508-22" tabindex="-1"></a>      , .dist</span>
<span id="cb508-23"><a href="stats_detected.html#cb508-23" tabindex="-1"></a>      , <span class="st">&quot;(&quot;</span></span>
<span id="cb508-24"><a href="stats_detected.html#cb508-24" tabindex="-1"></a>      , a <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">extract_numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb508-25"><a href="stats_detected.html#cb508-25" tabindex="-1"></a>      , <span class="st">&quot;,&quot;</span></span>
<span id="cb508-26"><a href="stats_detected.html#cb508-26" tabindex="-1"></a>      , b <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">extract_numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb508-27"><a href="stats_detected.html#cb508-27" tabindex="-1"></a>      , <span class="st">&quot;)&quot;</span></span>
<span id="cb508-28"><a href="stats_detected.html#cb508-28" tabindex="-1"></a>    )</span>
<span id="cb508-29"><a href="stats_detected.html#cb508-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb508-30"><a href="stats_detected.html#cb508-30" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">dist =</span> .dist, <span class="at">args =</span> .args)) <span class="sc">+</span></span>
<span id="cb508-31"><a href="stats_detected.html#cb508-31" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(distrib), <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb508-32"><a href="stats_detected.html#cb508-32" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb508-33"><a href="stats_detected.html#cb508-33" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> prior),</span>
<span id="cb508-34"><a href="stats_detected.html#cb508-34" tabindex="-1"></a>    <span class="at">n =</span> <span class="fl">10e2</span>,</span>
<span id="cb508-35"><a href="stats_detected.html#cb508-35" tabindex="-1"></a>    <span class="at">show.legend =</span> F</span>
<span id="cb508-36"><a href="stats_detected.html#cb508-36" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb508-37"><a href="stats_detected.html#cb508-37" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb508-38"><a href="stats_detected.html#cb508-38" tabindex="-1"></a>  <span class="co"># Set the fill parameter for each group</span></span>
<span id="cb508-39"><a href="stats_detected.html#cb508-39" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb508-40"><a href="stats_detected.html#cb508-40" tabindex="-1"></a>    <span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">turbo</span>(<span class="at">n=</span><span class="dv">15</span>, <span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">%&gt;%</span> <span class="fu">sample</span>()</span>
<span id="cb508-41"><a href="stats_detected.html#cb508-41" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb508-42"><a href="stats_detected.html#cb508-42" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb508-43"><a href="stats_detected.html#cb508-43" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb508-44"><a href="stats_detected.html#cb508-44" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>),</span>
<span id="cb508-45"><a href="stats_detected.html#cb508-45" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb508-46"><a href="stats_detected.html#cb508-46" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb508-47"><a href="stats_detected.html#cb508-47" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb508-48"><a href="stats_detected.html#cb508-48" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb508-49"><a href="stats_detected.html#cb508-49" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb508-50"><a href="stats_detected.html#cb508-50" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb508-51"><a href="stats_detected.html#cb508-51" tabindex="-1"></a>    , <span class="at">title =</span> <span class="st">&quot;Priors: Height Mean Error (bias)&quot;</span></span>
<span id="cb508-52"><a href="stats_detected.html#cb508-52" tabindex="-1"></a>    , <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb508-53"><a href="stats_detected.html#cb508-53" tabindex="-1"></a>  ) </span>
<span id="cb508-54"><a href="stats_detected.html#cb508-54" tabindex="-1"></a>plt_prior1</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-378-1.png" width="1008" /></p>
</div>
<div id="fit-the-model-1" class="section level4 hasAnchor" number="7.3.2.2">
<h4><span class="header-section-number">7.3.2.2</span> Fit the model<a href="stats_detected.html#fit-the-model-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now fit the model.</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="stats_detected.html#cb509-1" tabindex="-1"></a>brms_ht_me_mod <span class="ot">=</span> brms<span class="sc">::</span><span class="fu">brm</span>(</span>
<span id="cb509-2"><a href="stats_detected.html#cb509-2" tabindex="-1"></a>  <span class="at">formula =</span> tree_height_m_me <span class="sc">~</span> </span>
<span id="cb509-3"><a href="stats_detected.html#cb509-3" tabindex="-1"></a>    <span class="co"># baseline</span></span>
<span id="cb509-4"><a href="stats_detected.html#cb509-4" tabindex="-1"></a>    <span class="dv">1</span> <span class="sc">+</span> </span>
<span id="cb509-5"><a href="stats_detected.html#cb509-5" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb509-6"><a href="stats_detected.html#cb509-6" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb509-7"><a href="stats_detected.html#cb509-7" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb509-8"><a href="stats_detected.html#cb509-8" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb509-9"><a href="stats_detected.html#cb509-9" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> study_site) <span class="sc">+</span> <span class="co"># only fitting main effects of site and not interactions</span></span>
<span id="cb509-10"><a href="stats_detected.html#cb509-10" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb509-11"><a href="stats_detected.html#cb509-11" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb509-12"><a href="stats_detected.html#cb509-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb509-13"><a href="stats_detected.html#cb509-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb509-14"><a href="stats_detected.html#cb509-14" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb509-15"><a href="stats_detected.html#cb509-15" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb509-16"><a href="stats_detected.html#cb509-16" tabindex="-1"></a>  , <span class="at">data =</span> ptcld_validation_data</span>
<span id="cb509-17"><a href="stats_detected.html#cb509-17" tabindex="-1"></a>  , <span class="at">family =</span> brms<span class="sc">::</span><span class="fu">brmsfamily</span>(<span class="at">family =</span> <span class="st">&quot;gaussian&quot;</span>)</span>
<span id="cb509-18"><a href="stats_detected.html#cb509-18" tabindex="-1"></a>  , <span class="at">iter =</span> <span class="dv">20000</span>, <span class="at">warmup =</span> <span class="dv">10000</span>, <span class="at">chains =</span> <span class="dv">4</span></span>
<span id="cb509-19"><a href="stats_detected.html#cb509-19" tabindex="-1"></a>  , <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.999</span>, <span class="at">max_treedepth =</span> <span class="dv">13</span>)</span>
<span id="cb509-20"><a href="stats_detected.html#cb509-20" tabindex="-1"></a>  , <span class="at">cores =</span> <span class="fu">round</span>(parallel<span class="sc">::</span><span class="fu">detectCores</span>()<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb509-21"><a href="stats_detected.html#cb509-21" tabindex="-1"></a>  , <span class="at">prior =</span> <span class="fu">c</span>(</span>
<span id="cb509-22"><a href="stats_detected.html#cb509-22" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y, sd_y <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb509-23"><a href="stats_detected.html#cb509-23" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(alpha, beta), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb509-24"><a href="stats_detected.html#cb509-24" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb509-25"><a href="stats_detected.html#cb509-25" tabindex="-1"></a>  )</span>
<span id="cb509-26"><a href="stats_detected.html#cb509-26" tabindex="-1"></a>  , <span class="at">stanvars =</span> stanvars_temp</span>
<span id="cb509-27"><a href="stats_detected.html#cb509-27" tabindex="-1"></a>  , <span class="at">file =</span> <span class="fu">paste0</span>(rootdir, <span class="st">&quot;/fits/brms_ht_me_mod&quot;</span>)</span>
<span id="cb509-28"><a href="stats_detected.html#cb509-28" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="qualityfiltering---interaction-2" class="section level4 hasAnchor" number="7.3.2.3">
<h4><span class="header-section-number">7.3.2.3</span> Quality:Filtering - interaction<a href="stats_detected.html#qualityfiltering---interaction-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="stats_detected.html#cb510-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb510-2"><a href="stats_detected.html#cb510-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb510-3"><a href="stats_detected.html#cb510-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb510-4"><a href="stats_detected.html#cb510-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb510-5"><a href="stats_detected.html#cb510-5" tabindex="-1"></a>      brms_ht_me_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb510-6"><a href="stats_detected.html#cb510-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb510-7"><a href="stats_detected.html#cb510-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb510-8"><a href="stats_detected.html#cb510-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb510-9"><a href="stats_detected.html#cb510-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode)</span>
<span id="cb510-10"><a href="stats_detected.html#cb510-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb510-11"><a href="stats_detected.html#cb510-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb510-12"><a href="stats_detected.html#cb510-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb510-13"><a href="stats_detected.html#cb510-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb510-14"><a href="stats_detected.html#cb510-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb510-15"><a href="stats_detected.html#cb510-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb510-16"><a href="stats_detected.html#cb510-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb510-17"><a href="stats_detected.html#cb510-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb510-18"><a href="stats_detected.html#cb510-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb510-19"><a href="stats_detected.html#cb510-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb510-20"><a href="stats_detected.html#cb510-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb510-21"><a href="stats_detected.html#cb510-21" tabindex="-1"></a>    )</span>
<span id="cb510-22"><a href="stats_detected.html#cb510-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb510-23"><a href="stats_detected.html#cb510-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb510-24"><a href="stats_detected.html#cb510-24" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb510-25"><a href="stats_detected.html#cb510-25" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb510-26"><a href="stats_detected.html#cb510-26" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb510-27"><a href="stats_detected.html#cb510-27" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb510-28"><a href="stats_detected.html#cb510-28" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb510-29"><a href="stats_detected.html#cb510-29" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb510-30"><a href="stats_detected.html#cb510-30" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb510-31"><a href="stats_detected.html#cb510-31" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb510-32"><a href="stats_detected.html#cb510-32" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb510-33"><a href="stats_detected.html#cb510-33" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_tree_height_m_me,lmt_tree_height_m_me)</span>
<span id="cb510-34"><a href="stats_detected.html#cb510-34" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb510-35"><a href="stats_detected.html#cb510-35" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb510-36"><a href="stats_detected.html#cb510-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb510-37"><a href="stats_detected.html#cb510-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb510-38"><a href="stats_detected.html#cb510-38" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb510-39"><a href="stats_detected.html#cb510-39" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Height Mean Error (m)&quot;</span></span>
<span id="cb510-40"><a href="stats_detected.html#cb510-40" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of height mean error (m) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb510-41"><a href="stats_detected.html#cb510-41" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb510-42"><a href="stats_detected.html#cb510-42" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb510-43"><a href="stats_detected.html#cb510-43" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb510-44"><a href="stats_detected.html#cb510-44" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb510-45"><a href="stats_detected.html#cb510-45" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb510-46"><a href="stats_detected.html#cb510-46" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb510-47"><a href="stats_detected.html#cb510-47" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb510-48"><a href="stats_detected.html#cb510-48" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-381-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="stats_detected.html#cb511-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb511-2"><a href="stats_detected.html#cb511-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb511-3"><a href="stats_detected.html#cb511-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb511-4"><a href="stats_detected.html#cb511-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb511-5"><a href="stats_detected.html#cb511-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(depth_maps_generation_quality,depth_maps_generation_filtering_mode)</span>
<span id="cb511-6"><a href="stats_detected.html#cb511-6" tabindex="-1"></a></span>
<span id="cb511-7"><a href="stats_detected.html#cb511-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb511-8"><a href="stats_detected.html#cb511-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(depth_maps_generation_quality)) <span class="sc">%&gt;%</span> </span>
<span id="cb511-9"><a href="stats_detected.html#cb511-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb511-10"><a href="stats_detected.html#cb511-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb511-11"><a href="stats_detected.html#cb511-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height Mean Error (m)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb511-12"><a href="stats_detected.html#cb511-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb511-13"><a href="stats_detected.html#cb511-13" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb511-14"><a href="stats_detected.html#cb511-14" tabindex="-1"></a>      , <span class="st">&quot;Height Mean Error (m)&lt;br&gt;median&quot;</span></span>
<span id="cb511-15"><a href="stats_detected.html#cb511-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb511-16"><a href="stats_detected.html#cb511-16" tabindex="-1"></a>    )</span>
<span id="cb511-17"><a href="stats_detected.html#cb511-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb511-18"><a href="stats_detected.html#cb511-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb511-19"><a href="stats_detected.html#cb511-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb511-20"><a href="stats_detected.html#cb511-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>depth_maps_generation_quality))) <span class="sc">%&gt;%</span> </span>
<span id="cb511-21"><a href="stats_detected.html#cb511-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-382">Table 7.1: </span>Height Mean Error (m)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Height Mean Error (m)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>ultra high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.26
</td>
<td style="text-align:right;">
-0.29
</td>
<td style="text-align:right;">
0.80
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.30
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.83
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.34
</td>
<td style="text-align:right;">
-0.20
</td>
<td style="text-align:right;">
0.88
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.37
</td>
<td style="text-align:right;">
-0.18
</td>
<td style="text-align:right;">
0.90
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
-0.37
</td>
<td style="text-align:right;">
0.72
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:right;">
-0.31
</td>
<td style="text-align:right;">
0.77
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.27
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
0.81
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.29
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
0.82
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>medium</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
-0.49
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.11
</td>
<td style="text-align:right;">
-0.43
</td>
<td style="text-align:right;">
0.64
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.16
</td>
<td style="text-align:right;">
-0.40
</td>
<td style="text-align:right;">
0.67
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
-0.36
</td>
<td style="text-align:right;">
0.71
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>low</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
-0.61
</td>
<td style="text-align:right;">
0.47
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
0.53
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
-0.50
</td>
<td style="text-align:right;">
0.58
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
-0.46
</td>
<td style="text-align:right;">
0.61
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>lowest</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
-0.22
</td>
<td style="text-align:right;">
-0.78
</td>
<td style="text-align:right;">
0.37
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
-0.72
</td>
<td style="text-align:right;">
0.43
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
-0.66
</td>
<td style="text-align:right;">
0.48
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.65
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequality---interaction-2" class="section level4 hasAnchor" number="7.3.2.4">
<h4><span class="header-section-number">7.3.2.4</span> Software:Quality - interaction<a href="stats_detected.html#softwarequality---interaction-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="stats_detected.html#cb512-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb512-2"><a href="stats_detected.html#cb512-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb512-3"><a href="stats_detected.html#cb512-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software) <span class="sc">%&gt;%</span> </span>
<span id="cb512-4"><a href="stats_detected.html#cb512-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb512-5"><a href="stats_detected.html#cb512-5" tabindex="-1"></a>      brms_ht_me_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb512-6"><a href="stats_detected.html#cb512-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb512-7"><a href="stats_detected.html#cb512-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb512-8"><a href="stats_detected.html#cb512-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb512-9"><a href="stats_detected.html#cb512-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software)</span>
<span id="cb512-10"><a href="stats_detected.html#cb512-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb512-11"><a href="stats_detected.html#cb512-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb512-12"><a href="stats_detected.html#cb512-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb512-13"><a href="stats_detected.html#cb512-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb512-14"><a href="stats_detected.html#cb512-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb512-15"><a href="stats_detected.html#cb512-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb512-16"><a href="stats_detected.html#cb512-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb512-17"><a href="stats_detected.html#cb512-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb512-18"><a href="stats_detected.html#cb512-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb512-19"><a href="stats_detected.html#cb512-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb512-20"><a href="stats_detected.html#cb512-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb512-21"><a href="stats_detected.html#cb512-21" tabindex="-1"></a>    )</span>
<span id="cb512-22"><a href="stats_detected.html#cb512-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb512-23"><a href="stats_detected.html#cb512-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb512-24"><a href="stats_detected.html#cb512-24" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb512-25"><a href="stats_detected.html#cb512-25" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb512-26"><a href="stats_detected.html#cb512-26" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb512-27"><a href="stats_detected.html#cb512-27" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb512-28"><a href="stats_detected.html#cb512-28" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb512-29"><a href="stats_detected.html#cb512-29" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb512-30"><a href="stats_detected.html#cb512-30" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb512-31"><a href="stats_detected.html#cb512-31" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb512-32"><a href="stats_detected.html#cb512-32" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb512-33"><a href="stats_detected.html#cb512-33" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_tree_height_m_me,lmt_tree_height_m_me)</span>
<span id="cb512-34"><a href="stats_detected.html#cb512-34" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb512-35"><a href="stats_detected.html#cb512-35" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb512-36"><a href="stats_detected.html#cb512-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb512-37"><a href="stats_detected.html#cb512-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb512-38"><a href="stats_detected.html#cb512-38" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb512-39"><a href="stats_detected.html#cb512-39" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Height Mean Error (m)&quot;</span></span>
<span id="cb512-40"><a href="stats_detected.html#cb512-40" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of height mean error (m) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb512-41"><a href="stats_detected.html#cb512-41" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb512-42"><a href="stats_detected.html#cb512-42" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb512-43"><a href="stats_detected.html#cb512-43" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb512-44"><a href="stats_detected.html#cb512-44" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb512-45"><a href="stats_detected.html#cb512-45" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb512-46"><a href="stats_detected.html#cb512-46" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb512-47"><a href="stats_detected.html#cb512-47" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb512-48"><a href="stats_detected.html#cb512-48" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-383-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="stats_detected.html#cb513-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb513-2"><a href="stats_detected.html#cb513-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb513-3"><a href="stats_detected.html#cb513-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb513-4"><a href="stats_detected.html#cb513-4" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb513-5"><a href="stats_detected.html#cb513-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb513-6"><a href="stats_detected.html#cb513-6" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb513-7"><a href="stats_detected.html#cb513-7" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb513-8"><a href="stats_detected.html#cb513-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb513-9"><a href="stats_detected.html#cb513-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span></span>
<span id="cb513-10"><a href="stats_detected.html#cb513-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_quality)</span>
<span id="cb513-11"><a href="stats_detected.html#cb513-11" tabindex="-1"></a></span>
<span id="cb513-12"><a href="stats_detected.html#cb513-12" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb513-13"><a href="stats_detected.html#cb513-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb513-14"><a href="stats_detected.html#cb513-14" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb513-15"><a href="stats_detected.html#cb513-15" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb513-16"><a href="stats_detected.html#cb513-16" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height Mean Error (m)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb513-17"><a href="stats_detected.html#cb513-17" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb513-18"><a href="stats_detected.html#cb513-18" tabindex="-1"></a>      <span class="st">&quot;quality&quot;</span></span>
<span id="cb513-19"><a href="stats_detected.html#cb513-19" tabindex="-1"></a>      , <span class="st">&quot;Height Mean Error (m)&lt;br&gt;median&quot;</span></span>
<span id="cb513-20"><a href="stats_detected.html#cb513-20" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb513-21"><a href="stats_detected.html#cb513-21" tabindex="-1"></a>    )</span>
<span id="cb513-22"><a href="stats_detected.html#cb513-22" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb513-23"><a href="stats_detected.html#cb513-23" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb513-24"><a href="stats_detected.html#cb513-24" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb513-25"><a href="stats_detected.html#cb513-25" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb513-26"><a href="stats_detected.html#cb513-26" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-384">Table 7.2: </span>Height Mean Error (m)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Height Mean Error (m)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.65
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.24
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
-0.23
</td>
<td style="text-align:right;">
-0.55
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
-0.87
</td>
<td style="text-align:right;">
-0.21
</td>
</tr>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
0.36
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.69
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
0.54
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.39
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.39
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.31
</td>
<td style="text-align:right;">
0.34
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
0.41
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
0.74
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.37
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.70
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
0.29
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
0.61
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarefiltering---interaction-2" class="section level4 hasAnchor" number="7.3.2.5">
<h4><span class="header-section-number">7.3.2.5</span> Software:Filtering - interaction<a href="stats_detected.html#softwarefiltering---interaction-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="stats_detected.html#cb514-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb514-2"><a href="stats_detected.html#cb514-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb514-3"><a href="stats_detected.html#cb514-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_filtering_mode, software) <span class="sc">%&gt;%</span> </span>
<span id="cb514-4"><a href="stats_detected.html#cb514-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb514-5"><a href="stats_detected.html#cb514-5" tabindex="-1"></a>      brms_ht_me_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb514-6"><a href="stats_detected.html#cb514-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb514-7"><a href="stats_detected.html#cb514-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb514-8"><a href="stats_detected.html#cb514-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb514-9"><a href="stats_detected.html#cb514-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb514-10"><a href="stats_detected.html#cb514-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb514-11"><a href="stats_detected.html#cb514-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb514-12"><a href="stats_detected.html#cb514-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb514-13"><a href="stats_detected.html#cb514-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb514-14"><a href="stats_detected.html#cb514-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb514-15"><a href="stats_detected.html#cb514-15" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb514-16"><a href="stats_detected.html#cb514-16" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb514-17"><a href="stats_detected.html#cb514-17" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb514-18"><a href="stats_detected.html#cb514-18" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb514-19"><a href="stats_detected.html#cb514-19" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb514-20"><a href="stats_detected.html#cb514-20" tabindex="-1"></a>    )</span>
<span id="cb514-21"><a href="stats_detected.html#cb514-21" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb514-22"><a href="stats_detected.html#cb514-22" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb514-23"><a href="stats_detected.html#cb514-23" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb514-24"><a href="stats_detected.html#cb514-24" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb514-25"><a href="stats_detected.html#cb514-25" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb514-26"><a href="stats_detected.html#cb514-26" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb514-27"><a href="stats_detected.html#cb514-27" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb514-28"><a href="stats_detected.html#cb514-28" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-29"><a href="stats_detected.html#cb514-29" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb514-30"><a href="stats_detected.html#cb514-30" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb514-31"><a href="stats_detected.html#cb514-31" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb514-32"><a href="stats_detected.html#cb514-32" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_tree_height_m_me,lmt_tree_height_m_me)</span>
<span id="cb514-33"><a href="stats_detected.html#cb514-33" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb514-34"><a href="stats_detected.html#cb514-34" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb514-35"><a href="stats_detected.html#cb514-35" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-36"><a href="stats_detected.html#cb514-36" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_filtering_mode)) <span class="sc">+</span></span>
<span id="cb514-37"><a href="stats_detected.html#cb514-37" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb514-38"><a href="stats_detected.html#cb514-38" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Height Mean Error (m)&quot;</span></span>
<span id="cb514-39"><a href="stats_detected.html#cb514-39" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of height mean error (m) with 95% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb514-40"><a href="stats_detected.html#cb514-40" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb514-41"><a href="stats_detected.html#cb514-41" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb514-42"><a href="stats_detected.html#cb514-42" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb514-43"><a href="stats_detected.html#cb514-43" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb514-44"><a href="stats_detected.html#cb514-44" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb514-45"><a href="stats_detected.html#cb514-45" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb514-46"><a href="stats_detected.html#cb514-46" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb514-47"><a href="stats_detected.html#cb514-47" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-385-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="stats_detected.html#cb515-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb515-2"><a href="stats_detected.html#cb515-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb515-3"><a href="stats_detected.html#cb515-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb515-4"><a href="stats_detected.html#cb515-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb515-5"><a href="stats_detected.html#cb515-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_filtering_mode)</span>
<span id="cb515-6"><a href="stats_detected.html#cb515-6" tabindex="-1"></a></span>
<span id="cb515-7"><a href="stats_detected.html#cb515-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb515-8"><a href="stats_detected.html#cb515-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb515-9"><a href="stats_detected.html#cb515-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb515-10"><a href="stats_detected.html#cb515-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb515-11"><a href="stats_detected.html#cb515-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height Mean Error (m)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb515-12"><a href="stats_detected.html#cb515-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb515-13"><a href="stats_detected.html#cb515-13" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb515-14"><a href="stats_detected.html#cb515-14" tabindex="-1"></a>      , <span class="st">&quot;Height Mean Error (m)&lt;br&gt;median&quot;</span></span>
<span id="cb515-15"><a href="stats_detected.html#cb515-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb515-16"><a href="stats_detected.html#cb515-16" tabindex="-1"></a>    )</span>
<span id="cb515-17"><a href="stats_detected.html#cb515-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb515-18"><a href="stats_detected.html#cb515-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb515-19"><a href="stats_detected.html#cb515-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb515-20"><a href="stats_detected.html#cb515-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb515-21"><a href="stats_detected.html#cb515-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-386">Table 7.3: </span>Height Mean Error (m)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Height Mean Error (m)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
-0.51
</td>
<td style="text-align:right;">
0.36
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.45
</td>
<td style="text-align:right;">
0.42
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
-0.40
</td>
<td style="text-align:right;">
0.48
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
-0.38
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
-0.37
</td>
<td style="text-align:right;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
-0.31
</td>
<td style="text-align:right;">
0.55
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.16
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.61
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.64
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.24
</td>
<td style="text-align:right;">
-0.20
</td>
<td style="text-align:right;">
0.69
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.27
</td>
<td style="text-align:right;">
-0.17
</td>
<td style="text-align:right;">
0.71
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequalityfiltering---interaction-2" class="section level4 hasAnchor" number="7.3.2.6">
<h4><span class="header-section-number">7.3.2.6</span> Software:Quality:Filtering - interaction<a href="stats_detected.html#softwarequalityfiltering---interaction-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="stats_detected.html#cb516-1" tabindex="-1"></a><span class="co"># get draws</span></span>
<span id="cb516-2"><a href="stats_detected.html#cb516-2" tabindex="-1"></a>fltr_sftwr_draws_temp <span class="ot">=</span></span>
<span id="cb516-3"><a href="stats_detected.html#cb516-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb516-4"><a href="stats_detected.html#cb516-4" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb516-5"><a href="stats_detected.html#cb516-5" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb516-6"><a href="stats_detected.html#cb516-6" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb516-7"><a href="stats_detected.html#cb516-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb516-8"><a href="stats_detected.html#cb516-8" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb516-9"><a href="stats_detected.html#cb516-9" tabindex="-1"></a>    brms_ht_me_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb516-10"><a href="stats_detected.html#cb516-10" tabindex="-1"></a>    <span class="co"># this part is crucial</span></span>
<span id="cb516-11"><a href="stats_detected.html#cb516-11" tabindex="-1"></a>    , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span> <span class="co"># main effects</span></span>
<span id="cb516-12"><a href="stats_detected.html#cb516-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb516-13"><a href="stats_detected.html#cb516-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb516-14"><a href="stats_detected.html#cb516-14" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb516-15"><a href="stats_detected.html#cb516-15" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb516-16"><a href="stats_detected.html#cb516-16" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb516-17"><a href="stats_detected.html#cb516-17" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb516-18"><a href="stats_detected.html#cb516-18" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb516-19"><a href="stats_detected.html#cb516-19" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb516-20"><a href="stats_detected.html#cb516-20" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb516-21"><a href="stats_detected.html#cb516-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb516-22"><a href="stats_detected.html#cb516-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb516-23"><a href="stats_detected.html#cb516-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb516-24"><a href="stats_detected.html#cb516-24" tabindex="-1"></a></span>
<span id="cb516-25"><a href="stats_detected.html#cb516-25" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb516-26"><a href="stats_detected.html#cb516-26" tabindex="-1"></a>qlty_fltr_sftwr_ht_me <span class="ot">=</span> </span>
<span id="cb516-27"><a href="stats_detected.html#cb516-27" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb516-28"><a href="stats_detected.html#cb516-28" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb516-29"><a href="stats_detected.html#cb516-29" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb516-30"><a href="stats_detected.html#cb516-30" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb516-31"><a href="stats_detected.html#cb516-31" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb516-32"><a href="stats_detected.html#cb516-32" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb516-33"><a href="stats_detected.html#cb516-33" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb516-34"><a href="stats_detected.html#cb516-34" tabindex="-1"></a>      <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb516-35"><a href="stats_detected.html#cb516-35" tabindex="-1"></a>        <span class="at">y =</span> value</span>
<span id="cb516-36"><a href="stats_detected.html#cb516-36" tabindex="-1"></a>        , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb516-37"><a href="stats_detected.html#cb516-37" tabindex="-1"></a>        , <span class="at">fill =</span> med</span>
<span id="cb516-38"><a href="stats_detected.html#cb516-38" tabindex="-1"></a>      )</span>
<span id="cb516-39"><a href="stats_detected.html#cb516-39" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb516-40"><a href="stats_detected.html#cb516-40" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb516-41"><a href="stats_detected.html#cb516-41" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb516-42"><a href="stats_detected.html#cb516-42" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb516-43"><a href="stats_detected.html#cb516-43" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb516-44"><a href="stats_detected.html#cb516-44" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb516-45"><a href="stats_detected.html#cb516-45" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb516-46"><a href="stats_detected.html#cb516-46" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb516-47"><a href="stats_detected.html#cb516-47" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb516-48"><a href="stats_detected.html#cb516-48" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb516-49"><a href="stats_detected.html#cb516-49" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb516-50"><a href="stats_detected.html#cb516-50" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_tree_height_m_me,lmt_tree_height_m_me)</span>
<span id="cb516-51"><a href="stats_detected.html#cb516-51" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb516-52"><a href="stats_detected.html#cb516-52" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb516-53"><a href="stats_detected.html#cb516-53" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb516-54"><a href="stats_detected.html#cb516-54" tabindex="-1"></a>    <span class="fu">facet_grid</span>(</span>
<span id="cb516-55"><a href="stats_detected.html#cb516-55" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb516-56"><a href="stats_detected.html#cb516-56" tabindex="-1"></a>      , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb516-57"><a href="stats_detected.html#cb516-57" tabindex="-1"></a>      <span class="co"># , switch = &quot;y&quot;</span></span>
<span id="cb516-58"><a href="stats_detected.html#cb516-58" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb516-59"><a href="stats_detected.html#cb516-59" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb516-60"><a href="stats_detected.html#cb516-60" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Height Mean Error (m)&quot;</span></span>
<span id="cb516-61"><a href="stats_detected.html#cb516-61" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of height mean error (m) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb516-62"><a href="stats_detected.html#cb516-62" tabindex="-1"></a>      <span class="co"># , caption = form_temp</span></span>
<span id="cb516-63"><a href="stats_detected.html#cb516-63" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb516-64"><a href="stats_detected.html#cb516-64" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb516-65"><a href="stats_detected.html#cb516-65" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb516-66"><a href="stats_detected.html#cb516-66" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb516-67"><a href="stats_detected.html#cb516-67" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb516-68"><a href="stats_detected.html#cb516-68" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb516-69"><a href="stats_detected.html#cb516-69" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb516-70"><a href="stats_detected.html#cb516-70" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb516-71"><a href="stats_detected.html#cb516-71" tabindex="-1"></a>      <span class="co"># , strip.placement = &quot;outside&quot;</span></span>
<span id="cb516-72"><a href="stats_detected.html#cb516-72" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb516-73"><a href="stats_detected.html#cb516-73" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb516-74"><a href="stats_detected.html#cb516-74" tabindex="-1"></a>      <span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">lwd =</span> <span class="cn">NA</span>))</span>
<span id="cb516-75"><a href="stats_detected.html#cb516-75" tabindex="-1"></a>    )</span>
<span id="cb516-76"><a href="stats_detected.html#cb516-76" tabindex="-1"></a><span class="co"># print it</span></span>
<span id="cb516-77"><a href="stats_detected.html#cb516-77" tabindex="-1"></a>qlty_fltr_sftwr_ht_me</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-387-1.png" width="1008" /></p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="stats_detected.html#cb517-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_ht_me.png&quot;</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span>)</span></code></pre></div>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="stats_detected.html#cb518-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb518-2"><a href="stats_detected.html#cb518-2" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb518-3"><a href="stats_detected.html#cb518-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb518-4"><a href="stats_detected.html#cb518-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb518-5"><a href="stats_detected.html#cb518-5" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb518-6"><a href="stats_detected.html#cb518-6" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb518-7"><a href="stats_detected.html#cb518-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb518-8"><a href="stats_detected.html#cb518-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb518-9"><a href="stats_detected.html#cb518-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(</span>
<span id="cb518-10"><a href="stats_detected.html#cb518-10" tabindex="-1"></a>    software, depth_maps_generation_quality, depth_maps_generation_filtering_mode</span>
<span id="cb518-11"><a href="stats_detected.html#cb518-11" tabindex="-1"></a>    , value, .lower, .upper</span>
<span id="cb518-12"><a href="stats_detected.html#cb518-12" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb518-13"><a href="stats_detected.html#cb518-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb518-14"><a href="stats_detected.html#cb518-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb518-15"><a href="stats_detected.html#cb518-15" tabindex="-1"></a></span>
<span id="cb518-16"><a href="stats_detected.html#cb518-16" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb518-17"><a href="stats_detected.html#cb518-17" tabindex="-1"></a>  <span class="co"># dplyr::select(-c(software)) %&gt;% </span></span>
<span id="cb518-18"><a href="stats_detected.html#cb518-18" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb518-19"><a href="stats_detected.html#cb518-19" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb518-20"><a href="stats_detected.html#cb518-20" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height Mean Error (m)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb518-21"><a href="stats_detected.html#cb518-21" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb518-22"><a href="stats_detected.html#cb518-22" tabindex="-1"></a>      <span class="st">&quot;software&quot;</span>, <span class="st">&quot;quality&quot;</span>, <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb518-23"><a href="stats_detected.html#cb518-23" tabindex="-1"></a>      , <span class="st">&quot;Height Mean Error (m)&lt;br&gt;median&quot;</span></span>
<span id="cb518-24"><a href="stats_detected.html#cb518-24" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb518-25"><a href="stats_detected.html#cb518-25" tabindex="-1"></a>    )</span>
<span id="cb518-26"><a href="stats_detected.html#cb518-26" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb518-27"><a href="stats_detected.html#cb518-27" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb518-28"><a href="stats_detected.html#cb518-28" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb518-29"><a href="stats_detected.html#cb518-29" tabindex="-1"></a>  <span class="co"># kableExtra::pack_rows(index = table(forcats::fct_inorder(table_temp$software))) %&gt;% </span></span>
<span id="cb518-30"><a href="stats_detected.html#cb518-30" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb518-31"><a href="stats_detected.html#cb518-31" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-388">Table 7.4: </span>Height Mean Error (m)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
software
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Height Mean Error (m)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
METASHAPE
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.65
</td>
<td style="text-align:right;">
-0.94
</td>
<td style="text-align:right;">
-0.36
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.55
</td>
<td style="text-align:right;">
-0.84
</td>
<td style="text-align:right;">
-0.27
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.48
</td>
<td style="text-align:right;">
-0.77
</td>
<td style="text-align:right;">
-0.20
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.49
</td>
<td style="text-align:right;">
-0.77
</td>
<td style="text-align:right;">
-0.20
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.32
</td>
<td style="text-align:right;">
-0.60
</td>
<td style="text-align:right;">
-0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.19
</td>
<td style="text-align:right;">
-0.48
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
-0.45
</td>
<td style="text-align:right;">
0.13
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.32
</td>
<td style="text-align:right;">
0.26
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.32
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.10
</td>
<td style="text-align:right;">
-0.19
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
0.41
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.16
</td>
<td style="text-align:right;">
-0.13
</td>
<td style="text-align:right;">
0.44
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
0.51
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.27
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
0.56
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.28
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.26
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
0.55
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.32
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.61
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.37
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
0.65
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
0.67
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
OPENDRONEMAP
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.07
</td>
<td style="text-align:right;">
-0.36
</td>
<td style="text-align:right;">
0.21
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
0.30
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
-0.23
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.29
</td>
<td style="text-align:right;">
0.28
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
0.36
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.14
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.42
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.30
</td>
<td style="text-align:right;">
0.28
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
-0.20
</td>
<td style="text-align:right;">
0.37
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
-0.17
</td>
<td style="text-align:right;">
0.40
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.16
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.24
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.52
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.27
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
0.55
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.30
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
0.58
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
0.63
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
0.66
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.41
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
0.69
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
PIX4D
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
0.37
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.16
</td>
<td style="text-align:right;">
-0.14
</td>
<td style="text-align:right;">
0.43
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.20
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.26
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
0.55
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.32
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.61
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
0.64
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
0.64
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.40
</td>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
0.70
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.43
</td>
<td style="text-align:right;">
0.14
</td>
<td style="text-align:right;">
0.72
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
ultra high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.39
</td>
<td style="text-align:right;">
0.10
</td>
<td style="text-align:right;">
0.68
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.44
</td>
<td style="text-align:right;">
0.14
</td>
<td style="text-align:right;">
0.71
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.47
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
0.76
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="model-height-rmse-precision" class="section level3 hasAnchor" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> Model: Height RMSE (precision)<a href="stats_detected.html#model-height-rmse-precision" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Define priors</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="stats_detected.html#cb519-1" tabindex="-1"></a><span class="co"># from Kurz: </span></span>
<span id="cb519-2"><a href="stats_detected.html#cb519-2" tabindex="-1"></a>gamma_a_b_from_omega_sigma <span class="ot">=</span> <span class="cf">function</span>(mode, sd) {</span>
<span id="cb519-3"><a href="stats_detected.html#cb519-3" tabindex="-1"></a>  <span class="cf">if</span> (mode <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;mode must be &gt; 0&quot;</span>)</span>
<span id="cb519-4"><a href="stats_detected.html#cb519-4" tabindex="-1"></a>  <span class="cf">if</span> (sd   <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;sd must be &gt; 0&quot;</span>)</span>
<span id="cb519-5"><a href="stats_detected.html#cb519-5" tabindex="-1"></a>  rate <span class="ot">=</span> (mode <span class="sc">+</span> <span class="fu">sqrt</span>(mode<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb519-6"><a href="stats_detected.html#cb519-6" tabindex="-1"></a>  shape <span class="ot">=</span> <span class="dv">1</span> <span class="sc">+</span> mode <span class="sc">*</span> rate</span>
<span id="cb519-7"><a href="stats_detected.html#cb519-7" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">shape =</span> shape, <span class="at">rate =</span> rate))</span>
<span id="cb519-8"><a href="stats_detected.html#cb519-8" tabindex="-1"></a>}</span>
<span id="cb519-9"><a href="stats_detected.html#cb519-9" tabindex="-1"></a></span>
<span id="cb519-10"><a href="stats_detected.html#cb519-10" tabindex="-1"></a>mean_y_temp <span class="ot">=</span> <span class="fu">mean</span>(ptcld_validation_data<span class="sc">$</span>tree_height_m_rmse, <span class="at">na.rm =</span> T)</span>
<span id="cb519-11"><a href="stats_detected.html#cb519-11" tabindex="-1"></a>sd_y_temp   <span class="ot">=</span> <span class="fu">sd</span>(ptcld_validation_data<span class="sc">$</span>tree_height_m_rmse, <span class="at">na.rm =</span> T)</span>
<span id="cb519-12"><a href="stats_detected.html#cb519-12" tabindex="-1"></a></span>
<span id="cb519-13"><a href="stats_detected.html#cb519-13" tabindex="-1"></a>omega_temp <span class="ot">=</span> sd_y_temp <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb519-14"><a href="stats_detected.html#cb519-14" tabindex="-1"></a>sigma_temp <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> sd_y_temp</span>
<span id="cb519-15"><a href="stats_detected.html#cb519-15" tabindex="-1"></a></span>
<span id="cb519-16"><a href="stats_detected.html#cb519-16" tabindex="-1"></a>s_r_temp <span class="ot">=</span> <span class="fu">gamma_a_b_from_omega_sigma</span>(<span class="at">mode =</span> omega_temp, <span class="at">sd =</span> sigma_temp)</span>
<span id="cb519-17"><a href="stats_detected.html#cb519-17" tabindex="-1"></a></span>
<span id="cb519-18"><a href="stats_detected.html#cb519-18" tabindex="-1"></a>stanvars_temp <span class="ot">=</span> </span>
<span id="cb519-19"><a href="stats_detected.html#cb519-19" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(mean_y_temp,    <span class="at">name =</span> <span class="st">&quot;mean_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb519-20"><a href="stats_detected.html#cb519-20" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(sd_y_temp,      <span class="at">name =</span> <span class="st">&quot;sd_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb519-21"><a href="stats_detected.html#cb519-21" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>shape, <span class="at">name =</span> <span class="st">&quot;alpha&quot;</span>) <span class="sc">+</span></span>
<span id="cb519-22"><a href="stats_detected.html#cb519-22" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>rate,  <span class="at">name =</span> <span class="st">&quot;beta&quot;</span>)</span></code></pre></div>
<div id="prior-distributions-2" class="section level4 hasAnchor" number="7.3.3.1">
<h4><span class="header-section-number">7.3.3.1</span> Prior distributions<a href="stats_detected.html#prior-distributions-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="stats_detected.html#cb520-1" tabindex="-1"></a><span class="do">#### setting priors</span></span>
<span id="cb520-2"><a href="stats_detected.html#cb520-2" tabindex="-1"></a><span class="co"># required libraries: tidyverse, tidybayes, brms, palettetown, latex2exp</span></span>
<span id="cb520-3"><a href="stats_detected.html#cb520-3" tabindex="-1"></a>priors_temp <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb520-4"><a href="stats_detected.html#cb520-4" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y_temp, sd_y_temp <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb520-5"><a href="stats_detected.html#cb520-5" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(s_r_temp<span class="sc">$</span>shape, s_r_temp<span class="sc">$</span>rate), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb520-6"><a href="stats_detected.html#cb520-6" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y_temp), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb520-7"><a href="stats_detected.html#cb520-7" tabindex="-1"></a>  )</span>
<span id="cb520-8"><a href="stats_detected.html#cb520-8" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb520-9"><a href="stats_detected.html#cb520-9" tabindex="-1"></a>plt_prior2 <span class="ot">=</span> </span>
<span id="cb520-10"><a href="stats_detected.html#cb520-10" tabindex="-1"></a>priors_temp <span class="sc">%&gt;%</span> </span>
<span id="cb520-11"><a href="stats_detected.html#cb520-11" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">parse_dist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb520-12"><a href="stats_detected.html#cb520-12" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">marginalize_lkjcorr</span>(<span class="at">K =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb520-13"><a href="stats_detected.html#cb520-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb520-14"><a href="stats_detected.html#cb520-14" tabindex="-1"></a>    .args</span>
<span id="cb520-15"><a href="stats_detected.html#cb520-15" tabindex="-1"></a>    , <span class="at">sep =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb520-16"><a href="stats_detected.html#cb520-16" tabindex="-1"></a>    , <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb520-17"><a href="stats_detected.html#cb520-17" tabindex="-1"></a>    , <span class="at">remove =</span> F</span>
<span id="cb520-18"><a href="stats_detected.html#cb520-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb520-19"><a href="stats_detected.html#cb520-19" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb520-20"><a href="stats_detected.html#cb520-20" tabindex="-1"></a>    <span class="at">distrib =</span> <span class="fu">paste0</span>(</span>
<span id="cb520-21"><a href="stats_detected.html#cb520-21" tabindex="-1"></a>      class, <span class="st">&quot; ~ &quot;</span></span>
<span id="cb520-22"><a href="stats_detected.html#cb520-22" tabindex="-1"></a>      , .dist</span>
<span id="cb520-23"><a href="stats_detected.html#cb520-23" tabindex="-1"></a>      , <span class="st">&quot;(&quot;</span></span>
<span id="cb520-24"><a href="stats_detected.html#cb520-24" tabindex="-1"></a>      , a <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">extract_numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb520-25"><a href="stats_detected.html#cb520-25" tabindex="-1"></a>      , <span class="st">&quot;,&quot;</span></span>
<span id="cb520-26"><a href="stats_detected.html#cb520-26" tabindex="-1"></a>      , b <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">extract_numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb520-27"><a href="stats_detected.html#cb520-27" tabindex="-1"></a>      , <span class="st">&quot;)&quot;</span></span>
<span id="cb520-28"><a href="stats_detected.html#cb520-28" tabindex="-1"></a>    )</span>
<span id="cb520-29"><a href="stats_detected.html#cb520-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb520-30"><a href="stats_detected.html#cb520-30" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">dist =</span> .dist, <span class="at">args =</span> .args)) <span class="sc">+</span></span>
<span id="cb520-31"><a href="stats_detected.html#cb520-31" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(distrib), <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb520-32"><a href="stats_detected.html#cb520-32" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb520-33"><a href="stats_detected.html#cb520-33" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> prior),</span>
<span id="cb520-34"><a href="stats_detected.html#cb520-34" tabindex="-1"></a>    <span class="at">n =</span> <span class="fl">10e2</span>,</span>
<span id="cb520-35"><a href="stats_detected.html#cb520-35" tabindex="-1"></a>    <span class="at">show.legend =</span> F</span>
<span id="cb520-36"><a href="stats_detected.html#cb520-36" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb520-37"><a href="stats_detected.html#cb520-37" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb520-38"><a href="stats_detected.html#cb520-38" tabindex="-1"></a>  <span class="co"># Set the fill parameter for each group</span></span>
<span id="cb520-39"><a href="stats_detected.html#cb520-39" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb520-40"><a href="stats_detected.html#cb520-40" tabindex="-1"></a>    <span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">turbo</span>(<span class="at">n=</span><span class="dv">15</span>, <span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">%&gt;%</span> <span class="fu">sample</span>()</span>
<span id="cb520-41"><a href="stats_detected.html#cb520-41" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb520-42"><a href="stats_detected.html#cb520-42" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb520-43"><a href="stats_detected.html#cb520-43" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb520-44"><a href="stats_detected.html#cb520-44" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>),</span>
<span id="cb520-45"><a href="stats_detected.html#cb520-45" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb520-46"><a href="stats_detected.html#cb520-46" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb520-47"><a href="stats_detected.html#cb520-47" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb520-48"><a href="stats_detected.html#cb520-48" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb520-49"><a href="stats_detected.html#cb520-49" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb520-50"><a href="stats_detected.html#cb520-50" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb520-51"><a href="stats_detected.html#cb520-51" tabindex="-1"></a>    , <span class="at">title =</span> <span class="st">&quot;Priors: Height RMSE (precision)&quot;</span></span>
<span id="cb520-52"><a href="stats_detected.html#cb520-52" tabindex="-1"></a>    , <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb520-53"><a href="stats_detected.html#cb520-53" tabindex="-1"></a>  ) </span>
<span id="cb520-54"><a href="stats_detected.html#cb520-54" tabindex="-1"></a>plt_prior2</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-390-1.png" width="1008" /></p>
</div>
<div id="fit-the-model-2" class="section level4 hasAnchor" number="7.3.3.2">
<h4><span class="header-section-number">7.3.3.2</span> Fit the model<a href="stats_detected.html#fit-the-model-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now fit the model.</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="stats_detected.html#cb521-1" tabindex="-1"></a>brms_ht_rmse_mod <span class="ot">=</span> brms<span class="sc">::</span><span class="fu">brm</span>(</span>
<span id="cb521-2"><a href="stats_detected.html#cb521-2" tabindex="-1"></a>  <span class="at">formula =</span> tree_height_m_rmse <span class="sc">~</span> </span>
<span id="cb521-3"><a href="stats_detected.html#cb521-3" tabindex="-1"></a>    <span class="co"># baseline</span></span>
<span id="cb521-4"><a href="stats_detected.html#cb521-4" tabindex="-1"></a>    <span class="dv">1</span> <span class="sc">+</span> </span>
<span id="cb521-5"><a href="stats_detected.html#cb521-5" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb521-6"><a href="stats_detected.html#cb521-6" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb521-7"><a href="stats_detected.html#cb521-7" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb521-8"><a href="stats_detected.html#cb521-8" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb521-9"><a href="stats_detected.html#cb521-9" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> study_site) <span class="sc">+</span> <span class="co"># only fitting main effects of site and not interactions</span></span>
<span id="cb521-10"><a href="stats_detected.html#cb521-10" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb521-11"><a href="stats_detected.html#cb521-11" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb521-12"><a href="stats_detected.html#cb521-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb521-13"><a href="stats_detected.html#cb521-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb521-14"><a href="stats_detected.html#cb521-14" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb521-15"><a href="stats_detected.html#cb521-15" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb521-16"><a href="stats_detected.html#cb521-16" tabindex="-1"></a>  , <span class="at">data =</span> ptcld_validation_data</span>
<span id="cb521-17"><a href="stats_detected.html#cb521-17" tabindex="-1"></a>  , <span class="at">family =</span> brms<span class="sc">::</span><span class="fu">brmsfamily</span>(<span class="at">family =</span> <span class="st">&quot;gaussian&quot;</span>)</span>
<span id="cb521-18"><a href="stats_detected.html#cb521-18" tabindex="-1"></a>  , <span class="at">iter =</span> <span class="dv">20000</span>, <span class="at">warmup =</span> <span class="dv">10000</span>, <span class="at">chains =</span> <span class="dv">4</span></span>
<span id="cb521-19"><a href="stats_detected.html#cb521-19" tabindex="-1"></a>  , <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.999</span>, <span class="at">max_treedepth =</span> <span class="dv">13</span>)</span>
<span id="cb521-20"><a href="stats_detected.html#cb521-20" tabindex="-1"></a>  , <span class="at">cores =</span> <span class="fu">round</span>(parallel<span class="sc">::</span><span class="fu">detectCores</span>()<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb521-21"><a href="stats_detected.html#cb521-21" tabindex="-1"></a>  , <span class="at">prior =</span> <span class="fu">c</span>(</span>
<span id="cb521-22"><a href="stats_detected.html#cb521-22" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y, sd_y <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb521-23"><a href="stats_detected.html#cb521-23" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(alpha, beta), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb521-24"><a href="stats_detected.html#cb521-24" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb521-25"><a href="stats_detected.html#cb521-25" tabindex="-1"></a>  )</span>
<span id="cb521-26"><a href="stats_detected.html#cb521-26" tabindex="-1"></a>  , <span class="at">stanvars =</span> stanvars_temp</span>
<span id="cb521-27"><a href="stats_detected.html#cb521-27" tabindex="-1"></a>  , <span class="at">file =</span> <span class="fu">paste0</span>(rootdir, <span class="st">&quot;/fits/brms_ht_rmse_mod&quot;</span>)</span>
<span id="cb521-28"><a href="stats_detected.html#cb521-28" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="qualityfiltering---interaction-3" class="section level4 hasAnchor" number="7.3.3.3">
<h4><span class="header-section-number">7.3.3.3</span> Quality:Filtering - interaction<a href="stats_detected.html#qualityfiltering---interaction-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="stats_detected.html#cb522-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb522-2"><a href="stats_detected.html#cb522-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb522-3"><a href="stats_detected.html#cb522-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb522-4"><a href="stats_detected.html#cb522-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb522-5"><a href="stats_detected.html#cb522-5" tabindex="-1"></a>      brms_ht_rmse_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb522-6"><a href="stats_detected.html#cb522-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb522-7"><a href="stats_detected.html#cb522-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb522-8"><a href="stats_detected.html#cb522-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb522-9"><a href="stats_detected.html#cb522-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode)</span>
<span id="cb522-10"><a href="stats_detected.html#cb522-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb522-11"><a href="stats_detected.html#cb522-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb522-12"><a href="stats_detected.html#cb522-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb522-13"><a href="stats_detected.html#cb522-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb522-14"><a href="stats_detected.html#cb522-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb522-15"><a href="stats_detected.html#cb522-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb522-16"><a href="stats_detected.html#cb522-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb522-17"><a href="stats_detected.html#cb522-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb522-18"><a href="stats_detected.html#cb522-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb522-19"><a href="stats_detected.html#cb522-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb522-20"><a href="stats_detected.html#cb522-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb522-21"><a href="stats_detected.html#cb522-21" tabindex="-1"></a>    )</span>
<span id="cb522-22"><a href="stats_detected.html#cb522-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb522-23"><a href="stats_detected.html#cb522-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb522-24"><a href="stats_detected.html#cb522-24" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb522-25"><a href="stats_detected.html#cb522-25" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb522-26"><a href="stats_detected.html#cb522-26" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb522-27"><a href="stats_detected.html#cb522-27" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb522-28"><a href="stats_detected.html#cb522-28" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb522-29"><a href="stats_detected.html#cb522-29" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb522-30"><a href="stats_detected.html#cb522-30" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb522-31"><a href="stats_detected.html#cb522-31" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb522-32"><a href="stats_detected.html#cb522-32" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb522-33"><a href="stats_detected.html#cb522-33" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_tree_height_m_rmse)</span>
<span id="cb522-34"><a href="stats_detected.html#cb522-34" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb522-35"><a href="stats_detected.html#cb522-35" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb522-36"><a href="stats_detected.html#cb522-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb522-37"><a href="stats_detected.html#cb522-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb522-38"><a href="stats_detected.html#cb522-38" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.02</span>,<span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb522-39"><a href="stats_detected.html#cb522-39" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb522-40"><a href="stats_detected.html#cb522-40" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Height RMSE (m)&quot;</span></span>
<span id="cb522-41"><a href="stats_detected.html#cb522-41" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of height RMSE (m) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb522-42"><a href="stats_detected.html#cb522-42" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb522-43"><a href="stats_detected.html#cb522-43" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb522-44"><a href="stats_detected.html#cb522-44" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb522-45"><a href="stats_detected.html#cb522-45" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb522-46"><a href="stats_detected.html#cb522-46" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb522-47"><a href="stats_detected.html#cb522-47" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb522-48"><a href="stats_detected.html#cb522-48" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb522-49"><a href="stats_detected.html#cb522-49" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-393-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="stats_detected.html#cb523-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb523-2"><a href="stats_detected.html#cb523-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb523-3"><a href="stats_detected.html#cb523-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb523-4"><a href="stats_detected.html#cb523-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb523-5"><a href="stats_detected.html#cb523-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(depth_maps_generation_quality,depth_maps_generation_filtering_mode)</span>
<span id="cb523-6"><a href="stats_detected.html#cb523-6" tabindex="-1"></a></span>
<span id="cb523-7"><a href="stats_detected.html#cb523-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb523-8"><a href="stats_detected.html#cb523-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(depth_maps_generation_quality)) <span class="sc">%&gt;%</span> </span>
<span id="cb523-9"><a href="stats_detected.html#cb523-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb523-10"><a href="stats_detected.html#cb523-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb523-11"><a href="stats_detected.html#cb523-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height RMSE (m)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb523-12"><a href="stats_detected.html#cb523-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb523-13"><a href="stats_detected.html#cb523-13" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb523-14"><a href="stats_detected.html#cb523-14" tabindex="-1"></a>      , <span class="st">&quot;Height RMSE (m)&lt;br&gt;median&quot;</span></span>
<span id="cb523-15"><a href="stats_detected.html#cb523-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb523-16"><a href="stats_detected.html#cb523-16" tabindex="-1"></a>    )</span>
<span id="cb523-17"><a href="stats_detected.html#cb523-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb523-18"><a href="stats_detected.html#cb523-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb523-19"><a href="stats_detected.html#cb523-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb523-20"><a href="stats_detected.html#cb523-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>depth_maps_generation_quality))) <span class="sc">%&gt;%</span> </span>
<span id="cb523-21"><a href="stats_detected.html#cb523-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-394">Table 7.5: </span>Height RMSE (m)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Height RMSE (m)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>ultra high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.58
</td>
<td style="text-align:right;">
1.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
1.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.56
</td>
<td style="text-align:right;">
1.03
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
1.04
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
1.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
1.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.56
</td>
<td style="text-align:right;">
1.03
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
1.05
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>medium</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.58
</td>
<td style="text-align:right;">
1.06
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
1.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.56
</td>
<td style="text-align:right;">
1.03
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.58
</td>
<td style="text-align:right;">
1.05
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>low</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
1.09
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.84
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
1.08
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
1.06
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
1.07
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>lowest</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.91
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
1.17
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.90
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
1.16
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
1.13
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.90
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
1.16
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="stats_detected.html#cb524-1" tabindex="-1"></a><span class="co"># first we need to define the contrasts to make</span></span>
<span id="cb524-2"><a href="stats_detected.html#cb524-2" tabindex="-1"></a>contrast_list <span class="ot">=</span> </span>
<span id="cb524-3"><a href="stats_detected.html#cb524-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb524-4"><a href="stats_detected.html#cb524-4" tabindex="-1"></a>    <span class="at">x1 =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb524-5"><a href="stats_detected.html#cb524-5" tabindex="-1"></a>    , <span class="at">x2 =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb524-6"><a href="stats_detected.html#cb524-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb524-7"><a href="stats_detected.html#cb524-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb524-8"><a href="stats_detected.html#cb524-8" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb524-9"><a href="stats_detected.html#cb524-9" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">everything</span>()</span>
<span id="cb524-10"><a href="stats_detected.html#cb524-10" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb524-11"><a href="stats_detected.html#cb524-11" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb524-12"><a href="stats_detected.html#cb524-12" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb524-13"><a href="stats_detected.html#cb524-13" tabindex="-1"></a>      )}</span>
<span id="cb524-14"><a href="stats_detected.html#cb524-14" tabindex="-1"></a>    )</span>
<span id="cb524-15"><a href="stats_detected.html#cb524-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb524-16"><a href="stats_detected.html#cb524-16" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(x1<span class="sc">&lt;</span>x2) <span class="sc">%&gt;%</span> </span>
<span id="cb524-17"><a href="stats_detected.html#cb524-17" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(x1,x2) <span class="sc">%&gt;%</span> </span>
<span id="cb524-18"><a href="stats_detected.html#cb524-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(dplyr<span class="sc">::</span><span class="fu">everything</span>(), as.character)) <span class="sc">%&gt;%</span> </span>
<span id="cb524-19"><a href="stats_detected.html#cb524-19" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">transpose</span>()</span>
<span id="cb524-20"><a href="stats_detected.html#cb524-20" tabindex="-1"></a><span class="co"># make the contrasts using compare_levels</span></span>
<span id="cb524-21"><a href="stats_detected.html#cb524-21" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb524-22"><a href="stats_detected.html#cb524-22" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb524-23"><a href="stats_detected.html#cb524-23" tabindex="-1"></a>      value</span>
<span id="cb524-24"><a href="stats_detected.html#cb524-24" tabindex="-1"></a>      , <span class="at">by =</span> depth_maps_generation_quality</span>
<span id="cb524-25"><a href="stats_detected.html#cb524-25" tabindex="-1"></a>      , <span class="at">comparison =</span> </span>
<span id="cb524-26"><a href="stats_detected.html#cb524-26" tabindex="-1"></a>        contrast_list</span>
<span id="cb524-27"><a href="stats_detected.html#cb524-27" tabindex="-1"></a>        <span class="co"># tidybayes::emmeans_comparison(&quot;revpairwise&quot;) </span></span>
<span id="cb524-28"><a href="stats_detected.html#cb524-28" tabindex="-1"></a>        <span class="co">#&quot;pairwise&quot;</span></span>
<span id="cb524-29"><a href="stats_detected.html#cb524-29" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb524-30"><a href="stats_detected.html#cb524-30" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_quality)</span>
<span id="cb524-31"><a href="stats_detected.html#cb524-31" tabindex="-1"></a></span>
<span id="cb524-32"><a href="stats_detected.html#cb524-32" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb524-33"><a href="stats_detected.html#cb524-33" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb524-34"><a href="stats_detected.html#cb524-34" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb524-35"><a href="stats_detected.html#cb524-35" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb524-36"><a href="stats_detected.html#cb524-36" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb524-37"><a href="stats_detected.html#cb524-37" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb524-38"><a href="stats_detected.html#cb524-38" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb524-39"><a href="stats_detected.html#cb524-39" tabindex="-1"></a>        <span class="st">&quot;sorter&quot;</span></span>
<span id="cb524-40"><a href="stats_detected.html#cb524-40" tabindex="-1"></a>        , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb524-41"><a href="stats_detected.html#cb524-41" tabindex="-1"></a>      )</span>
<span id="cb524-42"><a href="stats_detected.html#cb524-42" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb524-43"><a href="stats_detected.html#cb524-43" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb524-44"><a href="stats_detected.html#cb524-44" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb524-45"><a href="stats_detected.html#cb524-45" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb524-46"><a href="stats_detected.html#cb524-46" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb524-47"><a href="stats_detected.html#cb524-47" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb524-48"><a href="stats_detected.html#cb524-48" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb524-49"><a href="stats_detected.html#cb524-49" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb524-50"><a href="stats_detected.html#cb524-50" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb524-51"><a href="stats_detected.html#cb524-51" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb524-52"><a href="stats_detected.html#cb524-52" tabindex="-1"></a>      )}</span>
<span id="cb524-53"><a href="stats_detected.html#cb524-53" tabindex="-1"></a>    )</span>
<span id="cb524-54"><a href="stats_detected.html#cb524-54" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb524-55"><a href="stats_detected.html#cb524-55" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb524-56"><a href="stats_detected.html#cb524-56" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb524-57"><a href="stats_detected.html#cb524-57" tabindex="-1"></a>        <span class="fu">as.numeric</span>()</span>
<span id="cb524-58"><a href="stats_detected.html#cb524-58" tabindex="-1"></a>      )</span>
<span id="cb524-59"><a href="stats_detected.html#cb524-59" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> depth_maps_generation_filtering_mode <span class="sc">%&gt;%</span> </span>
<span id="cb524-60"><a href="stats_detected.html#cb524-60" tabindex="-1"></a>      <span class="fu">factor</span>(</span>
<span id="cb524-61"><a href="stats_detected.html#cb524-61" tabindex="-1"></a>        <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb524-62"><a href="stats_detected.html#cb524-62" tabindex="-1"></a>        , <span class="at">ordered =</span> T</span>
<span id="cb524-63"><a href="stats_detected.html#cb524-63" tabindex="-1"></a>      )</span>
<span id="cb524-64"><a href="stats_detected.html#cb524-64" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb524-65"><a href="stats_detected.html#cb524-65" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb524-66"><a href="stats_detected.html#cb524-66" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast,depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb524-67"><a href="stats_detected.html#cb524-67" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb524-68"><a href="stats_detected.html#cb524-68" tabindex="-1"></a></span>
<span id="cb524-69"><a href="stats_detected.html#cb524-69" tabindex="-1"></a><span class="co"># what?</span></span>
<span id="cb524-70"><a href="stats_detected.html#cb524-70" tabindex="-1"></a>brms_contrast_temp <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 1,600,000
## Columns: 17
## Groups: contrast, depth_maps_generation_filtering_mode [40]
## $ depth_maps_generation_filtering_mode &lt;ord&gt; aggressive, aggressive, aggressiv…
## $ .chain                               &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ .iteration                           &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ .draw                                &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11…
## $ sorter1                              &lt;ord&gt; ultra high, ultra high, ultra hig…
## $ sorter2                              &lt;ord&gt; high, high, high, high, high, hig…
## $ contrast                             &lt;fct&gt; ultra high - high, ultra high - h…
## $ value                                &lt;dbl&gt; 0.0077250485, -0.0013793018, -0.0…
## $ median_hdi_est                       &lt;dbl&gt; 0.001902155, 0.001902155, 0.00190…
## $ median_hdi_lower                     &lt;dbl&gt; -0.109832, -0.109832, -0.109832, …
## $ median_hdi_upper                     &lt;dbl&gt; 0.1195857, 0.1195857, 0.1195857, …
## $ is_gt_zero                           &lt;lgl&gt; TRUE, FALSE, FALSE, FALSE, TRUE, …
## $ pct_gt_zero                          &lt;dbl&gt; 0.5158, 0.5158, 0.5158, 0.5158, 0…
## $ pct_gt_zero_lab                      &lt;chr&gt; &quot;Pr(ultra high&gt;high)=52%&quot;, &quot;Pr(ul…
## $ pct_gt_zero_lab_sm                   &lt;chr&gt; &quot;Pr(&gt;0)=52%&quot;, &quot;Pr(&gt;0)=52%&quot;, &quot;Pr(&gt;…
## $ pct_gt_zero_lab_pos                  &lt;dbl&gt; 0.1285546, 0.1285546, 0.1285546, …
## $ sig_level                            &lt;ord&gt; &lt;80%, &lt;80%, &lt;80%, &lt;80%, &lt;80%, &lt;80…</code></pre>
<p>plot it</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="stats_detected.html#cb526-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb526-2"><a href="stats_detected.html#cb526-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb526-3"><a href="stats_detected.html#cb526-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb526-4"><a href="stats_detected.html#cb526-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb526-5"><a href="stats_detected.html#cb526-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_filtering_mode&quot;</span></span>
<span id="cb526-6"><a href="stats_detected.html#cb526-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.9</span></span>
<span id="cb526-7"><a href="stats_detected.html#cb526-7" tabindex="-1"></a>  , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.95</span>)</span>
<span id="cb526-8"><a href="stats_detected.html#cb526-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb526-9"><a href="stats_detected.html#cb526-9" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb526-10"><a href="stats_detected.html#cb526-10" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb526-11"><a href="stats_detected.html#cb526-11" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb526-12"><a href="stats_detected.html#cb526-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb526-13"><a href="stats_detected.html#cb526-13" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb526-14"><a href="stats_detected.html#cb526-14" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>)</span>
<span id="cb526-15"><a href="stats_detected.html#cb526-15" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-396-1.png" width="1008" /></p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="stats_detected.html#cb527-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb527-2"><a href="stats_detected.html#cb527-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_fltr_comp_ht_rmse.png&quot;</span></span>
<span id="cb527-3"><a href="stats_detected.html#cb527-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb527-4"><a href="stats_detected.html#cb527-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb527-5"><a href="stats_detected.html#cb527-5" tabindex="-1"></a>)</span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="stats_detected.html#cb528-1" tabindex="-1"></a>brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb528-2"><a href="stats_detected.html#cb528-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb528-3"><a href="stats_detected.html#cb528-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb528-4"><a href="stats_detected.html#cb528-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb528-5"><a href="stats_detected.html#cb528-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, depth_maps_generation_filtering_mode, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb528-6"><a href="stats_detected.html#cb528-6" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb528-7"><a href="stats_detected.html#cb528-7" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb528-8"><a href="stats_detected.html#cb528-8" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height RMSE (m)&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb528-9"><a href="stats_detected.html#cb528-9" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb528-10"><a href="stats_detected.html#cb528-10" tabindex="-1"></a>      <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb528-11"><a href="stats_detected.html#cb528-11" tabindex="-1"></a>      , <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb528-12"><a href="stats_detected.html#cb528-12" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;Height RMSE (m)&quot;</span></span>
<span id="cb528-13"><a href="stats_detected.html#cb528-13" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb528-14"><a href="stats_detected.html#cb528-14" tabindex="-1"></a>    )</span>
<span id="cb528-15"><a href="stats_detected.html#cb528-15" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb528-16"><a href="stats_detected.html#cb528-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb528-17"><a href="stats_detected.html#cb528-17" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb528-18"><a href="stats_detected.html#cb528-18" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-397">Table 7.6: </span>Height RMSE (m)<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality contrast
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>Height RMSE (m)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.14
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
-0.23
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.14
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.14
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
-0.23
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
-0.19
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
-0.19
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequality---interaction-3" class="section level4 hasAnchor" number="7.3.3.4">
<h4><span class="header-section-number">7.3.3.4</span> Software:Quality - interaction<a href="stats_detected.html#softwarequality---interaction-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="stats_detected.html#cb529-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb529-2"><a href="stats_detected.html#cb529-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb529-3"><a href="stats_detected.html#cb529-3" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb529-4"><a href="stats_detected.html#cb529-4" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb529-5"><a href="stats_detected.html#cb529-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb529-6"><a href="stats_detected.html#cb529-6" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb529-7"><a href="stats_detected.html#cb529-7" tabindex="-1"></a>      brms_ht_rmse_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb529-8"><a href="stats_detected.html#cb529-8" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb529-9"><a href="stats_detected.html#cb529-9" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb529-10"><a href="stats_detected.html#cb529-10" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb529-11"><a href="stats_detected.html#cb529-11" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software)</span>
<span id="cb529-12"><a href="stats_detected.html#cb529-12" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb529-13"><a href="stats_detected.html#cb529-13" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb529-14"><a href="stats_detected.html#cb529-14" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb529-15"><a href="stats_detected.html#cb529-15" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb529-16"><a href="stats_detected.html#cb529-16" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb529-17"><a href="stats_detected.html#cb529-17" tabindex="-1"></a>    <span class="co"># remove out-of-sample obs</span></span>
<span id="cb529-18"><a href="stats_detected.html#cb529-18" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb529-19"><a href="stats_detected.html#cb529-19" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb529-20"><a href="stats_detected.html#cb529-20" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb529-21"><a href="stats_detected.html#cb529-21" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb529-22"><a href="stats_detected.html#cb529-22" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb529-23"><a href="stats_detected.html#cb529-23" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb529-24"><a href="stats_detected.html#cb529-24" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb529-25"><a href="stats_detected.html#cb529-25" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb529-26"><a href="stats_detected.html#cb529-26" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb529-27"><a href="stats_detected.html#cb529-27" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb529-28"><a href="stats_detected.html#cb529-28" tabindex="-1"></a>    )</span>
<span id="cb529-29"><a href="stats_detected.html#cb529-29" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb529-30"><a href="stats_detected.html#cb529-30" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb529-31"><a href="stats_detected.html#cb529-31" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb529-32"><a href="stats_detected.html#cb529-32" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb529-33"><a href="stats_detected.html#cb529-33" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb529-34"><a href="stats_detected.html#cb529-34" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb529-35"><a href="stats_detected.html#cb529-35" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb529-36"><a href="stats_detected.html#cb529-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb529-37"><a href="stats_detected.html#cb529-37" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb529-38"><a href="stats_detected.html#cb529-38" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb529-39"><a href="stats_detected.html#cb529-39" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb529-40"><a href="stats_detected.html#cb529-40" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_tree_height_m_rmse)</span>
<span id="cb529-41"><a href="stats_detected.html#cb529-41" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb529-42"><a href="stats_detected.html#cb529-42" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb529-43"><a href="stats_detected.html#cb529-43" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb529-44"><a href="stats_detected.html#cb529-44" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb529-45"><a href="stats_detected.html#cb529-45" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.02</span>,<span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb529-46"><a href="stats_detected.html#cb529-46" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb529-47"><a href="stats_detected.html#cb529-47" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Height RMSE (m)&quot;</span></span>
<span id="cb529-48"><a href="stats_detected.html#cb529-48" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of height RMSE (m) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb529-49"><a href="stats_detected.html#cb529-49" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb529-50"><a href="stats_detected.html#cb529-50" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb529-51"><a href="stats_detected.html#cb529-51" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb529-52"><a href="stats_detected.html#cb529-52" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb529-53"><a href="stats_detected.html#cb529-53" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb529-54"><a href="stats_detected.html#cb529-54" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb529-55"><a href="stats_detected.html#cb529-55" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb529-56"><a href="stats_detected.html#cb529-56" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-399-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="stats_detected.html#cb530-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb530-2"><a href="stats_detected.html#cb530-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb530-3"><a href="stats_detected.html#cb530-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb530-4"><a href="stats_detected.html#cb530-4" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb530-5"><a href="stats_detected.html#cb530-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb530-6"><a href="stats_detected.html#cb530-6" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb530-7"><a href="stats_detected.html#cb530-7" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb530-8"><a href="stats_detected.html#cb530-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb530-9"><a href="stats_detected.html#cb530-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span></span>
<span id="cb530-10"><a href="stats_detected.html#cb530-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_quality)</span>
<span id="cb530-11"><a href="stats_detected.html#cb530-11" tabindex="-1"></a></span>
<span id="cb530-12"><a href="stats_detected.html#cb530-12" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb530-13"><a href="stats_detected.html#cb530-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb530-14"><a href="stats_detected.html#cb530-14" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb530-15"><a href="stats_detected.html#cb530-15" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb530-16"><a href="stats_detected.html#cb530-16" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height RMSE (m)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb530-17"><a href="stats_detected.html#cb530-17" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb530-18"><a href="stats_detected.html#cb530-18" tabindex="-1"></a>      <span class="st">&quot;quality&quot;</span></span>
<span id="cb530-19"><a href="stats_detected.html#cb530-19" tabindex="-1"></a>      , <span class="st">&quot;Height RMSE (m)&lt;br&gt;median&quot;</span></span>
<span id="cb530-20"><a href="stats_detected.html#cb530-20" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb530-21"><a href="stats_detected.html#cb530-21" tabindex="-1"></a>    )</span>
<span id="cb530-22"><a href="stats_detected.html#cb530-22" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb530-23"><a href="stats_detected.html#cb530-23" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb530-24"><a href="stats_detected.html#cb530-24" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb530-25"><a href="stats_detected.html#cb530-25" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb530-26"><a href="stats_detected.html#cb530-26" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-400">Table 7.7: </span>Height RMSE (m)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Height RMSE (m)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.77
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
0.90
</td>
<td style="text-align:right;">
0.73
</td>
<td style="text-align:right;">
1.08
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
1.06
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
1.24
</td>
</tr>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.97
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
1.01
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
0.84
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
1.02
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="stats_detected.html#cb531-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb531-2"><a href="stats_detected.html#cb531-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb531-3"><a href="stats_detected.html#cb531-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb531-4"><a href="stats_detected.html#cb531-4" tabindex="-1"></a>    value</span>
<span id="cb531-5"><a href="stats_detected.html#cb531-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_quality</span>
<span id="cb531-6"><a href="stats_detected.html#cb531-6" tabindex="-1"></a>    , <span class="at">comparison =</span> contrast_list</span>
<span id="cb531-7"><a href="stats_detected.html#cb531-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb531-8"><a href="stats_detected.html#cb531-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_quality)</span>
<span id="cb531-9"><a href="stats_detected.html#cb531-9" tabindex="-1"></a></span>
<span id="cb531-10"><a href="stats_detected.html#cb531-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb531-11"><a href="stats_detected.html#cb531-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb531-12"><a href="stats_detected.html#cb531-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb531-13"><a href="stats_detected.html#cb531-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb531-14"><a href="stats_detected.html#cb531-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb531-15"><a href="stats_detected.html#cb531-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb531-16"><a href="stats_detected.html#cb531-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb531-17"><a href="stats_detected.html#cb531-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb531-18"><a href="stats_detected.html#cb531-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb531-19"><a href="stats_detected.html#cb531-19" tabindex="-1"></a>    )</span>
<span id="cb531-20"><a href="stats_detected.html#cb531-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb531-21"><a href="stats_detected.html#cb531-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb531-22"><a href="stats_detected.html#cb531-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb531-23"><a href="stats_detected.html#cb531-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb531-24"><a href="stats_detected.html#cb531-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb531-25"><a href="stats_detected.html#cb531-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb531-26"><a href="stats_detected.html#cb531-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb531-27"><a href="stats_detected.html#cb531-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb531-28"><a href="stats_detected.html#cb531-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb531-29"><a href="stats_detected.html#cb531-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb531-30"><a href="stats_detected.html#cb531-30" tabindex="-1"></a>      )}</span>
<span id="cb531-31"><a href="stats_detected.html#cb531-31" tabindex="-1"></a>    )</span>
<span id="cb531-32"><a href="stats_detected.html#cb531-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb531-33"><a href="stats_detected.html#cb531-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb531-34"><a href="stats_detected.html#cb531-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb531-35"><a href="stats_detected.html#cb531-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb531-36"><a href="stats_detected.html#cb531-36" tabindex="-1"></a>      )</span>
<span id="cb531-37"><a href="stats_detected.html#cb531-37" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb531-38"><a href="stats_detected.html#cb531-38" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb531-39"><a href="stats_detected.html#cb531-39" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb531-40"><a href="stats_detected.html#cb531-40" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb531-41"><a href="stats_detected.html#cb531-41" tabindex="-1"></a></span>
<span id="cb531-42"><a href="stats_detected.html#cb531-42" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb531-43"><a href="stats_detected.html#cb531-43" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb531-44"><a href="stats_detected.html#cb531-44" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb531-45"><a href="stats_detected.html#cb531-45" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb531-46"><a href="stats_detected.html#cb531-46" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter1 <span class="sc">==</span> depth_maps_generation_quality)</span>
<span id="cb531-47"><a href="stats_detected.html#cb531-47" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb531-48"><a href="stats_detected.html#cb531-48" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb531-49"><a href="stats_detected.html#cb531-49" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb531-50"><a href="stats_detected.html#cb531-50" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter2 <span class="sc">==</span> depth_maps_generation_quality)</span>
<span id="cb531-51"><a href="stats_detected.html#cb531-51" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="stats_detected.html#cb532-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb532-2"><a href="stats_detected.html#cb532-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb532-3"><a href="stats_detected.html#cb532-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb532-4"><a href="stats_detected.html#cb532-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb532-5"><a href="stats_detected.html#cb532-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb532-6"><a href="stats_detected.html#cb532-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.9</span></span>
<span id="cb532-7"><a href="stats_detected.html#cb532-7" tabindex="-1"></a>  , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="fl">0.83</span>,<span class="fl">0.82</span>)</span>
<span id="cb532-8"><a href="stats_detected.html#cb532-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb532-9"><a href="stats_detected.html#cb532-9" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb532-10"><a href="stats_detected.html#cb532-10" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by software&quot;</span></span>
<span id="cb532-11"><a href="stats_detected.html#cb532-11" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb532-12"><a href="stats_detected.html#cb532-12" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-402-1.png" width="1008" /></p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="stats_detected.html#cb533-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb533-2"><a href="stats_detected.html#cb533-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_sftwr_comp_ht_rmse.png&quot;</span></span>
<span id="cb533-3"><a href="stats_detected.html#cb533-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb533-4"><a href="stats_detected.html#cb533-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb533-5"><a href="stats_detected.html#cb533-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other RMSE contrasts for publication</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="stats_detected.html#cb534-1" tabindex="-1"></a>ptchwrk_qlty_sftwr_comp_ht_rmse <span class="ot">=</span></span>
<span id="cb534-2"><a href="stats_detected.html#cb534-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb534-3"><a href="stats_detected.html#cb534-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb534-4"><a href="stats_detected.html#cb534-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb534-5"><a href="stats_detected.html#cb534-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb534-6"><a href="stats_detected.html#cb534-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.5</span></span>
<span id="cb534-7"><a href="stats_detected.html#cb534-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb534-8"><a href="stats_detected.html#cb534-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.6</span></span>
<span id="cb534-9"><a href="stats_detected.html#cb534-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb534-10"><a href="stats_detected.html#cb534-10" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb534-11"><a href="stats_detected.html#cb534-11" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span> <span class="co"># &quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb534-12"><a href="stats_detected.html#cb534-12" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;Height RMSE (m) constrast&quot;</span></span>
<span id="cb534-13"><a href="stats_detected.html#cb534-13" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb534-14"><a href="stats_detected.html#cb534-14" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb534-15"><a href="stats_detected.html#cb534-15" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span></span>
<span id="cb534-16"><a href="stats_detected.html#cb534-16" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb534-17"><a href="stats_detected.html#cb534-17" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb534-18"><a href="stats_detected.html#cb534-18" tabindex="-1"></a>    ) </span>
<span id="cb534-19"><a href="stats_detected.html#cb534-19" tabindex="-1"></a><span class="co"># ptchwrk_qlty_sftwr_comp_ht_rmse</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="stats_detected.html#cb535-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb535-2"><a href="stats_detected.html#cb535-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb535-3"><a href="stats_detected.html#cb535-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb535-4"><a href="stats_detected.html#cb535-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb535-5"><a href="stats_detected.html#cb535-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, software, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb535-6"><a href="stats_detected.html#cb535-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, contrast)</span>
<span id="cb535-7"><a href="stats_detected.html#cb535-7" tabindex="-1"></a></span>
<span id="cb535-8"><a href="stats_detected.html#cb535-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb535-9"><a href="stats_detected.html#cb535-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb535-10"><a href="stats_detected.html#cb535-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb535-11"><a href="stats_detected.html#cb535-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb535-12"><a href="stats_detected.html#cb535-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height RMSE (m)&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb535-13"><a href="stats_detected.html#cb535-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb535-14"><a href="stats_detected.html#cb535-14" tabindex="-1"></a>      <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb535-15"><a href="stats_detected.html#cb535-15" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;Height RMSE (m)&quot;</span></span>
<span id="cb535-16"><a href="stats_detected.html#cb535-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb535-17"><a href="stats_detected.html#cb535-17" tabindex="-1"></a>    )</span>
<span id="cb535-18"><a href="stats_detected.html#cb535-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb535-19"><a href="stats_detected.html#cb535-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb535-20"><a href="stats_detected.html#cb535-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb535-21"><a href="stats_detected.html#cb535-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb535-22"><a href="stats_detected.html#cb535-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-404">Table 7.8: </span>Height RMSE (m)<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality contrast
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>Height RMSE (m)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="10">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.07
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
-0.20
</td>
<td style="text-align:right;">
-0.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - lowest
</td>
<td style="text-align:right;">
-0.28
</td>
<td style="text-align:right;">
-0.36
</td>
<td style="text-align:right;">
-0.19
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:right;">
-0.13
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
-0.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - lowest
</td>
<td style="text-align:right;">
-0.29
</td>
<td style="text-align:right;">
-0.38
</td>
<td style="text-align:right;">
-0.21
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:right;">
-0.13
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
-0.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - lowest
</td>
<td style="text-align:right;">
-0.29
</td>
<td style="text-align:right;">
-0.37
</td>
<td style="text-align:right;">
-0.20
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low - lowest
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
-0.08
</td>
</tr>
<tr grouplength="10">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
-0.13
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - lowest
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - lowest
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
-0.13
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - lowest
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low - lowest
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
-0.07
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
</tbody>
</table>
</div>
<p>The contrasts above address the question “are there differences in RMSE based on dense point cloud generation quality within each software?”.</p>
<p>To address the different question of “are there differences in RMSE based on the processing software used at a given dense point cloud generation quality?” we need to utilize a different formulation of the <code>comparison</code> parameter within our call to the <code>tidybayes::compare_levels</code> function and calculate the contrast by <code>software</code> instead</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="stats_detected.html#cb536-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb536-2"><a href="stats_detected.html#cb536-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb536-3"><a href="stats_detected.html#cb536-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb536-4"><a href="stats_detected.html#cb536-4" tabindex="-1"></a>    value</span>
<span id="cb536-5"><a href="stats_detected.html#cb536-5" tabindex="-1"></a>    , <span class="at">by =</span> software</span>
<span id="cb536-6"><a href="stats_detected.html#cb536-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb536-7"><a href="stats_detected.html#cb536-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb536-8"><a href="stats_detected.html#cb536-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> software) <span class="sc">%&gt;%</span> </span>
<span id="cb536-9"><a href="stats_detected.html#cb536-9" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb536-10"><a href="stats_detected.html#cb536-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb536-11"><a href="stats_detected.html#cb536-11" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb536-12"><a href="stats_detected.html#cb536-12" tabindex="-1"></a></span>
<span id="cb536-13"><a href="stats_detected.html#cb536-13" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb536-14"><a href="stats_detected.html#cb536-14" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb536-15"><a href="stats_detected.html#cb536-15" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb536-16"><a href="stats_detected.html#cb536-16" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb536-17"><a href="stats_detected.html#cb536-17" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb536-18"><a href="stats_detected.html#cb536-18" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb536-19"><a href="stats_detected.html#cb536-19" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb536-20"><a href="stats_detected.html#cb536-20" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb536-21"><a href="stats_detected.html#cb536-21" tabindex="-1"></a>    )</span>
<span id="cb536-22"><a href="stats_detected.html#cb536-22" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb536-23"><a href="stats_detected.html#cb536-23" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb536-24"><a href="stats_detected.html#cb536-24" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb536-25"><a href="stats_detected.html#cb536-25" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb536-26"><a href="stats_detected.html#cb536-26" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb536-27"><a href="stats_detected.html#cb536-27" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb536-28"><a href="stats_detected.html#cb536-28" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(sorter1 <span class="sc">==</span> software, depth_maps_generation_quality)</span>
<span id="cb536-29"><a href="stats_detected.html#cb536-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb536-30"><a href="stats_detected.html#cb536-30" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb536-31"><a href="stats_detected.html#cb536-31" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb536-32"><a href="stats_detected.html#cb536-32" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(sorter2 <span class="sc">==</span> software, depth_maps_generation_quality)</span>
<span id="cb536-33"><a href="stats_detected.html#cb536-33" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="stats_detected.html#cb537-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb537-2"><a href="stats_detected.html#cb537-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb537-3"><a href="stats_detected.html#cb537-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb537-4"><a href="stats_detected.html#cb537-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb537-5"><a href="stats_detected.html#cb537-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_quality&quot;</span></span>
<span id="cb537-6"><a href="stats_detected.html#cb537-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.9</span></span>
<span id="cb537-7"><a href="stats_detected.html#cb537-7" tabindex="-1"></a>  , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.1</span>)</span>
<span id="cb537-8"><a href="stats_detected.html#cb537-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb537-9"><a href="stats_detected.html#cb537-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(depth_maps_generation_quality), <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb537-10"><a href="stats_detected.html#cb537-10" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb537-11"><a href="stats_detected.html#cb537-11" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb537-12"><a href="stats_detected.html#cb537-12" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb537-13"><a href="stats_detected.html#cb537-13" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb537-14"><a href="stats_detected.html#cb537-14" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb537-15"><a href="stats_detected.html#cb537-15" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">75</span>, .<span class="dv">13</span>)</span>
<span id="cb537-16"><a href="stats_detected.html#cb537-16" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb537-17"><a href="stats_detected.html#cb537-17" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb537-18"><a href="stats_detected.html#cb537-18" tabindex="-1"></a>    <span class="at">legend.key.width  =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb537-19"><a href="stats_detected.html#cb537-19" tabindex="-1"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="dv">7</span>, <span class="st">&quot;lines&quot;</span>)</span>
<span id="cb537-20"><a href="stats_detected.html#cb537-20" tabindex="-1"></a>  )))</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-406-1.png" width="1008" /></p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="stats_detected.html#cb538-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb538-2"><a href="stats_detected.html#cb538-2" tabindex="-1"></a>  <span class="st">&quot;../data/sftwr_qlty_comp_ht_rmse.png&quot;</span></span>
<span id="cb538-3"><a href="stats_detected.html#cb538-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb538-4"><a href="stats_detected.html#cb538-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb538-5"><a href="stats_detected.html#cb538-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other RMSE contrasts for publication</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="stats_detected.html#cb539-1" tabindex="-1"></a>ptchwrk_sftwr_qlty_comp_ht_rmse <span class="ot">=</span></span>
<span id="cb539-2"><a href="stats_detected.html#cb539-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb539-3"><a href="stats_detected.html#cb539-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb539-4"><a href="stats_detected.html#cb539-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;software contrast&quot;</span></span>
<span id="cb539-5"><a href="stats_detected.html#cb539-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_quality&quot;</span></span>
<span id="cb539-6"><a href="stats_detected.html#cb539-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb539-7"><a href="stats_detected.html#cb539-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb539-8"><a href="stats_detected.html#cb539-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.8</span></span>
<span id="cb539-9"><a href="stats_detected.html#cb539-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb539-10"><a href="stats_detected.html#cb539-10" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(depth_maps_generation_quality), <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb539-11"><a href="stats_detected.html#cb539-11" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb539-12"><a href="stats_detected.html#cb539-12" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb539-13"><a href="stats_detected.html#cb539-13" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;Height RMSE (m) constrast&quot;</span></span>
<span id="cb539-14"><a href="stats_detected.html#cb539-14" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb539-15"><a href="stats_detected.html#cb539-15" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb539-16"><a href="stats_detected.html#cb539-16" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;inside&quot;</span></span>
<span id="cb539-17"><a href="stats_detected.html#cb539-17" tabindex="-1"></a>      , <span class="at">legend.position.inside =</span> <span class="fu">c</span>(.<span class="dv">8</span>, .<span class="dv">10</span>)</span>
<span id="cb539-18"><a href="stats_detected.html#cb539-18" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb539-19"><a href="stats_detected.html#cb539-19" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb539-20"><a href="stats_detected.html#cb539-20" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb539-21"><a href="stats_detected.html#cb539-21" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb539-22"><a href="stats_detected.html#cb539-22" tabindex="-1"></a>      <span class="at">legend.key.width  =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb539-23"><a href="stats_detected.html#cb539-23" tabindex="-1"></a>      <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="fl">6.5</span>, <span class="st">&quot;lines&quot;</span>)</span>
<span id="cb539-24"><a href="stats_detected.html#cb539-24" tabindex="-1"></a>    )))</span>
<span id="cb539-25"><a href="stats_detected.html#cb539-25" tabindex="-1"></a><span class="co"># ptchwrk_sftwr_qlty_comp_ht_rmse</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="stats_detected.html#cb540-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb540-2"><a href="stats_detected.html#cb540-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb540-3"><a href="stats_detected.html#cb540-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb540-4"><a href="stats_detected.html#cb540-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb540-5"><a href="stats_detected.html#cb540-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, depth_maps_generation_quality, value, .lower, .upper) </span>
<span id="cb540-6"><a href="stats_detected.html#cb540-6" tabindex="-1"></a>  </span>
<span id="cb540-7"><a href="stats_detected.html#cb540-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb540-8"><a href="stats_detected.html#cb540-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(contrast)) <span class="sc">%&gt;%</span> </span>
<span id="cb540-9"><a href="stats_detected.html#cb540-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb540-10"><a href="stats_detected.html#cb540-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb540-11"><a href="stats_detected.html#cb540-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height RMSE (m)&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb540-12"><a href="stats_detected.html#cb540-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb540-13"><a href="stats_detected.html#cb540-13" tabindex="-1"></a>      <span class="st">&quot;quality&quot;</span></span>
<span id="cb540-14"><a href="stats_detected.html#cb540-14" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;Height RMSE (m)&quot;</span></span>
<span id="cb540-15"><a href="stats_detected.html#cb540-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb540-16"><a href="stats_detected.html#cb540-16" tabindex="-1"></a>    )</span>
<span id="cb540-17"><a href="stats_detected.html#cb540-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb540-18"><a href="stats_detected.html#cb540-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb540-19"><a href="stats_detected.html#cb540-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb540-20"><a href="stats_detected.html#cb540-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>contrast))) <span class="sc">%&gt;%</span> </span>
<span id="cb540-21"><a href="stats_detected.html#cb540-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-409">Table 7.9: </span>Height RMSE (m)<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>Height RMSE (m)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP - METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
0.14
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.18
</td>
<td style="text-align:right;">
-0.01
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
-0.22
</td>
<td style="text-align:right;">
-0.31
</td>
<td style="text-align:right;">
-0.13
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D - METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.13
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
-0.18
</td>
<td style="text-align:right;">
0.00
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D - OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.13
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
-0.14
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarefiltering---interaction-3" class="section level4 hasAnchor" number="7.3.3.5">
<h4><span class="header-section-number">7.3.3.5</span> Software:Filtering - interaction<a href="stats_detected.html#softwarefiltering---interaction-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="stats_detected.html#cb541-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb541-2"><a href="stats_detected.html#cb541-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb541-3"><a href="stats_detected.html#cb541-3" tabindex="-1"></a>    <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb541-4"><a href="stats_detected.html#cb541-4" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb541-5"><a href="stats_detected.html#cb541-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb541-6"><a href="stats_detected.html#cb541-6" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb541-7"><a href="stats_detected.html#cb541-7" tabindex="-1"></a>      brms_ht_rmse_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb541-8"><a href="stats_detected.html#cb541-8" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb541-9"><a href="stats_detected.html#cb541-9" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb541-10"><a href="stats_detected.html#cb541-10" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb541-11"><a href="stats_detected.html#cb541-11" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb541-12"><a href="stats_detected.html#cb541-12" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb541-13"><a href="stats_detected.html#cb541-13" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb541-14"><a href="stats_detected.html#cb541-14" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb541-15"><a href="stats_detected.html#cb541-15" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb541-16"><a href="stats_detected.html#cb541-16" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb541-17"><a href="stats_detected.html#cb541-17" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb541-18"><a href="stats_detected.html#cb541-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb541-19"><a href="stats_detected.html#cb541-19" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_filtering_mode, software)</span>
<span id="cb541-20"><a href="stats_detected.html#cb541-20" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_filtering_mode, software)</span>
<span id="cb541-21"><a href="stats_detected.html#cb541-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb541-22"><a href="stats_detected.html#cb541-22" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb541-23"><a href="stats_detected.html#cb541-23" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb541-24"><a href="stats_detected.html#cb541-24" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb541-25"><a href="stats_detected.html#cb541-25" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb541-26"><a href="stats_detected.html#cb541-26" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb541-27"><a href="stats_detected.html#cb541-27" tabindex="-1"></a>    )</span>
<span id="cb541-28"><a href="stats_detected.html#cb541-28" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb541-29"><a href="stats_detected.html#cb541-29" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb541-30"><a href="stats_detected.html#cb541-30" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb541-31"><a href="stats_detected.html#cb541-31" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb541-32"><a href="stats_detected.html#cb541-32" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb541-33"><a href="stats_detected.html#cb541-33" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb541-34"><a href="stats_detected.html#cb541-34" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb541-35"><a href="stats_detected.html#cb541-35" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb541-36"><a href="stats_detected.html#cb541-36" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb541-37"><a href="stats_detected.html#cb541-37" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb541-38"><a href="stats_detected.html#cb541-38" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb541-39"><a href="stats_detected.html#cb541-39" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_tree_height_m_rmse)</span>
<span id="cb541-40"><a href="stats_detected.html#cb541-40" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb541-41"><a href="stats_detected.html#cb541-41" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb541-42"><a href="stats_detected.html#cb541-42" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb541-43"><a href="stats_detected.html#cb541-43" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_filtering_mode)) <span class="sc">+</span></span>
<span id="cb541-44"><a href="stats_detected.html#cb541-44" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.02</span>,<span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb541-45"><a href="stats_detected.html#cb541-45" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb541-46"><a href="stats_detected.html#cb541-46" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Height RMSE (m)&quot;</span></span>
<span id="cb541-47"><a href="stats_detected.html#cb541-47" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of height RMSE (m) with 95% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb541-48"><a href="stats_detected.html#cb541-48" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb541-49"><a href="stats_detected.html#cb541-49" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb541-50"><a href="stats_detected.html#cb541-50" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb541-51"><a href="stats_detected.html#cb541-51" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb541-52"><a href="stats_detected.html#cb541-52" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb541-53"><a href="stats_detected.html#cb541-53" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb541-54"><a href="stats_detected.html#cb541-54" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb541-55"><a href="stats_detected.html#cb541-55" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-410-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="stats_detected.html#cb542-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb542-2"><a href="stats_detected.html#cb542-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb542-3"><a href="stats_detected.html#cb542-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb542-4"><a href="stats_detected.html#cb542-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb542-5"><a href="stats_detected.html#cb542-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_filtering_mode)</span>
<span id="cb542-6"><a href="stats_detected.html#cb542-6" tabindex="-1"></a></span>
<span id="cb542-7"><a href="stats_detected.html#cb542-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb542-8"><a href="stats_detected.html#cb542-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb542-9"><a href="stats_detected.html#cb542-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb542-10"><a href="stats_detected.html#cb542-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb542-11"><a href="stats_detected.html#cb542-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height RMSE (m)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb542-12"><a href="stats_detected.html#cb542-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb542-13"><a href="stats_detected.html#cb542-13" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb542-14"><a href="stats_detected.html#cb542-14" tabindex="-1"></a>      , <span class="st">&quot;Height RMSE (m)&lt;br&gt;median&quot;</span></span>
<span id="cb542-15"><a href="stats_detected.html#cb542-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb542-16"><a href="stats_detected.html#cb542-16" tabindex="-1"></a>    )</span>
<span id="cb542-17"><a href="stats_detected.html#cb542-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb542-18"><a href="stats_detected.html#cb542-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb542-19"><a href="stats_detected.html#cb542-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb542-20"><a href="stats_detected.html#cb542-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb542-21"><a href="stats_detected.html#cb542-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-411">Table 7.10: </span>Height RMSE (m)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Height RMSE (m)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
1.07
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
1.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
1.03
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.84
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
1.04
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
1.01
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
1.01
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
1.02
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
1.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
1.02
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
1.01
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
1.02
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="stats_detected.html#cb543-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb543-2"><a href="stats_detected.html#cb543-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb543-3"><a href="stats_detected.html#cb543-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb543-4"><a href="stats_detected.html#cb543-4" tabindex="-1"></a>    value</span>
<span id="cb543-5"><a href="stats_detected.html#cb543-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_filtering_mode</span>
<span id="cb543-6"><a href="stats_detected.html#cb543-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb543-7"><a href="stats_detected.html#cb543-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb543-8"><a href="stats_detected.html#cb543-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_filtering_mode)</span>
<span id="cb543-9"><a href="stats_detected.html#cb543-9" tabindex="-1"></a></span>
<span id="cb543-10"><a href="stats_detected.html#cb543-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb543-11"><a href="stats_detected.html#cb543-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb543-12"><a href="stats_detected.html#cb543-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb543-13"><a href="stats_detected.html#cb543-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb543-14"><a href="stats_detected.html#cb543-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb543-15"><a href="stats_detected.html#cb543-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb543-16"><a href="stats_detected.html#cb543-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb543-17"><a href="stats_detected.html#cb543-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb543-18"><a href="stats_detected.html#cb543-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb543-19"><a href="stats_detected.html#cb543-19" tabindex="-1"></a>    )</span>
<span id="cb543-20"><a href="stats_detected.html#cb543-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb543-21"><a href="stats_detected.html#cb543-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb543-22"><a href="stats_detected.html#cb543-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb543-23"><a href="stats_detected.html#cb543-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb543-24"><a href="stats_detected.html#cb543-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb543-25"><a href="stats_detected.html#cb543-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb543-26"><a href="stats_detected.html#cb543-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb543-27"><a href="stats_detected.html#cb543-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb543-28"><a href="stats_detected.html#cb543-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb543-29"><a href="stats_detected.html#cb543-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb543-30"><a href="stats_detected.html#cb543-30" tabindex="-1"></a>      )}</span>
<span id="cb543-31"><a href="stats_detected.html#cb543-31" tabindex="-1"></a>    )</span>
<span id="cb543-32"><a href="stats_detected.html#cb543-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb543-33"><a href="stats_detected.html#cb543-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb543-34"><a href="stats_detected.html#cb543-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb543-35"><a href="stats_detected.html#cb543-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb543-36"><a href="stats_detected.html#cb543-36" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb543-37"><a href="stats_detected.html#cb543-37" tabindex="-1"></a>      <span class="co"># re order for filtering mode</span></span>
<span id="cb543-38"><a href="stats_detected.html#cb543-38" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb543-39"><a href="stats_detected.html#cb543-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb543-40"><a href="stats_detected.html#cb543-40" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb543-41"><a href="stats_detected.html#cb543-41" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb543-42"><a href="stats_detected.html#cb543-42" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb543-43"><a href="stats_detected.html#cb543-43" tabindex="-1"></a></span>
<span id="cb543-44"><a href="stats_detected.html#cb543-44" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb543-45"><a href="stats_detected.html#cb543-45" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb543-46"><a href="stats_detected.html#cb543-46" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb543-47"><a href="stats_detected.html#cb543-47" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_filtering_mode)</span>
<span id="cb543-48"><a href="stats_detected.html#cb543-48" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter1 <span class="sc">==</span> depth_maps_generation_filtering_mode)</span>
<span id="cb543-49"><a href="stats_detected.html#cb543-49" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb543-50"><a href="stats_detected.html#cb543-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb543-51"><a href="stats_detected.html#cb543-51" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_filtering_mode)</span>
<span id="cb543-52"><a href="stats_detected.html#cb543-52" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter2 <span class="sc">==</span> depth_maps_generation_filtering_mode)</span>
<span id="cb543-53"><a href="stats_detected.html#cb543-53" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="stats_detected.html#cb544-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb544-2"><a href="stats_detected.html#cb544-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb544-3"><a href="stats_detected.html#cb544-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb544-4"><a href="stats_detected.html#cb544-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb544-5"><a href="stats_detected.html#cb544-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb544-6"><a href="stats_detected.html#cb544-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.9</span></span>
<span id="cb544-7"><a href="stats_detected.html#cb544-7" tabindex="-1"></a>  , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="fl">0.6</span>,<span class="fl">0.45</span>)</span>
<span id="cb544-8"><a href="stats_detected.html#cb544-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb544-9"><a href="stats_detected.html#cb544-9" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb544-10"><a href="stats_detected.html#cb544-10" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by software&quot;</span></span>
<span id="cb544-11"><a href="stats_detected.html#cb544-11" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb544-12"><a href="stats_detected.html#cb544-12" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-413-1.png" width="1008" /></p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="stats_detected.html#cb545-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb545-2"><a href="stats_detected.html#cb545-2" tabindex="-1"></a>  <span class="st">&quot;../data/fltr_sftwr_comp_ht_rmse.png&quot;</span></span>
<span id="cb545-3"><a href="stats_detected.html#cb545-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb545-4"><a href="stats_detected.html#cb545-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb545-5"><a href="stats_detected.html#cb545-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other RMSE contrasts for publication</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="stats_detected.html#cb546-1" tabindex="-1"></a>ptchwrk_fltr_sftwr_comp_ht_rmse <span class="ot">=</span></span>
<span id="cb546-2"><a href="stats_detected.html#cb546-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb546-3"><a href="stats_detected.html#cb546-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb546-4"><a href="stats_detected.html#cb546-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode contrast&quot;</span></span>
<span id="cb546-5"><a href="stats_detected.html#cb546-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb546-6"><a href="stats_detected.html#cb546-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb546-7"><a href="stats_detected.html#cb546-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb546-8"><a href="stats_detected.html#cb546-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.6</span></span>
<span id="cb546-9"><a href="stats_detected.html#cb546-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb546-10"><a href="stats_detected.html#cb546-10" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb546-11"><a href="stats_detected.html#cb546-11" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span> <span class="co"># &quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb546-12"><a href="stats_detected.html#cb546-12" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;Height RMSE (m) constrast&quot;</span></span>
<span id="cb546-13"><a href="stats_detected.html#cb546-13" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb546-14"><a href="stats_detected.html#cb546-14" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb546-15"><a href="stats_detected.html#cb546-15" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span></span>
<span id="cb546-16"><a href="stats_detected.html#cb546-16" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb546-17"><a href="stats_detected.html#cb546-17" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb546-18"><a href="stats_detected.html#cb546-18" tabindex="-1"></a>    ) </span>
<span id="cb546-19"><a href="stats_detected.html#cb546-19" tabindex="-1"></a><span class="co"># ptchwrk_fltr_sftwr_comp_ht_rmse</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="stats_detected.html#cb547-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb547-2"><a href="stats_detected.html#cb547-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb547-3"><a href="stats_detected.html#cb547-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb547-4"><a href="stats_detected.html#cb547-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb547-5"><a href="stats_detected.html#cb547-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, software, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb547-6"><a href="stats_detected.html#cb547-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, contrast)</span>
<span id="cb547-7"><a href="stats_detected.html#cb547-7" tabindex="-1"></a></span>
<span id="cb547-8"><a href="stats_detected.html#cb547-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb547-9"><a href="stats_detected.html#cb547-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb547-10"><a href="stats_detected.html#cb547-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb547-11"><a href="stats_detected.html#cb547-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb547-12"><a href="stats_detected.html#cb547-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height RMSE (m)&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb547-13"><a href="stats_detected.html#cb547-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb547-14"><a href="stats_detected.html#cb547-14" tabindex="-1"></a>      <span class="st">&quot;filtering contrast&quot;</span></span>
<span id="cb547-15"><a href="stats_detected.html#cb547-15" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;Height RMSE (m)&quot;</span></span>
<span id="cb547-16"><a href="stats_detected.html#cb547-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb547-17"><a href="stats_detected.html#cb547-17" tabindex="-1"></a>    )</span>
<span id="cb547-18"><a href="stats_detected.html#cb547-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb547-19"><a href="stats_detected.html#cb547-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb547-20"><a href="stats_detected.html#cb547-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb547-21"><a href="stats_detected.html#cb547-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb547-22"><a href="stats_detected.html#cb547-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-415">Table 7.11: </span>Height RMSE (m)<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering contrast
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>Height RMSE (m)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - aggressive
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - aggressive
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.01
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate - aggressive
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.09
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - aggressive
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.07
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - aggressive
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
-0.07
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate - aggressive
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.08
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequalityfiltering---interaction-3" class="section level4 hasAnchor" number="7.3.3.6">
<h4><span class="header-section-number">7.3.3.6</span> Software:Quality:Filtering - interaction<a href="stats_detected.html#softwarequalityfiltering---interaction-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="stats_detected.html#cb548-1" tabindex="-1"></a><span class="co"># get draws</span></span>
<span id="cb548-2"><a href="stats_detected.html#cb548-2" tabindex="-1"></a>fltr_sftwr_draws_temp <span class="ot">=</span></span>
<span id="cb548-3"><a href="stats_detected.html#cb548-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb548-4"><a href="stats_detected.html#cb548-4" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb548-5"><a href="stats_detected.html#cb548-5" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb548-6"><a href="stats_detected.html#cb548-6" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb548-7"><a href="stats_detected.html#cb548-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb548-8"><a href="stats_detected.html#cb548-8" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb548-9"><a href="stats_detected.html#cb548-9" tabindex="-1"></a>    brms_ht_rmse_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb548-10"><a href="stats_detected.html#cb548-10" tabindex="-1"></a>    <span class="co"># this part is crucial</span></span>
<span id="cb548-11"><a href="stats_detected.html#cb548-11" tabindex="-1"></a>    , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span> <span class="co"># main effects</span></span>
<span id="cb548-12"><a href="stats_detected.html#cb548-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb548-13"><a href="stats_detected.html#cb548-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb548-14"><a href="stats_detected.html#cb548-14" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb548-15"><a href="stats_detected.html#cb548-15" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb548-16"><a href="stats_detected.html#cb548-16" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb548-17"><a href="stats_detected.html#cb548-17" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb548-18"><a href="stats_detected.html#cb548-18" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb548-19"><a href="stats_detected.html#cb548-19" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb548-20"><a href="stats_detected.html#cb548-20" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb548-21"><a href="stats_detected.html#cb548-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb548-22"><a href="stats_detected.html#cb548-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb548-23"><a href="stats_detected.html#cb548-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb548-24"><a href="stats_detected.html#cb548-24" tabindex="-1"></a></span>
<span id="cb548-25"><a href="stats_detected.html#cb548-25" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb548-26"><a href="stats_detected.html#cb548-26" tabindex="-1"></a>qlty_fltr_sftwr_ht_rmse <span class="ot">=</span> </span>
<span id="cb548-27"><a href="stats_detected.html#cb548-27" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb548-28"><a href="stats_detected.html#cb548-28" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb548-29"><a href="stats_detected.html#cb548-29" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb548-30"><a href="stats_detected.html#cb548-30" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb548-31"><a href="stats_detected.html#cb548-31" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb548-32"><a href="stats_detected.html#cb548-32" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb548-33"><a href="stats_detected.html#cb548-33" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb548-34"><a href="stats_detected.html#cb548-34" tabindex="-1"></a>      <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb548-35"><a href="stats_detected.html#cb548-35" tabindex="-1"></a>        <span class="at">y =</span> value</span>
<span id="cb548-36"><a href="stats_detected.html#cb548-36" tabindex="-1"></a>        , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb548-37"><a href="stats_detected.html#cb548-37" tabindex="-1"></a>        , <span class="at">fill =</span> med</span>
<span id="cb548-38"><a href="stats_detected.html#cb548-38" tabindex="-1"></a>      )</span>
<span id="cb548-39"><a href="stats_detected.html#cb548-39" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb548-40"><a href="stats_detected.html#cb548-40" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb548-41"><a href="stats_detected.html#cb548-41" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb548-42"><a href="stats_detected.html#cb548-42" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb548-43"><a href="stats_detected.html#cb548-43" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb548-44"><a href="stats_detected.html#cb548-44" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb548-45"><a href="stats_detected.html#cb548-45" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb548-46"><a href="stats_detected.html#cb548-46" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb548-47"><a href="stats_detected.html#cb548-47" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb548-48"><a href="stats_detected.html#cb548-48" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb548-49"><a href="stats_detected.html#cb548-49" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb548-50"><a href="stats_detected.html#cb548-50" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_tree_height_m_rmse)</span>
<span id="cb548-51"><a href="stats_detected.html#cb548-51" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb548-52"><a href="stats_detected.html#cb548-52" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb548-53"><a href="stats_detected.html#cb548-53" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb548-54"><a href="stats_detected.html#cb548-54" tabindex="-1"></a>    <span class="fu">facet_grid</span>(</span>
<span id="cb548-55"><a href="stats_detected.html#cb548-55" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb548-56"><a href="stats_detected.html#cb548-56" tabindex="-1"></a>      , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb548-57"><a href="stats_detected.html#cb548-57" tabindex="-1"></a>      <span class="co"># , switch = &quot;y&quot;</span></span>
<span id="cb548-58"><a href="stats_detected.html#cb548-58" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb548-59"><a href="stats_detected.html#cb548-59" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.02</span>,<span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb548-60"><a href="stats_detected.html#cb548-60" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb548-61"><a href="stats_detected.html#cb548-61" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Height RMSE (m)&quot;</span></span>
<span id="cb548-62"><a href="stats_detected.html#cb548-62" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of height RMSE (m) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb548-63"><a href="stats_detected.html#cb548-63" tabindex="-1"></a>      <span class="co"># , caption = form_temp</span></span>
<span id="cb548-64"><a href="stats_detected.html#cb548-64" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb548-65"><a href="stats_detected.html#cb548-65" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb548-66"><a href="stats_detected.html#cb548-66" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb548-67"><a href="stats_detected.html#cb548-67" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb548-68"><a href="stats_detected.html#cb548-68" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb548-69"><a href="stats_detected.html#cb548-69" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb548-70"><a href="stats_detected.html#cb548-70" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb548-71"><a href="stats_detected.html#cb548-71" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb548-72"><a href="stats_detected.html#cb548-72" tabindex="-1"></a>      <span class="co"># , strip.placement = &quot;outside&quot;</span></span>
<span id="cb548-73"><a href="stats_detected.html#cb548-73" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb548-74"><a href="stats_detected.html#cb548-74" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb548-75"><a href="stats_detected.html#cb548-75" tabindex="-1"></a>      <span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">lwd =</span> <span class="cn">NA</span>))</span>
<span id="cb548-76"><a href="stats_detected.html#cb548-76" tabindex="-1"></a>    )</span>
<span id="cb548-77"><a href="stats_detected.html#cb548-77" tabindex="-1"></a><span class="co"># print it</span></span>
<span id="cb548-78"><a href="stats_detected.html#cb548-78" tabindex="-1"></a>qlty_fltr_sftwr_ht_rmse</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-416-1.png" width="1008" /></p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="stats_detected.html#cb549-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_ht_rmse.png&quot;</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span>)</span></code></pre></div>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="stats_detected.html#cb550-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb550-2"><a href="stats_detected.html#cb550-2" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb550-3"><a href="stats_detected.html#cb550-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb550-4"><a href="stats_detected.html#cb550-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb550-5"><a href="stats_detected.html#cb550-5" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb550-6"><a href="stats_detected.html#cb550-6" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb550-7"><a href="stats_detected.html#cb550-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb550-8"><a href="stats_detected.html#cb550-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb550-9"><a href="stats_detected.html#cb550-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(</span>
<span id="cb550-10"><a href="stats_detected.html#cb550-10" tabindex="-1"></a>    software, depth_maps_generation_quality, depth_maps_generation_filtering_mode</span>
<span id="cb550-11"><a href="stats_detected.html#cb550-11" tabindex="-1"></a>    , value, .lower, .upper</span>
<span id="cb550-12"><a href="stats_detected.html#cb550-12" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb550-13"><a href="stats_detected.html#cb550-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb550-14"><a href="stats_detected.html#cb550-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb550-15"><a href="stats_detected.html#cb550-15" tabindex="-1"></a></span>
<span id="cb550-16"><a href="stats_detected.html#cb550-16" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb550-17"><a href="stats_detected.html#cb550-17" tabindex="-1"></a>  <span class="co"># dplyr::select(-c(software)) %&gt;% </span></span>
<span id="cb550-18"><a href="stats_detected.html#cb550-18" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb550-19"><a href="stats_detected.html#cb550-19" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb550-20"><a href="stats_detected.html#cb550-20" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;Height RMSE (m)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb550-21"><a href="stats_detected.html#cb550-21" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb550-22"><a href="stats_detected.html#cb550-22" tabindex="-1"></a>      <span class="st">&quot;software&quot;</span>, <span class="st">&quot;quality&quot;</span>, <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb550-23"><a href="stats_detected.html#cb550-23" tabindex="-1"></a>      , <span class="st">&quot;Height RMSE (m)&lt;br&gt;median&quot;</span></span>
<span id="cb550-24"><a href="stats_detected.html#cb550-24" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb550-25"><a href="stats_detected.html#cb550-25" tabindex="-1"></a>    )</span>
<span id="cb550-26"><a href="stats_detected.html#cb550-26" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb550-27"><a href="stats_detected.html#cb550-27" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb550-28"><a href="stats_detected.html#cb550-28" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb550-29"><a href="stats_detected.html#cb550-29" tabindex="-1"></a>  <span class="co"># kableExtra::pack_rows(index = table(forcats::fct_inorder(table_temp$software))) %&gt;% </span></span>
<span id="cb550-30"><a href="stats_detected.html#cb550-30" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb550-31"><a href="stats_detected.html#cb550-31" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-417">Table 7.12: </span>Height RMSE (m)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
software
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Height RMSE (m)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
METASHAPE
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
1.10
</td>
<td style="text-align:right;">
0.92
</td>
<td style="text-align:right;">
1.27
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
1.07
</td>
<td style="text-align:right;">
0.90
</td>
<td style="text-align:right;">
1.24
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
1.04
</td>
<td style="text-align:right;">
0.86
</td>
<td style="text-align:right;">
1.21
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
1.06
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
1.23
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
1.11
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.91
</td>
<td style="text-align:right;">
0.74
</td>
<td style="text-align:right;">
1.08
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
0.71
</td>
<td style="text-align:right;">
1.05
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.89
</td>
<td style="text-align:right;">
0.72
</td>
<td style="text-align:right;">
1.06
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.95
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.93
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.77
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.77
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
0.58
</td>
<td style="text-align:right;">
0.92
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.77
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.77
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
OPENDRONEMAP
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
0.67
</td>
<td style="text-align:right;">
1.02
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
1.03
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.86
</td>
<td style="text-align:right;">
0.69
</td>
<td style="text-align:right;">
1.03
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
0.97
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
1.02
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.95
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.77
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.95
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.77
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.97
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
PIX4D
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.97
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.95
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.77
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
0.97
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.96
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
ultra high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.81
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
0.98
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
0.63
</td>
<td style="text-align:right;">
0.97
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="stats_detected.html#cb551-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb551-2"><a href="stats_detected.html#cb551-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb551-3"><a href="stats_detected.html#cb551-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb551-4"><a href="stats_detected.html#cb551-4" tabindex="-1"></a>    value</span>
<span id="cb551-5"><a href="stats_detected.html#cb551-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_filtering_mode</span>
<span id="cb551-6"><a href="stats_detected.html#cb551-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb551-7"><a href="stats_detected.html#cb551-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb551-8"><a href="stats_detected.html#cb551-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_filtering_mode)</span>
<span id="cb551-9"><a href="stats_detected.html#cb551-9" tabindex="-1"></a></span>
<span id="cb551-10"><a href="stats_detected.html#cb551-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb551-11"><a href="stats_detected.html#cb551-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb551-12"><a href="stats_detected.html#cb551-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb551-13"><a href="stats_detected.html#cb551-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb551-14"><a href="stats_detected.html#cb551-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb551-15"><a href="stats_detected.html#cb551-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb551-16"><a href="stats_detected.html#cb551-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb551-17"><a href="stats_detected.html#cb551-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb551-18"><a href="stats_detected.html#cb551-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb551-19"><a href="stats_detected.html#cb551-19" tabindex="-1"></a>    )</span>
<span id="cb551-20"><a href="stats_detected.html#cb551-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb551-21"><a href="stats_detected.html#cb551-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb551-22"><a href="stats_detected.html#cb551-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb551-23"><a href="stats_detected.html#cb551-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb551-24"><a href="stats_detected.html#cb551-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb551-25"><a href="stats_detected.html#cb551-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb551-26"><a href="stats_detected.html#cb551-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb551-27"><a href="stats_detected.html#cb551-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb551-28"><a href="stats_detected.html#cb551-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb551-29"><a href="stats_detected.html#cb551-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb551-30"><a href="stats_detected.html#cb551-30" tabindex="-1"></a>      )}</span>
<span id="cb551-31"><a href="stats_detected.html#cb551-31" tabindex="-1"></a>    )</span>
<span id="cb551-32"><a href="stats_detected.html#cb551-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb551-33"><a href="stats_detected.html#cb551-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb551-34"><a href="stats_detected.html#cb551-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb551-35"><a href="stats_detected.html#cb551-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb551-36"><a href="stats_detected.html#cb551-36" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb551-37"><a href="stats_detected.html#cb551-37" tabindex="-1"></a>      <span class="co"># re order for filtering mode</span></span>
<span id="cb551-38"><a href="stats_detected.html#cb551-38" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb551-39"><a href="stats_detected.html#cb551-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb551-40"><a href="stats_detected.html#cb551-40" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb551-41"><a href="stats_detected.html#cb551-41" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb551-42"><a href="stats_detected.html#cb551-42" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb551-43"><a href="stats_detected.html#cb551-43" tabindex="-1"></a></span>
<span id="cb551-44"><a href="stats_detected.html#cb551-44" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb551-45"><a href="stats_detected.html#cb551-45" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb551-46"><a href="stats_detected.html#cb551-46" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb551-47"><a href="stats_detected.html#cb551-47" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb551-48"><a href="stats_detected.html#cb551-48" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, sorter1<span class="sc">==</span>depth_maps_generation_filtering_mode)</span>
<span id="cb551-49"><a href="stats_detected.html#cb551-49" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb551-50"><a href="stats_detected.html#cb551-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb551-51"><a href="stats_detected.html#cb551-51" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb551-52"><a href="stats_detected.html#cb551-52" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, sorter2<span class="sc">==</span>depth_maps_generation_filtering_mode)</span>
<span id="cb551-53"><a href="stats_detected.html#cb551-53" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb551-54"><a href="stats_detected.html#cb551-54" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>())</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="stats_detected.html#cb552-1" tabindex="-1"></a>brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb552-2"><a href="stats_detected.html#cb552-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb552-3"><a href="stats_detected.html#cb552-3" tabindex="-1"></a>    <span class="at">facet =</span> <span class="fu">c</span>(<span class="st">&quot;depth_maps_generation_quality&quot;</span>, <span class="st">&quot;software&quot;</span>)</span>
<span id="cb552-4"><a href="stats_detected.html#cb552-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb552-5"><a href="stats_detected.html#cb552-5" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="dv">0</span></span>
<span id="cb552-6"><a href="stats_detected.html#cb552-6" tabindex="-1"></a>    , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>,<span class="sc">-</span><span class="fl">0.1</span>)</span>
<span id="cb552-7"><a href="stats_detected.html#cb552-7" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb552-8"><a href="stats_detected.html#cb552-8" tabindex="-1"></a>  <span class="fu">facet_grid</span>(</span>
<span id="cb552-9"><a href="stats_detected.html#cb552-9" tabindex="-1"></a>    <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb552-10"><a href="stats_detected.html#cb552-10" tabindex="-1"></a>    , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb552-11"><a href="stats_detected.html#cb552-11" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb552-12"><a href="stats_detected.html#cb552-12" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb552-13"><a href="stats_detected.html#cb552-13" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb552-14"><a href="stats_detected.html#cb552-14" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb552-15"><a href="stats_detected.html#cb552-15" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-419-1.png" width="1008" /></p>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="stats_detected.html#cb553-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb553-2"><a href="stats_detected.html#cb553-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_fltr_sftwr_comp_ht_rmse.png&quot;</span></span>
<span id="cb553-3"><a href="stats_detected.html#cb553-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb553-4"><a href="stats_detected.html#cb553-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb553-5"><a href="stats_detected.html#cb553-5" tabindex="-1"></a>)</span></code></pre></div>
<p>Export some final images for publication</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="stats_detected.html#cb554-1" tabindex="-1"></a>p1_temp <span class="ot">=</span> qlty_fltr_sftwr_ht_me <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;A: Height Mean Error (m)&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>))</span>
<span id="cb554-2"><a href="stats_detected.html#cb554-2" tabindex="-1"></a>p2_temp <span class="ot">=</span> qlty_fltr_sftwr_ht_rmse <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;B: Height RMSE (m)&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>))</span>
<span id="cb554-3"><a href="stats_detected.html#cb554-3" tabindex="-1"></a><span class="co"># export</span></span>
<span id="cb554-4"><a href="stats_detected.html#cb554-4" tabindex="-1"></a>p1_temp <span class="sc">/</span> p2_temp</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-420-1.png" width="1008" /></p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="stats_detected.html#cb555-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb555-2"><a href="stats_detected.html#cb555-2" tabindex="-1"></a>    <span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_ht_comb.jpeg&quot;</span>)</span>
<span id="cb555-3"><a href="stats_detected.html#cb555-3" tabindex="-1"></a>    , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>()</span>
<span id="cb555-4"><a href="stats_detected.html#cb555-4" tabindex="-1"></a>    , <span class="at">width =</span> <span class="fl">8.5</span></span>
<span id="cb555-5"><a href="stats_detected.html#cb555-5" tabindex="-1"></a>    , <span class="at">height =</span> <span class="dv">11</span></span>
<span id="cb555-6"><a href="stats_detected.html#cb555-6" tabindex="-1"></a>    , <span class="at">units =</span> <span class="st">&quot;in&quot;</span></span>
<span id="cb555-7"><a href="stats_detected.html#cb555-7" tabindex="-1"></a>    , <span class="at">dpi =</span> <span class="st">&quot;print&quot;</span></span>
<span id="cb555-8"><a href="stats_detected.html#cb555-8" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
</div>
<div id="tree-dbh" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Tree DBH<a href="stats_detected.html#tree-dbh" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="summary-statistics-12" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Summary Statistics<a href="stats_detected.html#summary-statistics-12" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="dbh-mean-error-bias" class="section level4 hasAnchor" number="7.4.1.1">
<h4><span class="header-section-number">7.4.1.1</span> DBH Mean Error (bias)<a href="stats_detected.html#dbh-mean-error-bias" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="stats_detected.html#cb556-1" tabindex="-1"></a>  <span class="co"># summarize data</span></span>
<span id="cb556-2"><a href="stats_detected.html#cb556-2" tabindex="-1"></a>  dta_temp <span class="ot">=</span> ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb556-3"><a href="stats_detected.html#cb556-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span></span>
<span id="cb556-4"><a href="stats_detected.html#cb556-4" tabindex="-1"></a>    <span class="co"># collapse across study site</span></span>
<span id="cb556-5"><a href="stats_detected.html#cb556-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb556-6"><a href="stats_detected.html#cb556-6" tabindex="-1"></a>      <span class="at">dbh_cm_me =</span> <span class="fu">mean</span>(dbh_cm_me, <span class="at">na.rm =</span> T)</span>
<span id="cb556-7"><a href="stats_detected.html#cb556-7" tabindex="-1"></a>      , <span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb556-8"><a href="stats_detected.html#cb556-8" tabindex="-1"></a>    )</span>
<span id="cb556-9"><a href="stats_detected.html#cb556-9" tabindex="-1"></a>  <span class="co"># set limits for color scale</span></span>
<span id="cb556-10"><a href="stats_detected.html#cb556-10" tabindex="-1"></a>  lmt_dbh_cm_me <span class="ot">=</span> <span class="fu">ceiling</span>(<span class="dv">10</span><span class="sc">*</span><span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">range</span>(dta_temp<span class="sc">$</span>dbh_cm_me, <span class="at">na.rm =</span> T))))<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb556-11"><a href="stats_detected.html#cb556-11" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_dichromat(&quot;BluetoOrange.10&quot;)(10))</span></span>
<span id="cb556-12"><a href="stats_detected.html#cb556-12" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_div_gradient()(seq(0, 1, length.out = 7)))</span></span>
<span id="cb556-13"><a href="stats_detected.html#cb556-13" tabindex="-1"></a>  <span class="co"># plot it</span></span>
<span id="cb556-14"><a href="stats_detected.html#cb556-14" tabindex="-1"></a>  dta_temp <span class="sc">%&gt;%</span> </span>
<span id="cb556-15"><a href="stats_detected.html#cb556-15" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb556-16"><a href="stats_detected.html#cb556-16" tabindex="-1"></a>      <span class="at">y =</span> depth_maps_generation_quality</span>
<span id="cb556-17"><a href="stats_detected.html#cb556-17" tabindex="-1"></a>      , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb556-18"><a href="stats_detected.html#cb556-18" tabindex="-1"></a>      , <span class="at">fill =</span> dbh_cm_me</span>
<span id="cb556-19"><a href="stats_detected.html#cb556-19" tabindex="-1"></a>      , <span class="at">label =</span> <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">comma</span>(dbh_cm_me,<span class="at">accuracy =</span> <span class="fl">0.01</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">(n=&quot;</span>, n,<span class="st">&quot;)&quot;</span>)</span>
<span id="cb556-20"><a href="stats_detected.html#cb556-20" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb556-21"><a href="stats_detected.html#cb556-21" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb556-22"><a href="stats_detected.html#cb556-22" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb556-23"><a href="stats_detected.html#cb556-23" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(software)) <span class="sc">+</span> </span>
<span id="cb556-24"><a href="stats_detected.html#cb556-24" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb556-25"><a href="stats_detected.html#cb556-25" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb556-26"><a href="stats_detected.html#cb556-26" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb556-27"><a href="stats_detected.html#cb556-27" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb556-28"><a href="stats_detected.html#cb556-28" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb556-29"><a href="stats_detected.html#cb556-29" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_dbh_cm_me,lmt_dbh_cm_me)</span>
<span id="cb556-30"><a href="stats_detected.html#cb556-30" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb556-31"><a href="stats_detected.html#cb556-31" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb556-32"><a href="stats_detected.html#cb556-32" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb556-33"><a href="stats_detected.html#cb556-33" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb556-34"><a href="stats_detected.html#cb556-34" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb556-35"><a href="stats_detected.html#cb556-35" tabindex="-1"></a>      , <span class="at">y =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb556-36"><a href="stats_detected.html#cb556-36" tabindex="-1"></a>      , <span class="at">fill =</span> <span class="st">&quot;DBH Mean Error (cm)&quot;</span></span>
<span id="cb556-37"><a href="stats_detected.html#cb556-37" tabindex="-1"></a>      , <span class="at">title =</span> <span class="st">&quot;mean DBH mean error (cm) and # of study sites&quot;</span></span>
<span id="cb556-38"><a href="stats_detected.html#cb556-38" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="fu">paste</span>(</span>
<span id="cb556-39"><a href="stats_detected.html#cb556-39" tabindex="-1"></a>        <span class="st">&quot;negative values = UAS tree DBH &lt; field tree DBH&quot;</span></span>
<span id="cb556-40"><a href="stats_detected.html#cb556-40" tabindex="-1"></a>        , <span class="st">&quot; || &quot;</span></span>
<span id="cb556-41"><a href="stats_detected.html#cb556-41" tabindex="-1"></a>        , <span class="st">&quot;positive values = UAS tree DBH &gt; field tree DBH&quot;</span></span>
<span id="cb556-42"><a href="stats_detected.html#cb556-42" tabindex="-1"></a>      )</span>
<span id="cb556-43"><a href="stats_detected.html#cb556-43" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb556-44"><a href="stats_detected.html#cb556-44" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb556-45"><a href="stats_detected.html#cb556-45" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb556-46"><a href="stats_detected.html#cb556-46" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb556-47"><a href="stats_detected.html#cb556-47" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb556-48"><a href="stats_detected.html#cb556-48" tabindex="-1"></a>      , <span class="at">panel.background =</span> <span class="fu">element_blank</span>()</span>
<span id="cb556-49"><a href="stats_detected.html#cb556-49" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb556-50"><a href="stats_detected.html#cb556-50" tabindex="-1"></a>      <span class="co"># , plot.title = element_text(hjust = 0.5)</span></span>
<span id="cb556-51"><a href="stats_detected.html#cb556-51" tabindex="-1"></a>      <span class="co"># , plot.subtitle = element_text(hjust = 0.5)</span></span>
<span id="cb556-52"><a href="stats_detected.html#cb556-52" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb556-53"><a href="stats_detected.html#cb556-53" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-422-1.png" width="1008" /></p>
</div>
<div id="dbh-rmse-precision" class="section level4 hasAnchor" number="7.4.1.2">
<h4><span class="header-section-number">7.4.1.2</span> DBH RMSE (precision)<a href="stats_detected.html#dbh-rmse-precision" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="stats_detected.html#cb557-1" tabindex="-1"></a>  <span class="co"># summarize data</span></span>
<span id="cb557-2"><a href="stats_detected.html#cb557-2" tabindex="-1"></a>  dta_temp <span class="ot">=</span> ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb557-3"><a href="stats_detected.html#cb557-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span></span>
<span id="cb557-4"><a href="stats_detected.html#cb557-4" tabindex="-1"></a>    <span class="co"># collapse across study site</span></span>
<span id="cb557-5"><a href="stats_detected.html#cb557-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb557-6"><a href="stats_detected.html#cb557-6" tabindex="-1"></a>      <span class="at">dbh_cm_rmse =</span> <span class="fu">mean</span>(dbh_cm_rmse, <span class="at">na.rm =</span> T)</span>
<span id="cb557-7"><a href="stats_detected.html#cb557-7" tabindex="-1"></a>      , <span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb557-8"><a href="stats_detected.html#cb557-8" tabindex="-1"></a>    )</span>
<span id="cb557-9"><a href="stats_detected.html#cb557-9" tabindex="-1"></a>  <span class="co"># set limits for color scale</span></span>
<span id="cb557-10"><a href="stats_detected.html#cb557-10" tabindex="-1"></a>  lmt_dbh_cm_rmse <span class="ot">=</span> <span class="fu">ceiling</span>(<span class="fl">1.02</span><span class="sc">*</span><span class="dv">10</span><span class="sc">*</span><span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">range</span>(dta_temp<span class="sc">$</span>dbh_cm_rmse, <span class="at">na.rm =</span> T))))<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb557-11"><a href="stats_detected.html#cb557-11" tabindex="-1"></a>  <span class="co"># scales::show_col(viridis::mako(n = 10, begin = 0.2, end = 0.9, direction = -1))</span></span>
<span id="cb557-12"><a href="stats_detected.html#cb557-12" tabindex="-1"></a>  <span class="co"># scales::show_col(scales::pal_div_gradient()(seq(0, 1, length.out = 7)))</span></span>
<span id="cb557-13"><a href="stats_detected.html#cb557-13" tabindex="-1"></a>  <span class="co"># plot it</span></span>
<span id="cb557-14"><a href="stats_detected.html#cb557-14" tabindex="-1"></a>  dta_temp <span class="sc">%&gt;%</span> </span>
<span id="cb557-15"><a href="stats_detected.html#cb557-15" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb557-16"><a href="stats_detected.html#cb557-16" tabindex="-1"></a>      <span class="at">y =</span> depth_maps_generation_quality</span>
<span id="cb557-17"><a href="stats_detected.html#cb557-17" tabindex="-1"></a>      , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb557-18"><a href="stats_detected.html#cb557-18" tabindex="-1"></a>      , <span class="at">fill =</span> dbh_cm_rmse</span>
<span id="cb557-19"><a href="stats_detected.html#cb557-19" tabindex="-1"></a>      , <span class="at">label =</span> <span class="fu">paste0</span>(scales<span class="sc">::</span><span class="fu">comma</span>(dbh_cm_rmse,<span class="at">accuracy =</span> <span class="fl">0.1</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">(n=&quot;</span>, n,<span class="st">&quot;)&quot;</span>)</span>
<span id="cb557-20"><a href="stats_detected.html#cb557-20" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb557-21"><a href="stats_detected.html#cb557-21" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb557-22"><a href="stats_detected.html#cb557-22" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb557-23"><a href="stats_detected.html#cb557-23" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(software)) <span class="sc">+</span> </span>
<span id="cb557-24"><a href="stats_detected.html#cb557-24" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb557-25"><a href="stats_detected.html#cb557-25" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb557-26"><a href="stats_detected.html#cb557-26" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb557-27"><a href="stats_detected.html#cb557-27" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb557-28"><a href="stats_detected.html#cb557-28" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb557-29"><a href="stats_detected.html#cb557-29" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_dbh_cm_rmse)</span>
<span id="cb557-30"><a href="stats_detected.html#cb557-30" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb557-31"><a href="stats_detected.html#cb557-31" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb557-32"><a href="stats_detected.html#cb557-32" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb557-33"><a href="stats_detected.html#cb557-33" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb557-34"><a href="stats_detected.html#cb557-34" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb557-35"><a href="stats_detected.html#cb557-35" tabindex="-1"></a>      , <span class="at">y =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb557-36"><a href="stats_detected.html#cb557-36" tabindex="-1"></a>      , <span class="at">fill =</span> <span class="st">&quot;DBH RMSE (cm)&quot;</span></span>
<span id="cb557-37"><a href="stats_detected.html#cb557-37" tabindex="-1"></a>      , <span class="at">title =</span> <span class="st">&quot;mean DBH RMSE (cm) and # of study sites&quot;</span></span>
<span id="cb557-38"><a href="stats_detected.html#cb557-38" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb557-39"><a href="stats_detected.html#cb557-39" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb557-40"><a href="stats_detected.html#cb557-40" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb557-41"><a href="stats_detected.html#cb557-41" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb557-42"><a href="stats_detected.html#cb557-42" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb557-43"><a href="stats_detected.html#cb557-43" tabindex="-1"></a>      , <span class="at">panel.background =</span> <span class="fu">element_blank</span>()</span>
<span id="cb557-44"><a href="stats_detected.html#cb557-44" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb557-45"><a href="stats_detected.html#cb557-45" tabindex="-1"></a>      <span class="co"># , plot.title = element_text(hjust = 0.5)</span></span>
<span id="cb557-46"><a href="stats_detected.html#cb557-46" tabindex="-1"></a>      <span class="co"># , plot.subtitle = element_text(hjust = 0.5)</span></span>
<span id="cb557-47"><a href="stats_detected.html#cb557-47" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb557-48"><a href="stats_detected.html#cb557-48" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-423-1.png" width="1008" /></p>
</div>
</div>
<div id="model-dbh-mean-error-bias" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Model: DBH Mean Error (bias)<a href="stats_detected.html#model-dbh-mean-error-bias" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Define priors</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="stats_detected.html#cb558-1" tabindex="-1"></a><span class="co"># from Kurz: </span></span>
<span id="cb558-2"><a href="stats_detected.html#cb558-2" tabindex="-1"></a>gamma_a_b_from_omega_sigma <span class="ot">=</span> <span class="cf">function</span>(mode, sd) {</span>
<span id="cb558-3"><a href="stats_detected.html#cb558-3" tabindex="-1"></a>  <span class="cf">if</span> (mode <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;mode must be &gt; 0&quot;</span>)</span>
<span id="cb558-4"><a href="stats_detected.html#cb558-4" tabindex="-1"></a>  <span class="cf">if</span> (sd   <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;sd must be &gt; 0&quot;</span>)</span>
<span id="cb558-5"><a href="stats_detected.html#cb558-5" tabindex="-1"></a>  rate <span class="ot">=</span> (mode <span class="sc">+</span> <span class="fu">sqrt</span>(mode<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb558-6"><a href="stats_detected.html#cb558-6" tabindex="-1"></a>  shape <span class="ot">=</span> <span class="dv">1</span> <span class="sc">+</span> mode <span class="sc">*</span> rate</span>
<span id="cb558-7"><a href="stats_detected.html#cb558-7" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">shape =</span> shape, <span class="at">rate =</span> rate))</span>
<span id="cb558-8"><a href="stats_detected.html#cb558-8" tabindex="-1"></a>}</span>
<span id="cb558-9"><a href="stats_detected.html#cb558-9" tabindex="-1"></a></span>
<span id="cb558-10"><a href="stats_detected.html#cb558-10" tabindex="-1"></a>mean_y_temp <span class="ot">=</span> <span class="fu">mean</span>(ptcld_validation_data<span class="sc">$</span>dbh_cm_me, <span class="at">na.rm =</span> T)</span>
<span id="cb558-11"><a href="stats_detected.html#cb558-11" tabindex="-1"></a>sd_y_temp   <span class="ot">=</span> <span class="fu">sd</span>(ptcld_validation_data<span class="sc">$</span>dbh_cm_me, <span class="at">na.rm =</span> T)</span>
<span id="cb558-12"><a href="stats_detected.html#cb558-12" tabindex="-1"></a></span>
<span id="cb558-13"><a href="stats_detected.html#cb558-13" tabindex="-1"></a>omega_temp <span class="ot">=</span> sd_y_temp <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb558-14"><a href="stats_detected.html#cb558-14" tabindex="-1"></a>sigma_temp <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> sd_y_temp</span>
<span id="cb558-15"><a href="stats_detected.html#cb558-15" tabindex="-1"></a></span>
<span id="cb558-16"><a href="stats_detected.html#cb558-16" tabindex="-1"></a>s_r_temp <span class="ot">=</span> <span class="fu">gamma_a_b_from_omega_sigma</span>(<span class="at">mode =</span> omega_temp, <span class="at">sd =</span> sigma_temp)</span>
<span id="cb558-17"><a href="stats_detected.html#cb558-17" tabindex="-1"></a></span>
<span id="cb558-18"><a href="stats_detected.html#cb558-18" tabindex="-1"></a>stanvars_temp <span class="ot">=</span> </span>
<span id="cb558-19"><a href="stats_detected.html#cb558-19" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(mean_y_temp,    <span class="at">name =</span> <span class="st">&quot;mean_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb558-20"><a href="stats_detected.html#cb558-20" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(sd_y_temp,      <span class="at">name =</span> <span class="st">&quot;sd_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb558-21"><a href="stats_detected.html#cb558-21" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>shape, <span class="at">name =</span> <span class="st">&quot;alpha&quot;</span>) <span class="sc">+</span></span>
<span id="cb558-22"><a href="stats_detected.html#cb558-22" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>rate,  <span class="at">name =</span> <span class="st">&quot;beta&quot;</span>)</span></code></pre></div>
<div id="prior-distributions-3" class="section level4 hasAnchor" number="7.4.2.1">
<h4><span class="header-section-number">7.4.2.1</span> Prior distributions<a href="stats_detected.html#prior-distributions-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="stats_detected.html#cb559-1" tabindex="-1"></a><span class="do">#### setting priors</span></span>
<span id="cb559-2"><a href="stats_detected.html#cb559-2" tabindex="-1"></a><span class="co"># required libraries: tidyverse, tidybayes, brms, palettetown, latex2exp</span></span>
<span id="cb559-3"><a href="stats_detected.html#cb559-3" tabindex="-1"></a>priors_temp <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb559-4"><a href="stats_detected.html#cb559-4" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y_temp, sd_y_temp <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb559-5"><a href="stats_detected.html#cb559-5" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(s_r_temp<span class="sc">$</span>shape, s_r_temp<span class="sc">$</span>rate), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb559-6"><a href="stats_detected.html#cb559-6" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y_temp), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb559-7"><a href="stats_detected.html#cb559-7" tabindex="-1"></a>  )</span>
<span id="cb559-8"><a href="stats_detected.html#cb559-8" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb559-9"><a href="stats_detected.html#cb559-9" tabindex="-1"></a>plt_prior3 <span class="ot">=</span></span>
<span id="cb559-10"><a href="stats_detected.html#cb559-10" tabindex="-1"></a>priors_temp <span class="sc">%&gt;%</span> </span>
<span id="cb559-11"><a href="stats_detected.html#cb559-11" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">parse_dist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb559-12"><a href="stats_detected.html#cb559-12" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">marginalize_lkjcorr</span>(<span class="at">K =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb559-13"><a href="stats_detected.html#cb559-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb559-14"><a href="stats_detected.html#cb559-14" tabindex="-1"></a>    .args</span>
<span id="cb559-15"><a href="stats_detected.html#cb559-15" tabindex="-1"></a>    , <span class="at">sep =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb559-16"><a href="stats_detected.html#cb559-16" tabindex="-1"></a>    , <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb559-17"><a href="stats_detected.html#cb559-17" tabindex="-1"></a>    , <span class="at">remove =</span> F</span>
<span id="cb559-18"><a href="stats_detected.html#cb559-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb559-19"><a href="stats_detected.html#cb559-19" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb559-20"><a href="stats_detected.html#cb559-20" tabindex="-1"></a>    <span class="at">distrib =</span> <span class="fu">paste0</span>(</span>
<span id="cb559-21"><a href="stats_detected.html#cb559-21" tabindex="-1"></a>      class, <span class="st">&quot; ~ &quot;</span></span>
<span id="cb559-22"><a href="stats_detected.html#cb559-22" tabindex="-1"></a>      , .dist</span>
<span id="cb559-23"><a href="stats_detected.html#cb559-23" tabindex="-1"></a>      , <span class="st">&quot;(&quot;</span></span>
<span id="cb559-24"><a href="stats_detected.html#cb559-24" tabindex="-1"></a>      , a <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">extract_numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb559-25"><a href="stats_detected.html#cb559-25" tabindex="-1"></a>      , <span class="st">&quot;,&quot;</span></span>
<span id="cb559-26"><a href="stats_detected.html#cb559-26" tabindex="-1"></a>      , b <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">extract_numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb559-27"><a href="stats_detected.html#cb559-27" tabindex="-1"></a>      , <span class="st">&quot;)&quot;</span></span>
<span id="cb559-28"><a href="stats_detected.html#cb559-28" tabindex="-1"></a>    )</span>
<span id="cb559-29"><a href="stats_detected.html#cb559-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb559-30"><a href="stats_detected.html#cb559-30" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">dist =</span> .dist, <span class="at">args =</span> .args)) <span class="sc">+</span></span>
<span id="cb559-31"><a href="stats_detected.html#cb559-31" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(distrib), <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb559-32"><a href="stats_detected.html#cb559-32" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb559-33"><a href="stats_detected.html#cb559-33" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> prior),</span>
<span id="cb559-34"><a href="stats_detected.html#cb559-34" tabindex="-1"></a>    <span class="at">n =</span> <span class="fl">10e2</span>,</span>
<span id="cb559-35"><a href="stats_detected.html#cb559-35" tabindex="-1"></a>    <span class="at">show.legend =</span> F</span>
<span id="cb559-36"><a href="stats_detected.html#cb559-36" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb559-37"><a href="stats_detected.html#cb559-37" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb559-38"><a href="stats_detected.html#cb559-38" tabindex="-1"></a>  <span class="co"># Set the fill parameter for each group</span></span>
<span id="cb559-39"><a href="stats_detected.html#cb559-39" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb559-40"><a href="stats_detected.html#cb559-40" tabindex="-1"></a>    <span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">turbo</span>(<span class="at">n=</span><span class="dv">15</span>, <span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">%&gt;%</span> <span class="fu">sample</span>()</span>
<span id="cb559-41"><a href="stats_detected.html#cb559-41" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb559-42"><a href="stats_detected.html#cb559-42" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb559-43"><a href="stats_detected.html#cb559-43" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb559-44"><a href="stats_detected.html#cb559-44" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>),</span>
<span id="cb559-45"><a href="stats_detected.html#cb559-45" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb559-46"><a href="stats_detected.html#cb559-46" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb559-47"><a href="stats_detected.html#cb559-47" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb559-48"><a href="stats_detected.html#cb559-48" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb559-49"><a href="stats_detected.html#cb559-49" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb559-50"><a href="stats_detected.html#cb559-50" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb559-51"><a href="stats_detected.html#cb559-51" tabindex="-1"></a>    , <span class="at">title =</span> <span class="st">&quot;Priors: DBH Mean Error (bias)&quot;</span></span>
<span id="cb559-52"><a href="stats_detected.html#cb559-52" tabindex="-1"></a>    , <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb559-53"><a href="stats_detected.html#cb559-53" tabindex="-1"></a>  ) </span>
<span id="cb559-54"><a href="stats_detected.html#cb559-54" tabindex="-1"></a>plt_prior3</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-425-1.png" width="1008" /></p>
</div>
<div id="fit-the-model-3" class="section level4 hasAnchor" number="7.4.2.2">
<h4><span class="header-section-number">7.4.2.2</span> Fit the model<a href="stats_detected.html#fit-the-model-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now fit the model.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="stats_detected.html#cb560-1" tabindex="-1"></a>brms_dbh_me_mod <span class="ot">=</span> brms<span class="sc">::</span><span class="fu">brm</span>(</span>
<span id="cb560-2"><a href="stats_detected.html#cb560-2" tabindex="-1"></a>  <span class="at">formula =</span> dbh_cm_me <span class="sc">~</span> </span>
<span id="cb560-3"><a href="stats_detected.html#cb560-3" tabindex="-1"></a>    <span class="co"># baseline</span></span>
<span id="cb560-4"><a href="stats_detected.html#cb560-4" tabindex="-1"></a>    <span class="dv">1</span> <span class="sc">+</span> </span>
<span id="cb560-5"><a href="stats_detected.html#cb560-5" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb560-6"><a href="stats_detected.html#cb560-6" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb560-7"><a href="stats_detected.html#cb560-7" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb560-8"><a href="stats_detected.html#cb560-8" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb560-9"><a href="stats_detected.html#cb560-9" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> study_site) <span class="sc">+</span> <span class="co"># only fitting main effects of site and not interactions</span></span>
<span id="cb560-10"><a href="stats_detected.html#cb560-10" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb560-11"><a href="stats_detected.html#cb560-11" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb560-12"><a href="stats_detected.html#cb560-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb560-13"><a href="stats_detected.html#cb560-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb560-14"><a href="stats_detected.html#cb560-14" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb560-15"><a href="stats_detected.html#cb560-15" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb560-16"><a href="stats_detected.html#cb560-16" tabindex="-1"></a>  , <span class="at">data =</span> ptcld_validation_data</span>
<span id="cb560-17"><a href="stats_detected.html#cb560-17" tabindex="-1"></a>  , <span class="at">family =</span> brms<span class="sc">::</span><span class="fu">brmsfamily</span>(<span class="at">family =</span> <span class="st">&quot;gaussian&quot;</span>)</span>
<span id="cb560-18"><a href="stats_detected.html#cb560-18" tabindex="-1"></a>  , <span class="at">iter =</span> <span class="dv">20000</span>, <span class="at">warmup =</span> <span class="dv">10000</span>, <span class="at">chains =</span> <span class="dv">4</span></span>
<span id="cb560-19"><a href="stats_detected.html#cb560-19" tabindex="-1"></a>  , <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.999</span>, <span class="at">max_treedepth =</span> <span class="dv">13</span>)</span>
<span id="cb560-20"><a href="stats_detected.html#cb560-20" tabindex="-1"></a>  , <span class="at">cores =</span> <span class="fu">round</span>(parallel<span class="sc">::</span><span class="fu">detectCores</span>()<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb560-21"><a href="stats_detected.html#cb560-21" tabindex="-1"></a>  , <span class="at">prior =</span> <span class="fu">c</span>(</span>
<span id="cb560-22"><a href="stats_detected.html#cb560-22" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y, sd_y <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb560-23"><a href="stats_detected.html#cb560-23" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(alpha, beta), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb560-24"><a href="stats_detected.html#cb560-24" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb560-25"><a href="stats_detected.html#cb560-25" tabindex="-1"></a>  )</span>
<span id="cb560-26"><a href="stats_detected.html#cb560-26" tabindex="-1"></a>  , <span class="at">stanvars =</span> stanvars_temp</span>
<span id="cb560-27"><a href="stats_detected.html#cb560-27" tabindex="-1"></a>  , <span class="at">file =</span> <span class="fu">paste0</span>(rootdir, <span class="st">&quot;/fits/brms_dbh_me_mod&quot;</span>)</span>
<span id="cb560-28"><a href="stats_detected.html#cb560-28" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="qualityfiltering---interaction-4" class="section level4 hasAnchor" number="7.4.2.3">
<h4><span class="header-section-number">7.4.2.3</span> Quality:Filtering - interaction<a href="stats_detected.html#qualityfiltering---interaction-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="stats_detected.html#cb561-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb561-2"><a href="stats_detected.html#cb561-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb561-3"><a href="stats_detected.html#cb561-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb561-4"><a href="stats_detected.html#cb561-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb561-5"><a href="stats_detected.html#cb561-5" tabindex="-1"></a>      brms_dbh_me_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb561-6"><a href="stats_detected.html#cb561-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb561-7"><a href="stats_detected.html#cb561-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb561-8"><a href="stats_detected.html#cb561-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb561-9"><a href="stats_detected.html#cb561-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode)</span>
<span id="cb561-10"><a href="stats_detected.html#cb561-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb561-11"><a href="stats_detected.html#cb561-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb561-12"><a href="stats_detected.html#cb561-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb561-13"><a href="stats_detected.html#cb561-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb561-14"><a href="stats_detected.html#cb561-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb561-15"><a href="stats_detected.html#cb561-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb561-16"><a href="stats_detected.html#cb561-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb561-17"><a href="stats_detected.html#cb561-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb561-18"><a href="stats_detected.html#cb561-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb561-19"><a href="stats_detected.html#cb561-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb561-20"><a href="stats_detected.html#cb561-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb561-21"><a href="stats_detected.html#cb561-21" tabindex="-1"></a>    )</span>
<span id="cb561-22"><a href="stats_detected.html#cb561-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb561-23"><a href="stats_detected.html#cb561-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb561-24"><a href="stats_detected.html#cb561-24" tabindex="-1"></a>    <span class="co"># tidybayes::stat_dotsinterval(</span></span>
<span id="cb561-25"><a href="stats_detected.html#cb561-25" tabindex="-1"></a>    <span class="co">#   point_interval = median_hdi, .width = .95</span></span>
<span id="cb561-26"><a href="stats_detected.html#cb561-26" tabindex="-1"></a>    <span class="co">#   , justification = -0.04</span></span>
<span id="cb561-27"><a href="stats_detected.html#cb561-27" tabindex="-1"></a>    <span class="co">#   , slab_alpha = 0.98</span></span>
<span id="cb561-28"><a href="stats_detected.html#cb561-28" tabindex="-1"></a>    <span class="co">#   , shape = 21, point_size = 3</span></span>
<span id="cb561-29"><a href="stats_detected.html#cb561-29" tabindex="-1"></a>    <span class="co">#   , quantiles = 100</span></span>
<span id="cb561-30"><a href="stats_detected.html#cb561-30" tabindex="-1"></a>    <span class="co"># ) +</span></span>
<span id="cb561-31"><a href="stats_detected.html#cb561-31" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb561-32"><a href="stats_detected.html#cb561-32" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb561-33"><a href="stats_detected.html#cb561-33" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb561-34"><a href="stats_detected.html#cb561-34" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb561-35"><a href="stats_detected.html#cb561-35" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb561-36"><a href="stats_detected.html#cb561-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb561-37"><a href="stats_detected.html#cb561-37" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb561-38"><a href="stats_detected.html#cb561-38" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb561-39"><a href="stats_detected.html#cb561-39" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb561-40"><a href="stats_detected.html#cb561-40" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_dbh_cm_me,lmt_dbh_cm_me)</span>
<span id="cb561-41"><a href="stats_detected.html#cb561-41" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb561-42"><a href="stats_detected.html#cb561-42" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb561-43"><a href="stats_detected.html#cb561-43" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb561-44"><a href="stats_detected.html#cb561-44" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">extended_breaks</span>(<span class="at">n=</span><span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb561-45"><a href="stats_detected.html#cb561-45" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb561-46"><a href="stats_detected.html#cb561-46" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb561-47"><a href="stats_detected.html#cb561-47" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;DBH Mean Error (cm)&quot;</span></span>
<span id="cb561-48"><a href="stats_detected.html#cb561-48" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of DBH mean error (cm) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb561-49"><a href="stats_detected.html#cb561-49" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb561-50"><a href="stats_detected.html#cb561-50" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb561-51"><a href="stats_detected.html#cb561-51" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb561-52"><a href="stats_detected.html#cb561-52" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb561-53"><a href="stats_detected.html#cb561-53" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb561-54"><a href="stats_detected.html#cb561-54" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb561-55"><a href="stats_detected.html#cb561-55" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb561-56"><a href="stats_detected.html#cb561-56" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-428-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="stats_detected.html#cb562-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb562-2"><a href="stats_detected.html#cb562-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb562-3"><a href="stats_detected.html#cb562-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb562-4"><a href="stats_detected.html#cb562-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb562-5"><a href="stats_detected.html#cb562-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(depth_maps_generation_quality,depth_maps_generation_filtering_mode)</span>
<span id="cb562-6"><a href="stats_detected.html#cb562-6" tabindex="-1"></a></span>
<span id="cb562-7"><a href="stats_detected.html#cb562-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb562-8"><a href="stats_detected.html#cb562-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(depth_maps_generation_quality)) <span class="sc">%&gt;%</span> </span>
<span id="cb562-9"><a href="stats_detected.html#cb562-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb562-10"><a href="stats_detected.html#cb562-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb562-11"><a href="stats_detected.html#cb562-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH Mean Error (cm)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb562-12"><a href="stats_detected.html#cb562-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb562-13"><a href="stats_detected.html#cb562-13" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb562-14"><a href="stats_detected.html#cb562-14" tabindex="-1"></a>      , <span class="st">&quot;DBH Mean Error (cm)&lt;br&gt;median&quot;</span></span>
<span id="cb562-15"><a href="stats_detected.html#cb562-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb562-16"><a href="stats_detected.html#cb562-16" tabindex="-1"></a>    )</span>
<span id="cb562-17"><a href="stats_detected.html#cb562-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb562-18"><a href="stats_detected.html#cb562-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb562-19"><a href="stats_detected.html#cb562-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb562-20"><a href="stats_detected.html#cb562-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>depth_maps_generation_quality))) <span class="sc">%&gt;%</span> </span>
<span id="cb562-21"><a href="stats_detected.html#cb562-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-429">Table 7.13: </span>DBH Mean Error (cm)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DBH Mean Error (cm)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>ultra high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
3.85
</td>
<td style="text-align:right;">
-5.94
</td>
<td style="text-align:right;">
13.71
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
3.89
</td>
<td style="text-align:right;">
-5.94
</td>
<td style="text-align:right;">
13.63
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
3.74
</td>
<td style="text-align:right;">
-6.00
</td>
<td style="text-align:right;">
13.56
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
3.89
</td>
<td style="text-align:right;">
-5.90
</td>
<td style="text-align:right;">
13.78
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
4.42
</td>
<td style="text-align:right;">
-5.37
</td>
<td style="text-align:right;">
14.27
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
4.66
</td>
<td style="text-align:right;">
-5.12
</td>
<td style="text-align:right;">
14.36
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
4.21
</td>
<td style="text-align:right;">
-5.70
</td>
<td style="text-align:right;">
13.93
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
4.62
</td>
<td style="text-align:right;">
-5.21
</td>
<td style="text-align:right;">
14.53
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>medium</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
4.73
</td>
<td style="text-align:right;">
-5.14
</td>
<td style="text-align:right;">
14.60
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
3.77
</td>
<td style="text-align:right;">
-6.00
</td>
<td style="text-align:right;">
13.58
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
4.80
</td>
<td style="text-align:right;">
-4.85
</td>
<td style="text-align:right;">
14.65
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
4.56
</td>
<td style="text-align:right;">
-4.81
</td>
<td style="text-align:right;">
14.75
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>low</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
2.54
</td>
<td style="text-align:right;">
-7.21
</td>
<td style="text-align:right;">
12.46
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
2.47
</td>
<td style="text-align:right;">
-7.34
</td>
<td style="text-align:right;">
12.10
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
2.55
</td>
<td style="text-align:right;">
-7.10
</td>
<td style="text-align:right;">
12.41
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
4.01
</td>
<td style="text-align:right;">
-5.53
</td>
<td style="text-align:right;">
14.19
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>lowest</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
1.64
</td>
<td style="text-align:right;">
-8.28
</td>
<td style="text-align:right;">
11.97
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
1.63
</td>
<td style="text-align:right;">
-8.48
</td>
<td style="text-align:right;">
11.58
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
1.90
</td>
<td style="text-align:right;">
-8.01
</td>
<td style="text-align:right;">
12.03
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
2.15
</td>
<td style="text-align:right;">
-7.51
</td>
<td style="text-align:right;">
12.67
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequality---interaction-4" class="section level4 hasAnchor" number="7.4.2.4">
<h4><span class="header-section-number">7.4.2.4</span> Software:Quality - interaction<a href="stats_detected.html#softwarequality---interaction-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="stats_detected.html#cb563-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb563-2"><a href="stats_detected.html#cb563-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb563-3"><a href="stats_detected.html#cb563-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software) <span class="sc">%&gt;%</span> </span>
<span id="cb563-4"><a href="stats_detected.html#cb563-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb563-5"><a href="stats_detected.html#cb563-5" tabindex="-1"></a>      brms_dbh_me_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb563-6"><a href="stats_detected.html#cb563-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb563-7"><a href="stats_detected.html#cb563-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb563-8"><a href="stats_detected.html#cb563-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb563-9"><a href="stats_detected.html#cb563-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software)</span>
<span id="cb563-10"><a href="stats_detected.html#cb563-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb563-11"><a href="stats_detected.html#cb563-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb563-12"><a href="stats_detected.html#cb563-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb563-13"><a href="stats_detected.html#cb563-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb563-14"><a href="stats_detected.html#cb563-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb563-15"><a href="stats_detected.html#cb563-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb563-16"><a href="stats_detected.html#cb563-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb563-17"><a href="stats_detected.html#cb563-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb563-18"><a href="stats_detected.html#cb563-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb563-19"><a href="stats_detected.html#cb563-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb563-20"><a href="stats_detected.html#cb563-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb563-21"><a href="stats_detected.html#cb563-21" tabindex="-1"></a>    )</span>
<span id="cb563-22"><a href="stats_detected.html#cb563-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb563-23"><a href="stats_detected.html#cb563-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb563-24"><a href="stats_detected.html#cb563-24" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb563-25"><a href="stats_detected.html#cb563-25" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb563-26"><a href="stats_detected.html#cb563-26" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb563-27"><a href="stats_detected.html#cb563-27" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb563-28"><a href="stats_detected.html#cb563-28" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb563-29"><a href="stats_detected.html#cb563-29" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb563-30"><a href="stats_detected.html#cb563-30" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb563-31"><a href="stats_detected.html#cb563-31" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb563-32"><a href="stats_detected.html#cb563-32" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb563-33"><a href="stats_detected.html#cb563-33" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_dbh_cm_me,lmt_dbh_cm_me)</span>
<span id="cb563-34"><a href="stats_detected.html#cb563-34" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb563-35"><a href="stats_detected.html#cb563-35" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb563-36"><a href="stats_detected.html#cb563-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb563-37"><a href="stats_detected.html#cb563-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb563-38"><a href="stats_detected.html#cb563-38" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb563-39"><a href="stats_detected.html#cb563-39" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;DBH Mean Error (cm)&quot;</span></span>
<span id="cb563-40"><a href="stats_detected.html#cb563-40" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of DBH mean error (cm) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb563-41"><a href="stats_detected.html#cb563-41" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb563-42"><a href="stats_detected.html#cb563-42" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb563-43"><a href="stats_detected.html#cb563-43" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb563-44"><a href="stats_detected.html#cb563-44" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb563-45"><a href="stats_detected.html#cb563-45" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb563-46"><a href="stats_detected.html#cb563-46" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb563-47"><a href="stats_detected.html#cb563-47" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb563-48"><a href="stats_detected.html#cb563-48" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-430-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="stats_detected.html#cb564-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb564-2"><a href="stats_detected.html#cb564-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb564-3"><a href="stats_detected.html#cb564-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb564-4"><a href="stats_detected.html#cb564-4" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb564-5"><a href="stats_detected.html#cb564-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb564-6"><a href="stats_detected.html#cb564-6" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb564-7"><a href="stats_detected.html#cb564-7" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb564-8"><a href="stats_detected.html#cb564-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb564-9"><a href="stats_detected.html#cb564-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span></span>
<span id="cb564-10"><a href="stats_detected.html#cb564-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_quality)</span>
<span id="cb564-11"><a href="stats_detected.html#cb564-11" tabindex="-1"></a></span>
<span id="cb564-12"><a href="stats_detected.html#cb564-12" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb564-13"><a href="stats_detected.html#cb564-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb564-14"><a href="stats_detected.html#cb564-14" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb564-15"><a href="stats_detected.html#cb564-15" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb564-16"><a href="stats_detected.html#cb564-16" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH Mean Error (cm)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb564-17"><a href="stats_detected.html#cb564-17" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb564-18"><a href="stats_detected.html#cb564-18" tabindex="-1"></a>      <span class="st">&quot;quality&quot;</span></span>
<span id="cb564-19"><a href="stats_detected.html#cb564-19" tabindex="-1"></a>      , <span class="st">&quot;DBH Mean Error (cm)&lt;br&gt;median&quot;</span></span>
<span id="cb564-20"><a href="stats_detected.html#cb564-20" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb564-21"><a href="stats_detected.html#cb564-21" tabindex="-1"></a>    )</span>
<span id="cb564-22"><a href="stats_detected.html#cb564-22" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb564-23"><a href="stats_detected.html#cb564-23" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb564-24"><a href="stats_detected.html#cb564-24" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb564-25"><a href="stats_detected.html#cb564-25" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb564-26"><a href="stats_detected.html#cb564-26" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-431">Table 7.14: </span>DBH Mean Error (cm)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DBH Mean Error (cm)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
1.58
</td>
<td style="text-align:right;">
-5.79
</td>
<td style="text-align:right;">
8.92
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
3.78
</td>
<td style="text-align:right;">
-3.44
</td>
<td style="text-align:right;">
11.34
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
6.38
</td>
<td style="text-align:right;">
-0.99
</td>
<td style="text-align:right;">
13.89
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
2.01
</td>
<td style="text-align:right;">
-5.38
</td>
<td style="text-align:right;">
9.33
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
-0.92
</td>
<td style="text-align:right;">
-8.28
</td>
<td style="text-align:right;">
6.53
</td>
</tr>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
4.80
</td>
<td style="text-align:right;">
-2.70
</td>
<td style="text-align:right;">
12.14
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
4.38
</td>
<td style="text-align:right;">
-3.01
</td>
<td style="text-align:right;">
11.77
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
1.55
</td>
<td style="text-align:right;">
-5.96
</td>
<td style="text-align:right;">
8.81
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
1.31
</td>
<td style="text-align:right;">
-6.11
</td>
<td style="text-align:right;">
8.54
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
1.01
</td>
<td style="text-align:right;">
-6.39
</td>
<td style="text-align:right;">
8.30
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
5.59
</td>
<td style="text-align:right;">
-1.96
</td>
<td style="text-align:right;">
12.94
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
6.50
</td>
<td style="text-align:right;">
-0.99
</td>
<td style="text-align:right;">
13.93
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
6.70
</td>
<td style="text-align:right;">
-0.60
</td>
<td style="text-align:right;">
14.36
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
4.52
</td>
<td style="text-align:right;">
-2.65
</td>
<td style="text-align:right;">
12.35
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarefiltering---interaction-4" class="section level4 hasAnchor" number="7.4.2.5">
<h4><span class="header-section-number">7.4.2.5</span> Software:Filtering - interaction<a href="stats_detected.html#softwarefiltering---interaction-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="stats_detected.html#cb565-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb565-2"><a href="stats_detected.html#cb565-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb565-3"><a href="stats_detected.html#cb565-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_filtering_mode, software) <span class="sc">%&gt;%</span> </span>
<span id="cb565-4"><a href="stats_detected.html#cb565-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb565-5"><a href="stats_detected.html#cb565-5" tabindex="-1"></a>      brms_dbh_me_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb565-6"><a href="stats_detected.html#cb565-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb565-7"><a href="stats_detected.html#cb565-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb565-8"><a href="stats_detected.html#cb565-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb565-9"><a href="stats_detected.html#cb565-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb565-10"><a href="stats_detected.html#cb565-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb565-11"><a href="stats_detected.html#cb565-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb565-12"><a href="stats_detected.html#cb565-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb565-13"><a href="stats_detected.html#cb565-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb565-14"><a href="stats_detected.html#cb565-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb565-15"><a href="stats_detected.html#cb565-15" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb565-16"><a href="stats_detected.html#cb565-16" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb565-17"><a href="stats_detected.html#cb565-17" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb565-18"><a href="stats_detected.html#cb565-18" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb565-19"><a href="stats_detected.html#cb565-19" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb565-20"><a href="stats_detected.html#cb565-20" tabindex="-1"></a>    )</span>
<span id="cb565-21"><a href="stats_detected.html#cb565-21" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb565-22"><a href="stats_detected.html#cb565-22" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb565-23"><a href="stats_detected.html#cb565-23" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb565-24"><a href="stats_detected.html#cb565-24" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb565-25"><a href="stats_detected.html#cb565-25" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb565-26"><a href="stats_detected.html#cb565-26" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb565-27"><a href="stats_detected.html#cb565-27" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb565-28"><a href="stats_detected.html#cb565-28" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb565-29"><a href="stats_detected.html#cb565-29" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb565-30"><a href="stats_detected.html#cb565-30" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb565-31"><a href="stats_detected.html#cb565-31" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb565-32"><a href="stats_detected.html#cb565-32" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_dbh_cm_me,lmt_dbh_cm_me)</span>
<span id="cb565-33"><a href="stats_detected.html#cb565-33" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb565-34"><a href="stats_detected.html#cb565-34" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb565-35"><a href="stats_detected.html#cb565-35" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb565-36"><a href="stats_detected.html#cb565-36" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_filtering_mode)) <span class="sc">+</span></span>
<span id="cb565-37"><a href="stats_detected.html#cb565-37" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb565-38"><a href="stats_detected.html#cb565-38" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;DBH Mean Error (cm)&quot;</span></span>
<span id="cb565-39"><a href="stats_detected.html#cb565-39" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of DBH mean error (cm) with 95% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb565-40"><a href="stats_detected.html#cb565-40" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb565-41"><a href="stats_detected.html#cb565-41" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb565-42"><a href="stats_detected.html#cb565-42" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb565-43"><a href="stats_detected.html#cb565-43" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb565-44"><a href="stats_detected.html#cb565-44" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb565-45"><a href="stats_detected.html#cb565-45" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb565-46"><a href="stats_detected.html#cb565-46" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb565-47"><a href="stats_detected.html#cb565-47" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-432-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="stats_detected.html#cb566-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb566-2"><a href="stats_detected.html#cb566-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb566-3"><a href="stats_detected.html#cb566-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb566-4"><a href="stats_detected.html#cb566-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb566-5"><a href="stats_detected.html#cb566-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_filtering_mode)</span>
<span id="cb566-6"><a href="stats_detected.html#cb566-6" tabindex="-1"></a></span>
<span id="cb566-7"><a href="stats_detected.html#cb566-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb566-8"><a href="stats_detected.html#cb566-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb566-9"><a href="stats_detected.html#cb566-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb566-10"><a href="stats_detected.html#cb566-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb566-11"><a href="stats_detected.html#cb566-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH Mean Error (cm)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb566-12"><a href="stats_detected.html#cb566-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb566-13"><a href="stats_detected.html#cb566-13" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb566-14"><a href="stats_detected.html#cb566-14" tabindex="-1"></a>      , <span class="st">&quot;DBH Mean Error (cm)&lt;br&gt;median&quot;</span></span>
<span id="cb566-15"><a href="stats_detected.html#cb566-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb566-16"><a href="stats_detected.html#cb566-16" tabindex="-1"></a>    )</span>
<span id="cb566-17"><a href="stats_detected.html#cb566-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb566-18"><a href="stats_detected.html#cb566-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb566-19"><a href="stats_detected.html#cb566-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb566-20"><a href="stats_detected.html#cb566-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb566-21"><a href="stats_detected.html#cb566-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-433">Table 7.15: </span>DBH Mean Error (cm)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DBH Mean Error (cm)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
2.73
</td>
<td style="text-align:right;">
-4.91
</td>
<td style="text-align:right;">
10.31
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
2.49
</td>
<td style="text-align:right;">
-5.22
</td>
<td style="text-align:right;">
9.93
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
2.57
</td>
<td style="text-align:right;">
-5.13
</td>
<td style="text-align:right;">
10.14
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
3.01
</td>
<td style="text-align:right;">
-4.62
</td>
<td style="text-align:right;">
10.55
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
2.64
</td>
<td style="text-align:right;">
-5.13
</td>
<td style="text-align:right;">
10.16
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
2.73
</td>
<td style="text-align:right;">
-4.95
</td>
<td style="text-align:right;">
10.31
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
2.69
</td>
<td style="text-align:right;">
-4.96
</td>
<td style="text-align:right;">
10.30
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
2.93
</td>
<td style="text-align:right;">
-4.41
</td>
<td style="text-align:right;">
10.88
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
4.61
</td>
<td style="text-align:right;">
-2.98
</td>
<td style="text-align:right;">
12.61
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
5.06
</td>
<td style="text-align:right;">
-2.79
</td>
<td style="text-align:right;">
12.77
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
5.63
</td>
<td style="text-align:right;">
-2.37
</td>
<td style="text-align:right;">
13.24
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequalityfiltering---interaction-4" class="section level4 hasAnchor" number="7.4.2.6">
<h4><span class="header-section-number">7.4.2.6</span> Software:Quality:Filtering - interaction<a href="stats_detected.html#softwarequalityfiltering---interaction-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="stats_detected.html#cb567-1" tabindex="-1"></a><span class="co"># get draws</span></span>
<span id="cb567-2"><a href="stats_detected.html#cb567-2" tabindex="-1"></a>fltr_sftwr_draws_temp <span class="ot">=</span></span>
<span id="cb567-3"><a href="stats_detected.html#cb567-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb567-4"><a href="stats_detected.html#cb567-4" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb567-5"><a href="stats_detected.html#cb567-5" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb567-6"><a href="stats_detected.html#cb567-6" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb567-7"><a href="stats_detected.html#cb567-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb567-8"><a href="stats_detected.html#cb567-8" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb567-9"><a href="stats_detected.html#cb567-9" tabindex="-1"></a>    brms_dbh_me_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb567-10"><a href="stats_detected.html#cb567-10" tabindex="-1"></a>    <span class="co"># this part is crucial</span></span>
<span id="cb567-11"><a href="stats_detected.html#cb567-11" tabindex="-1"></a>    , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span> <span class="co"># main effects</span></span>
<span id="cb567-12"><a href="stats_detected.html#cb567-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb567-13"><a href="stats_detected.html#cb567-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb567-14"><a href="stats_detected.html#cb567-14" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb567-15"><a href="stats_detected.html#cb567-15" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb567-16"><a href="stats_detected.html#cb567-16" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb567-17"><a href="stats_detected.html#cb567-17" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb567-18"><a href="stats_detected.html#cb567-18" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb567-19"><a href="stats_detected.html#cb567-19" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb567-20"><a href="stats_detected.html#cb567-20" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb567-21"><a href="stats_detected.html#cb567-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb567-22"><a href="stats_detected.html#cb567-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb567-23"><a href="stats_detected.html#cb567-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb567-24"><a href="stats_detected.html#cb567-24" tabindex="-1"></a></span>
<span id="cb567-25"><a href="stats_detected.html#cb567-25" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb567-26"><a href="stats_detected.html#cb567-26" tabindex="-1"></a>qlty_fltr_sftwr_dbh_me <span class="ot">=</span> </span>
<span id="cb567-27"><a href="stats_detected.html#cb567-27" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb567-28"><a href="stats_detected.html#cb567-28" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb567-29"><a href="stats_detected.html#cb567-29" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb567-30"><a href="stats_detected.html#cb567-30" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb567-31"><a href="stats_detected.html#cb567-31" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb567-32"><a href="stats_detected.html#cb567-32" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb567-33"><a href="stats_detected.html#cb567-33" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb567-34"><a href="stats_detected.html#cb567-34" tabindex="-1"></a>      <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb567-35"><a href="stats_detected.html#cb567-35" tabindex="-1"></a>        <span class="at">y =</span> value</span>
<span id="cb567-36"><a href="stats_detected.html#cb567-36" tabindex="-1"></a>        , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb567-37"><a href="stats_detected.html#cb567-37" tabindex="-1"></a>        , <span class="at">fill =</span> med</span>
<span id="cb567-38"><a href="stats_detected.html#cb567-38" tabindex="-1"></a>      )</span>
<span id="cb567-39"><a href="stats_detected.html#cb567-39" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb567-40"><a href="stats_detected.html#cb567-40" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb567-41"><a href="stats_detected.html#cb567-41" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb567-42"><a href="stats_detected.html#cb567-42" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb567-43"><a href="stats_detected.html#cb567-43" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb567-44"><a href="stats_detected.html#cb567-44" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb567-45"><a href="stats_detected.html#cb567-45" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb567-46"><a href="stats_detected.html#cb567-46" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb567-47"><a href="stats_detected.html#cb567-47" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb567-48"><a href="stats_detected.html#cb567-48" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">7</span></span>
<span id="cb567-49"><a href="stats_detected.html#cb567-49" tabindex="-1"></a>      , <span class="at">colors =</span> scales<span class="sc">::</span><span class="fu">pal_div_gradient</span>()(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> <span class="dv">7</span>))</span>
<span id="cb567-50"><a href="stats_detected.html#cb567-50" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span>lmt_dbh_cm_me,lmt_dbh_cm_me)</span>
<span id="cb567-51"><a href="stats_detected.html#cb567-51" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb567-52"><a href="stats_detected.html#cb567-52" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb567-53"><a href="stats_detected.html#cb567-53" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb567-54"><a href="stats_detected.html#cb567-54" tabindex="-1"></a>    <span class="fu">facet_grid</span>(</span>
<span id="cb567-55"><a href="stats_detected.html#cb567-55" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb567-56"><a href="stats_detected.html#cb567-56" tabindex="-1"></a>      , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb567-57"><a href="stats_detected.html#cb567-57" tabindex="-1"></a>      <span class="co"># , switch = &quot;y&quot;</span></span>
<span id="cb567-58"><a href="stats_detected.html#cb567-58" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb567-59"><a href="stats_detected.html#cb567-59" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb567-60"><a href="stats_detected.html#cb567-60" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;DBH Mean Error (cm)&quot;</span></span>
<span id="cb567-61"><a href="stats_detected.html#cb567-61" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of DBH mean error (cm) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb567-62"><a href="stats_detected.html#cb567-62" tabindex="-1"></a>      <span class="co"># , caption = form_temp</span></span>
<span id="cb567-63"><a href="stats_detected.html#cb567-63" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb567-64"><a href="stats_detected.html#cb567-64" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb567-65"><a href="stats_detected.html#cb567-65" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb567-66"><a href="stats_detected.html#cb567-66" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb567-67"><a href="stats_detected.html#cb567-67" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb567-68"><a href="stats_detected.html#cb567-68" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb567-69"><a href="stats_detected.html#cb567-69" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb567-70"><a href="stats_detected.html#cb567-70" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb567-71"><a href="stats_detected.html#cb567-71" tabindex="-1"></a>      <span class="co"># , strip.placement = &quot;outside&quot;</span></span>
<span id="cb567-72"><a href="stats_detected.html#cb567-72" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb567-73"><a href="stats_detected.html#cb567-73" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb567-74"><a href="stats_detected.html#cb567-74" tabindex="-1"></a>      <span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">lwd =</span> <span class="cn">NA</span>))</span>
<span id="cb567-75"><a href="stats_detected.html#cb567-75" tabindex="-1"></a>    )</span>
<span id="cb567-76"><a href="stats_detected.html#cb567-76" tabindex="-1"></a><span class="co"># print it</span></span>
<span id="cb567-77"><a href="stats_detected.html#cb567-77" tabindex="-1"></a>qlty_fltr_sftwr_dbh_me</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-434-1.png" width="1008" /></p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="stats_detected.html#cb568-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_dbh_me.png&quot;</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span>)</span></code></pre></div>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="stats_detected.html#cb569-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb569-2"><a href="stats_detected.html#cb569-2" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb569-3"><a href="stats_detected.html#cb569-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb569-4"><a href="stats_detected.html#cb569-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb569-5"><a href="stats_detected.html#cb569-5" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb569-6"><a href="stats_detected.html#cb569-6" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb569-7"><a href="stats_detected.html#cb569-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb569-8"><a href="stats_detected.html#cb569-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb569-9"><a href="stats_detected.html#cb569-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(</span>
<span id="cb569-10"><a href="stats_detected.html#cb569-10" tabindex="-1"></a>    software, depth_maps_generation_quality, depth_maps_generation_filtering_mode</span>
<span id="cb569-11"><a href="stats_detected.html#cb569-11" tabindex="-1"></a>    , value, .lower, .upper</span>
<span id="cb569-12"><a href="stats_detected.html#cb569-12" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb569-13"><a href="stats_detected.html#cb569-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb569-14"><a href="stats_detected.html#cb569-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb569-15"><a href="stats_detected.html#cb569-15" tabindex="-1"></a></span>
<span id="cb569-16"><a href="stats_detected.html#cb569-16" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb569-17"><a href="stats_detected.html#cb569-17" tabindex="-1"></a>  <span class="co"># dplyr::select(-c(software)) %&gt;% </span></span>
<span id="cb569-18"><a href="stats_detected.html#cb569-18" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb569-19"><a href="stats_detected.html#cb569-19" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb569-20"><a href="stats_detected.html#cb569-20" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH Mean Error (cm)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb569-21"><a href="stats_detected.html#cb569-21" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb569-22"><a href="stats_detected.html#cb569-22" tabindex="-1"></a>      <span class="st">&quot;software&quot;</span>, <span class="st">&quot;quality&quot;</span>, <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb569-23"><a href="stats_detected.html#cb569-23" tabindex="-1"></a>      , <span class="st">&quot;DBH Mean Error (cm)&lt;br&gt;median&quot;</span></span>
<span id="cb569-24"><a href="stats_detected.html#cb569-24" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb569-25"><a href="stats_detected.html#cb569-25" tabindex="-1"></a>    )</span>
<span id="cb569-26"><a href="stats_detected.html#cb569-26" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb569-27"><a href="stats_detected.html#cb569-27" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb569-28"><a href="stats_detected.html#cb569-28" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb569-29"><a href="stats_detected.html#cb569-29" tabindex="-1"></a>  <span class="co"># kableExtra::pack_rows(index = table(forcats::fct_inorder(table_temp$software))) %&gt;% </span></span>
<span id="cb569-30"><a href="stats_detected.html#cb569-30" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb569-31"><a href="stats_detected.html#cb569-31" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-435">Table 7.16: </span>DBH Mean Error (cm)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
software
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DBH Mean Error (cm)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
METASHAPE
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-1.67
</td>
<td style="text-align:right;">
-9.17
</td>
<td style="text-align:right;">
5.63
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-1.56
</td>
<td style="text-align:right;">
-9.12
</td>
<td style="text-align:right;">
5.60
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-1.08
</td>
<td style="text-align:right;">
-8.53
</td>
<td style="text-align:right;">
6.17
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.78
</td>
<td style="text-align:right;">
-7.99
</td>
<td style="text-align:right;">
6.40
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
1.08
</td>
<td style="text-align:right;">
-6.55
</td>
<td style="text-align:right;">
8.06
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
1.50
</td>
<td style="text-align:right;">
-5.77
</td>
<td style="text-align:right;">
8.79
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
1.58
</td>
<td style="text-align:right;">
-5.63
</td>
<td style="text-align:right;">
8.89
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
3.56
</td>
<td style="text-align:right;">
-3.73
</td>
<td style="text-align:right;">
10.96
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
7.79
</td>
<td style="text-align:right;">
0.34
</td>
<td style="text-align:right;">
15.08
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
6.12
</td>
<td style="text-align:right;">
-1.21
</td>
<td style="text-align:right;">
13.40
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
6.48
</td>
<td style="text-align:right;">
-0.85
</td>
<td style="text-align:right;">
13.80
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
6.50
</td>
<td style="text-align:right;">
-0.76
</td>
<td style="text-align:right;">
13.81
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
4.15
</td>
<td style="text-align:right;">
-3.38
</td>
<td style="text-align:right;">
11.29
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
3.93
</td>
<td style="text-align:right;">
-3.57
</td>
<td style="text-align:right;">
11.05
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
3.47
</td>
<td style="text-align:right;">
-3.83
</td>
<td style="text-align:right;">
10.74
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
3.89
</td>
<td style="text-align:right;">
-3.39
</td>
<td style="text-align:right;">
11.24
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
1.61
</td>
<td style="text-align:right;">
-5.67
</td>
<td style="text-align:right;">
8.85
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
1.37
</td>
<td style="text-align:right;">
-5.88
</td>
<td style="text-align:right;">
8.58
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
1.18
</td>
<td style="text-align:right;">
-6.12
</td>
<td style="text-align:right;">
8.41
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
1.53
</td>
<td style="text-align:right;">
-5.81
</td>
<td style="text-align:right;">
8.73
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
OPENDRONEMAP
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
-6.82
</td>
<td style="text-align:right;">
7.71
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
-6.39
</td>
<td style="text-align:right;">
8.13
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.92
</td>
<td style="text-align:right;">
-6.46
</td>
<td style="text-align:right;">
8.04
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
1.02
</td>
<td style="text-align:right;">
-6.26
</td>
<td style="text-align:right;">
8.16
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
-6.51
</td>
<td style="text-align:right;">
8.04
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.93
</td>
<td style="text-align:right;">
-6.21
</td>
<td style="text-align:right;">
8.29
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:right;">
-6.37
</td>
<td style="text-align:right;">
8.15
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
1.99
</td>
<td style="text-align:right;">
-5.41
</td>
<td style="text-align:right;">
9.26
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
1.48
</td>
<td style="text-align:right;">
-5.97
</td>
<td style="text-align:right;">
8.65
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.95
</td>
<td style="text-align:right;">
-6.39
</td>
<td style="text-align:right;">
8.09
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
1.68
</td>
<td style="text-align:right;">
-5.79
</td>
<td style="text-align:right;">
8.68
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
1.34
</td>
<td style="text-align:right;">
-5.93
</td>
<td style="text-align:right;">
8.57
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
4.19
</td>
<td style="text-align:right;">
-3.19
</td>
<td style="text-align:right;">
11.36
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
4.64
</td>
<td style="text-align:right;">
-2.54
</td>
<td style="text-align:right;">
11.98
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
4.16
</td>
<td style="text-align:right;">
-3.22
</td>
<td style="text-align:right;">
11.29
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
4.99
</td>
<td style="text-align:right;">
-2.23
</td>
<td style="text-align:right;">
12.45
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
4.99
</td>
<td style="text-align:right;">
-2.23
</td>
<td style="text-align:right;">
12.44
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
5.60
</td>
<td style="text-align:right;">
-1.79
</td>
<td style="text-align:right;">
12.71
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
4.80
</td>
<td style="text-align:right;">
-2.69
</td>
<td style="text-align:right;">
11.87
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
4.53
</td>
<td style="text-align:right;">
-2.77
</td>
<td style="text-align:right;">
11.73
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
PIX4D
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
3.12
</td>
<td style="text-align:right;">
-4.31
</td>
<td style="text-align:right;">
10.36
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
3.47
</td>
<td style="text-align:right;">
-3.93
</td>
<td style="text-align:right;">
10.82
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
7.46
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
15.14
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
4.70
</td>
<td style="text-align:right;">
-3.10
</td>
<td style="text-align:right;">
11.86
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
8.56
</td>
<td style="text-align:right;">
1.16
</td>
<td style="text-align:right;">
16.08
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
7.34
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
14.76
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
7.55
</td>
<td style="text-align:right;">
0.42
</td>
<td style="text-align:right;">
15.18
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
6.15
</td>
<td style="text-align:right;">
-1.24
</td>
<td style="text-align:right;">
13.32
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
6.54
</td>
<td style="text-align:right;">
-0.88
</td>
<td style="text-align:right;">
13.75
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
ultra high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
5.51
</td>
<td style="text-align:right;">
-1.83
</td>
<td style="text-align:right;">
12.79
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
5.62
</td>
<td style="text-align:right;">
-1.79
</td>
<td style="text-align:right;">
12.74
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
5.94
</td>
<td style="text-align:right;">
-1.44
</td>
<td style="text-align:right;">
13.20
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="model-dbh-rmse-precision" class="section level3 hasAnchor" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> Model: DBH RMSE (precision)<a href="stats_detected.html#model-dbh-rmse-precision" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Define priors</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="stats_detected.html#cb570-1" tabindex="-1"></a><span class="co"># from Kurz: </span></span>
<span id="cb570-2"><a href="stats_detected.html#cb570-2" tabindex="-1"></a>gamma_a_b_from_omega_sigma <span class="ot">=</span> <span class="cf">function</span>(mode, sd) {</span>
<span id="cb570-3"><a href="stats_detected.html#cb570-3" tabindex="-1"></a>  <span class="cf">if</span> (mode <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;mode must be &gt; 0&quot;</span>)</span>
<span id="cb570-4"><a href="stats_detected.html#cb570-4" tabindex="-1"></a>  <span class="cf">if</span> (sd   <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;sd must be &gt; 0&quot;</span>)</span>
<span id="cb570-5"><a href="stats_detected.html#cb570-5" tabindex="-1"></a>  rate <span class="ot">=</span> (mode <span class="sc">+</span> <span class="fu">sqrt</span>(mode<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> sd<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb570-6"><a href="stats_detected.html#cb570-6" tabindex="-1"></a>  shape <span class="ot">=</span> <span class="dv">1</span> <span class="sc">+</span> mode <span class="sc">*</span> rate</span>
<span id="cb570-7"><a href="stats_detected.html#cb570-7" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">shape =</span> shape, <span class="at">rate =</span> rate))</span>
<span id="cb570-8"><a href="stats_detected.html#cb570-8" tabindex="-1"></a>}</span>
<span id="cb570-9"><a href="stats_detected.html#cb570-9" tabindex="-1"></a></span>
<span id="cb570-10"><a href="stats_detected.html#cb570-10" tabindex="-1"></a>mean_y_temp <span class="ot">=</span> <span class="fu">mean</span>(ptcld_validation_data<span class="sc">$</span>dbh_cm_rmse, <span class="at">na.rm =</span> T)</span>
<span id="cb570-11"><a href="stats_detected.html#cb570-11" tabindex="-1"></a>sd_y_temp   <span class="ot">=</span> <span class="fu">sd</span>(ptcld_validation_data<span class="sc">$</span>dbh_cm_rmse, <span class="at">na.rm =</span> T)</span>
<span id="cb570-12"><a href="stats_detected.html#cb570-12" tabindex="-1"></a></span>
<span id="cb570-13"><a href="stats_detected.html#cb570-13" tabindex="-1"></a>omega_temp <span class="ot">=</span> sd_y_temp <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb570-14"><a href="stats_detected.html#cb570-14" tabindex="-1"></a>sigma_temp <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> sd_y_temp</span>
<span id="cb570-15"><a href="stats_detected.html#cb570-15" tabindex="-1"></a></span>
<span id="cb570-16"><a href="stats_detected.html#cb570-16" tabindex="-1"></a>s_r_temp <span class="ot">=</span> <span class="fu">gamma_a_b_from_omega_sigma</span>(<span class="at">mode =</span> omega_temp, <span class="at">sd =</span> sigma_temp)</span>
<span id="cb570-17"><a href="stats_detected.html#cb570-17" tabindex="-1"></a></span>
<span id="cb570-18"><a href="stats_detected.html#cb570-18" tabindex="-1"></a>stanvars_temp <span class="ot">=</span> </span>
<span id="cb570-19"><a href="stats_detected.html#cb570-19" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(mean_y_temp,    <span class="at">name =</span> <span class="st">&quot;mean_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb570-20"><a href="stats_detected.html#cb570-20" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(sd_y_temp,      <span class="at">name =</span> <span class="st">&quot;sd_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb570-21"><a href="stats_detected.html#cb570-21" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>shape, <span class="at">name =</span> <span class="st">&quot;alpha&quot;</span>) <span class="sc">+</span></span>
<span id="cb570-22"><a href="stats_detected.html#cb570-22" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">stanvar</span>(s_r_temp<span class="sc">$</span>rate,  <span class="at">name =</span> <span class="st">&quot;beta&quot;</span>)</span></code></pre></div>
<div id="prior-distributions-4" class="section level4 hasAnchor" number="7.4.3.1">
<h4><span class="header-section-number">7.4.3.1</span> Prior distributions<a href="stats_detected.html#prior-distributions-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="stats_detected.html#cb571-1" tabindex="-1"></a><span class="do">#### setting priors</span></span>
<span id="cb571-2"><a href="stats_detected.html#cb571-2" tabindex="-1"></a><span class="co"># required libraries: tidyverse, tidybayes, brms, palettetown, latex2exp</span></span>
<span id="cb571-3"><a href="stats_detected.html#cb571-3" tabindex="-1"></a>priors_temp <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb571-4"><a href="stats_detected.html#cb571-4" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y_temp, sd_y_temp <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb571-5"><a href="stats_detected.html#cb571-5" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(s_r_temp<span class="sc">$</span>shape, s_r_temp<span class="sc">$</span>rate), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb571-6"><a href="stats_detected.html#cb571-6" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y_temp), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb571-7"><a href="stats_detected.html#cb571-7" tabindex="-1"></a>  )</span>
<span id="cb571-8"><a href="stats_detected.html#cb571-8" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb571-9"><a href="stats_detected.html#cb571-9" tabindex="-1"></a>plt_prior4 <span class="ot">=</span> </span>
<span id="cb571-10"><a href="stats_detected.html#cb571-10" tabindex="-1"></a>priors_temp <span class="sc">%&gt;%</span> </span>
<span id="cb571-11"><a href="stats_detected.html#cb571-11" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">parse_dist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb571-12"><a href="stats_detected.html#cb571-12" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">marginalize_lkjcorr</span>(<span class="at">K =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb571-13"><a href="stats_detected.html#cb571-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate</span>(</span>
<span id="cb571-14"><a href="stats_detected.html#cb571-14" tabindex="-1"></a>    .args</span>
<span id="cb571-15"><a href="stats_detected.html#cb571-15" tabindex="-1"></a>    , <span class="at">sep =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb571-16"><a href="stats_detected.html#cb571-16" tabindex="-1"></a>    , <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb571-17"><a href="stats_detected.html#cb571-17" tabindex="-1"></a>    , <span class="at">remove =</span> F</span>
<span id="cb571-18"><a href="stats_detected.html#cb571-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb571-19"><a href="stats_detected.html#cb571-19" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb571-20"><a href="stats_detected.html#cb571-20" tabindex="-1"></a>    <span class="at">distrib =</span> <span class="fu">paste0</span>(</span>
<span id="cb571-21"><a href="stats_detected.html#cb571-21" tabindex="-1"></a>      class, <span class="st">&quot; ~ &quot;</span></span>
<span id="cb571-22"><a href="stats_detected.html#cb571-22" tabindex="-1"></a>      , .dist</span>
<span id="cb571-23"><a href="stats_detected.html#cb571-23" tabindex="-1"></a>      , <span class="st">&quot;(&quot;</span></span>
<span id="cb571-24"><a href="stats_detected.html#cb571-24" tabindex="-1"></a>      , a <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">extract_numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb571-25"><a href="stats_detected.html#cb571-25" tabindex="-1"></a>      , <span class="st">&quot;,&quot;</span></span>
<span id="cb571-26"><a href="stats_detected.html#cb571-26" tabindex="-1"></a>      , b <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">extract_numeric</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb571-27"><a href="stats_detected.html#cb571-27" tabindex="-1"></a>      , <span class="st">&quot;)&quot;</span></span>
<span id="cb571-28"><a href="stats_detected.html#cb571-28" tabindex="-1"></a>    )</span>
<span id="cb571-29"><a href="stats_detected.html#cb571-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb571-30"><a href="stats_detected.html#cb571-30" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">dist =</span> .dist, <span class="at">args =</span> .args)) <span class="sc">+</span></span>
<span id="cb571-31"><a href="stats_detected.html#cb571-31" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(distrib), <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb571-32"><a href="stats_detected.html#cb571-32" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb571-33"><a href="stats_detected.html#cb571-33" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> prior),</span>
<span id="cb571-34"><a href="stats_detected.html#cb571-34" tabindex="-1"></a>    <span class="at">n =</span> <span class="fl">10e2</span>,</span>
<span id="cb571-35"><a href="stats_detected.html#cb571-35" tabindex="-1"></a>    <span class="at">show.legend =</span> F</span>
<span id="cb571-36"><a href="stats_detected.html#cb571-36" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb571-37"><a href="stats_detected.html#cb571-37" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb571-38"><a href="stats_detected.html#cb571-38" tabindex="-1"></a>  <span class="co"># Set the fill parameter for each group</span></span>
<span id="cb571-39"><a href="stats_detected.html#cb571-39" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb571-40"><a href="stats_detected.html#cb571-40" tabindex="-1"></a>    <span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">turbo</span>(<span class="at">n=</span><span class="dv">15</span>, <span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">%&gt;%</span> <span class="fu">sample</span>()</span>
<span id="cb571-41"><a href="stats_detected.html#cb571-41" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb571-42"><a href="stats_detected.html#cb571-42" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb571-43"><a href="stats_detected.html#cb571-43" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb571-44"><a href="stats_detected.html#cb571-44" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>),</span>
<span id="cb571-45"><a href="stats_detected.html#cb571-45" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb571-46"><a href="stats_detected.html#cb571-46" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb571-47"><a href="stats_detected.html#cb571-47" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb571-48"><a href="stats_detected.html#cb571-48" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb571-49"><a href="stats_detected.html#cb571-49" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb571-50"><a href="stats_detected.html#cb571-50" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb571-51"><a href="stats_detected.html#cb571-51" tabindex="-1"></a>    , <span class="at">title =</span> <span class="st">&quot;Priors: DBH RMSE (precision)&quot;</span></span>
<span id="cb571-52"><a href="stats_detected.html#cb571-52" tabindex="-1"></a>    , <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb571-53"><a href="stats_detected.html#cb571-53" tabindex="-1"></a>  ) </span>
<span id="cb571-54"><a href="stats_detected.html#cb571-54" tabindex="-1"></a>plt_prior4</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-437-1.png" width="1008" /></p>
</div>
<div id="fit-the-model-4" class="section level4 hasAnchor" number="7.4.3.2">
<h4><span class="header-section-number">7.4.3.2</span> Fit the model<a href="stats_detected.html#fit-the-model-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now fit the model.</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="stats_detected.html#cb572-1" tabindex="-1"></a>brms_dbh_rmse_mod <span class="ot">=</span> brms<span class="sc">::</span><span class="fu">brm</span>(</span>
<span id="cb572-2"><a href="stats_detected.html#cb572-2" tabindex="-1"></a>  <span class="at">formula =</span> dbh_cm_rmse <span class="sc">~</span> </span>
<span id="cb572-3"><a href="stats_detected.html#cb572-3" tabindex="-1"></a>    <span class="co"># baseline</span></span>
<span id="cb572-4"><a href="stats_detected.html#cb572-4" tabindex="-1"></a>    <span class="dv">1</span> <span class="sc">+</span> </span>
<span id="cb572-5"><a href="stats_detected.html#cb572-5" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb572-6"><a href="stats_detected.html#cb572-6" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb572-7"><a href="stats_detected.html#cb572-7" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb572-8"><a href="stats_detected.html#cb572-8" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb572-9"><a href="stats_detected.html#cb572-9" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> study_site) <span class="sc">+</span> <span class="co"># only fitting main effects of site and not interactions</span></span>
<span id="cb572-10"><a href="stats_detected.html#cb572-10" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb572-11"><a href="stats_detected.html#cb572-11" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb572-12"><a href="stats_detected.html#cb572-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb572-13"><a href="stats_detected.html#cb572-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb572-14"><a href="stats_detected.html#cb572-14" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb572-15"><a href="stats_detected.html#cb572-15" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb572-16"><a href="stats_detected.html#cb572-16" tabindex="-1"></a>  , <span class="at">data =</span> ptcld_validation_data</span>
<span id="cb572-17"><a href="stats_detected.html#cb572-17" tabindex="-1"></a>  , <span class="at">family =</span> brms<span class="sc">::</span><span class="fu">brmsfamily</span>(<span class="at">family =</span> <span class="st">&quot;gaussian&quot;</span>)</span>
<span id="cb572-18"><a href="stats_detected.html#cb572-18" tabindex="-1"></a>  , <span class="at">iter =</span> <span class="dv">20000</span>, <span class="at">warmup =</span> <span class="dv">10000</span>, <span class="at">chains =</span> <span class="dv">4</span></span>
<span id="cb572-19"><a href="stats_detected.html#cb572-19" tabindex="-1"></a>  , <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.999</span>, <span class="at">max_treedepth =</span> <span class="dv">13</span>)</span>
<span id="cb572-20"><a href="stats_detected.html#cb572-20" tabindex="-1"></a>  , <span class="at">cores =</span> <span class="fu">round</span>(parallel<span class="sc">::</span><span class="fu">detectCores</span>()<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb572-21"><a href="stats_detected.html#cb572-21" tabindex="-1"></a>  , <span class="at">prior =</span> <span class="fu">c</span>(</span>
<span id="cb572-22"><a href="stats_detected.html#cb572-22" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">normal</span>(mean_y, sd_y <span class="sc">*</span> <span class="dv">5</span>), <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>)</span>
<span id="cb572-23"><a href="stats_detected.html#cb572-23" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">gamma</span>(alpha, beta), <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>)</span>
<span id="cb572-24"><a href="stats_detected.html#cb572-24" tabindex="-1"></a>    , brms<span class="sc">::</span><span class="fu">prior</span>(<span class="fu">cauchy</span>(<span class="dv">0</span>, sd_y), <span class="at">class =</span> <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb572-25"><a href="stats_detected.html#cb572-25" tabindex="-1"></a>  )</span>
<span id="cb572-26"><a href="stats_detected.html#cb572-26" tabindex="-1"></a>  , <span class="at">stanvars =</span> stanvars_temp</span>
<span id="cb572-27"><a href="stats_detected.html#cb572-27" tabindex="-1"></a>  , <span class="at">file =</span> <span class="fu">paste0</span>(rootdir, <span class="st">&quot;/fits/brms_dbh_rmse_mod&quot;</span>)</span>
<span id="cb572-28"><a href="stats_detected.html#cb572-28" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="qualityfiltering---interaction-5" class="section level4 hasAnchor" number="7.4.3.3">
<h4><span class="header-section-number">7.4.3.3</span> Quality:Filtering - interaction<a href="stats_detected.html#qualityfiltering---interaction-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="stats_detected.html#cb573-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb573-2"><a href="stats_detected.html#cb573-2" tabindex="-1"></a>  ptcld_validation_data <span class="sc">%&gt;%</span> </span>
<span id="cb573-3"><a href="stats_detected.html#cb573-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb573-4"><a href="stats_detected.html#cb573-4" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb573-5"><a href="stats_detected.html#cb573-5" tabindex="-1"></a>      brms_dbh_rmse_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb573-6"><a href="stats_detected.html#cb573-6" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb573-7"><a href="stats_detected.html#cb573-7" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb573-8"><a href="stats_detected.html#cb573-8" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb573-9"><a href="stats_detected.html#cb573-9" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode)</span>
<span id="cb573-10"><a href="stats_detected.html#cb573-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb573-11"><a href="stats_detected.html#cb573-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb573-12"><a href="stats_detected.html#cb573-12" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb573-13"><a href="stats_detected.html#cb573-13" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb573-14"><a href="stats_detected.html#cb573-14" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb573-15"><a href="stats_detected.html#cb573-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb573-16"><a href="stats_detected.html#cb573-16" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb573-17"><a href="stats_detected.html#cb573-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb573-18"><a href="stats_detected.html#cb573-18" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb573-19"><a href="stats_detected.html#cb573-19" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb573-20"><a href="stats_detected.html#cb573-20" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb573-21"><a href="stats_detected.html#cb573-21" tabindex="-1"></a>    )</span>
<span id="cb573-22"><a href="stats_detected.html#cb573-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb573-23"><a href="stats_detected.html#cb573-23" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb573-24"><a href="stats_detected.html#cb573-24" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb573-25"><a href="stats_detected.html#cb573-25" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb573-26"><a href="stats_detected.html#cb573-26" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb573-27"><a href="stats_detected.html#cb573-27" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb573-28"><a href="stats_detected.html#cb573-28" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb573-29"><a href="stats_detected.html#cb573-29" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb573-30"><a href="stats_detected.html#cb573-30" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb573-31"><a href="stats_detected.html#cb573-31" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb573-32"><a href="stats_detected.html#cb573-32" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb573-33"><a href="stats_detected.html#cb573-33" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_dbh_cm_rmse)</span>
<span id="cb573-34"><a href="stats_detected.html#cb573-34" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb573-35"><a href="stats_detected.html#cb573-35" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb573-36"><a href="stats_detected.html#cb573-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb573-37"><a href="stats_detected.html#cb573-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb573-38"><a href="stats_detected.html#cb573-38" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.02</span>,<span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb573-39"><a href="stats_detected.html#cb573-39" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb573-40"><a href="stats_detected.html#cb573-40" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;DBH RMSE (cm)&quot;</span></span>
<span id="cb573-41"><a href="stats_detected.html#cb573-41" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of DBH RMSE (cm) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb573-42"><a href="stats_detected.html#cb573-42" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb573-43"><a href="stats_detected.html#cb573-43" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb573-44"><a href="stats_detected.html#cb573-44" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb573-45"><a href="stats_detected.html#cb573-45" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb573-46"><a href="stats_detected.html#cb573-46" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb573-47"><a href="stats_detected.html#cb573-47" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb573-48"><a href="stats_detected.html#cb573-48" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb573-49"><a href="stats_detected.html#cb573-49" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-440-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="stats_detected.html#cb574-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb574-2"><a href="stats_detected.html#cb574-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb574-3"><a href="stats_detected.html#cb574-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb574-4"><a href="stats_detected.html#cb574-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb574-5"><a href="stats_detected.html#cb574-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(depth_maps_generation_quality,depth_maps_generation_filtering_mode)</span>
<span id="cb574-6"><a href="stats_detected.html#cb574-6" tabindex="-1"></a></span>
<span id="cb574-7"><a href="stats_detected.html#cb574-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb574-8"><a href="stats_detected.html#cb574-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(depth_maps_generation_quality)) <span class="sc">%&gt;%</span> </span>
<span id="cb574-9"><a href="stats_detected.html#cb574-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb574-10"><a href="stats_detected.html#cb574-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb574-11"><a href="stats_detected.html#cb574-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb574-12"><a href="stats_detected.html#cb574-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb574-13"><a href="stats_detected.html#cb574-13" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb574-14"><a href="stats_detected.html#cb574-14" tabindex="-1"></a>      , <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;median&quot;</span></span>
<span id="cb574-15"><a href="stats_detected.html#cb574-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb574-16"><a href="stats_detected.html#cb574-16" tabindex="-1"></a>    )</span>
<span id="cb574-17"><a href="stats_detected.html#cb574-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb574-18"><a href="stats_detected.html#cb574-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb574-19"><a href="stats_detected.html#cb574-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb574-20"><a href="stats_detected.html#cb574-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>depth_maps_generation_quality))) <span class="sc">%&gt;%</span> </span>
<span id="cb574-21"><a href="stats_detected.html#cb574-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-441">Table 7.17: </span>DBH RMSE (cm)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DBH RMSE (cm)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>ultra high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
8.78
</td>
<td style="text-align:right;">
0.31
</td>
<td style="text-align:right;">
17.18
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
8.63
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
17.11
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
8.60
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
16.84
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
8.72
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
17.01
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>high</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
9.40
</td>
<td style="text-align:right;">
0.89
</td>
<td style="text-align:right;">
17.86
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
9.35
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
17.66
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
9.06
</td>
<td style="text-align:right;">
0.52
</td>
<td style="text-align:right;">
17.35
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
9.36
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
17.66
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>medium</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
9.76
</td>
<td style="text-align:right;">
1.31
</td>
<td style="text-align:right;">
18.27
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
8.79
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
17.01
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
9.65
</td>
<td style="text-align:right;">
1.16
</td>
<td style="text-align:right;">
18.05
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
9.29
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:right;">
17.84
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>low</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
8.53
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
16.85
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
8.17
</td>
<td style="text-align:right;">
-0.42
</td>
<td style="text-align:right;">
16.46
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
8.14
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
16.78
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
9.02
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
17.59
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>lowest</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
8.40
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
17.01
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
8.14
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
16.94
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
8.20
</td>
<td style="text-align:right;">
-0.42
</td>
<td style="text-align:right;">
16.58
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
8.36
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
16.71
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="stats_detected.html#cb575-1" tabindex="-1"></a><span class="co"># make the contrasts using compare_levels</span></span>
<span id="cb575-2"><a href="stats_detected.html#cb575-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb575-3"><a href="stats_detected.html#cb575-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb575-4"><a href="stats_detected.html#cb575-4" tabindex="-1"></a>      value</span>
<span id="cb575-5"><a href="stats_detected.html#cb575-5" tabindex="-1"></a>      , <span class="at">by =</span> depth_maps_generation_quality</span>
<span id="cb575-6"><a href="stats_detected.html#cb575-6" tabindex="-1"></a>      , <span class="at">comparison =</span> </span>
<span id="cb575-7"><a href="stats_detected.html#cb575-7" tabindex="-1"></a>        contrast_list</span>
<span id="cb575-8"><a href="stats_detected.html#cb575-8" tabindex="-1"></a>        <span class="co"># tidybayes::emmeans_comparison(&quot;revpairwise&quot;) </span></span>
<span id="cb575-9"><a href="stats_detected.html#cb575-9" tabindex="-1"></a>        <span class="co">#&quot;pairwise&quot;</span></span>
<span id="cb575-10"><a href="stats_detected.html#cb575-10" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb575-11"><a href="stats_detected.html#cb575-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_quality)</span>
<span id="cb575-12"><a href="stats_detected.html#cb575-12" tabindex="-1"></a></span>
<span id="cb575-13"><a href="stats_detected.html#cb575-13" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb575-14"><a href="stats_detected.html#cb575-14" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb575-15"><a href="stats_detected.html#cb575-15" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb575-16"><a href="stats_detected.html#cb575-16" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb575-17"><a href="stats_detected.html#cb575-17" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb575-18"><a href="stats_detected.html#cb575-18" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb575-19"><a href="stats_detected.html#cb575-19" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb575-20"><a href="stats_detected.html#cb575-20" tabindex="-1"></a>        <span class="st">&quot;sorter&quot;</span></span>
<span id="cb575-21"><a href="stats_detected.html#cb575-21" tabindex="-1"></a>        , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb575-22"><a href="stats_detected.html#cb575-22" tabindex="-1"></a>      )</span>
<span id="cb575-23"><a href="stats_detected.html#cb575-23" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb575-24"><a href="stats_detected.html#cb575-24" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb575-25"><a href="stats_detected.html#cb575-25" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb575-26"><a href="stats_detected.html#cb575-26" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb575-27"><a href="stats_detected.html#cb575-27" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb575-28"><a href="stats_detected.html#cb575-28" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb575-29"><a href="stats_detected.html#cb575-29" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb575-30"><a href="stats_detected.html#cb575-30" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb575-31"><a href="stats_detected.html#cb575-31" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb575-32"><a href="stats_detected.html#cb575-32" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb575-33"><a href="stats_detected.html#cb575-33" tabindex="-1"></a>      )}</span>
<span id="cb575-34"><a href="stats_detected.html#cb575-34" tabindex="-1"></a>    )</span>
<span id="cb575-35"><a href="stats_detected.html#cb575-35" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb575-36"><a href="stats_detected.html#cb575-36" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb575-37"><a href="stats_detected.html#cb575-37" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb575-38"><a href="stats_detected.html#cb575-38" tabindex="-1"></a>        <span class="fu">as.numeric</span>()</span>
<span id="cb575-39"><a href="stats_detected.html#cb575-39" tabindex="-1"></a>      )</span>
<span id="cb575-40"><a href="stats_detected.html#cb575-40" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> depth_maps_generation_filtering_mode <span class="sc">%&gt;%</span> </span>
<span id="cb575-41"><a href="stats_detected.html#cb575-41" tabindex="-1"></a>      <span class="fu">factor</span>(</span>
<span id="cb575-42"><a href="stats_detected.html#cb575-42" tabindex="-1"></a>        <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb575-43"><a href="stats_detected.html#cb575-43" tabindex="-1"></a>        , <span class="at">ordered =</span> T</span>
<span id="cb575-44"><a href="stats_detected.html#cb575-44" tabindex="-1"></a>      )</span>
<span id="cb575-45"><a href="stats_detected.html#cb575-45" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb575-46"><a href="stats_detected.html#cb575-46" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb575-47"><a href="stats_detected.html#cb575-47" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast,depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb575-48"><a href="stats_detected.html#cb575-48" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="stats_detected.html#cb576-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb576-2"><a href="stats_detected.html#cb576-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb576-3"><a href="stats_detected.html#cb576-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb576-4"><a href="stats_detected.html#cb576-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb576-5"><a href="stats_detected.html#cb576-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_filtering_mode&quot;</span></span>
<span id="cb576-6"><a href="stats_detected.html#cb576-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb576-7"><a href="stats_detected.html#cb576-7" tabindex="-1"></a>  , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="fl">0.9</span>,<span class="fl">0.75</span>)</span>
<span id="cb576-8"><a href="stats_detected.html#cb576-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb576-9"><a href="stats_detected.html#cb576-9" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb576-10"><a href="stats_detected.html#cb576-10" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb576-11"><a href="stats_detected.html#cb576-11" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast DBH RMSE (cm)&quot;</span></span>
<span id="cb576-12"><a href="stats_detected.html#cb576-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb576-13"><a href="stats_detected.html#cb576-13" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb576-14"><a href="stats_detected.html#cb576-14" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>)</span>
<span id="cb576-15"><a href="stats_detected.html#cb576-15" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-443-1.png" width="1008" /></p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="stats_detected.html#cb577-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb577-2"><a href="stats_detected.html#cb577-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_fltr_comp_dbh_rmse.png&quot;</span></span>
<span id="cb577-3"><a href="stats_detected.html#cb577-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb577-4"><a href="stats_detected.html#cb577-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb577-5"><a href="stats_detected.html#cb577-5" tabindex="-1"></a>)</span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="stats_detected.html#cb578-1" tabindex="-1"></a>brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb578-2"><a href="stats_detected.html#cb578-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb578-3"><a href="stats_detected.html#cb578-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb578-4"><a href="stats_detected.html#cb578-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, depth_maps_generation_filtering_mode) <span class="sc">%&gt;%</span> </span>
<span id="cb578-5"><a href="stats_detected.html#cb578-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, depth_maps_generation_filtering_mode, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb578-6"><a href="stats_detected.html#cb578-6" tabindex="-1"></a>  </span>
<span id="cb578-7"><a href="stats_detected.html#cb578-7" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb578-8"><a href="stats_detected.html#cb578-8" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb578-9"><a href="stats_detected.html#cb578-9" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb578-10"><a href="stats_detected.html#cb578-10" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb578-11"><a href="stats_detected.html#cb578-11" tabindex="-1"></a>      <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb578-12"><a href="stats_detected.html#cb578-12" tabindex="-1"></a>      , <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb578-13"><a href="stats_detected.html#cb578-13" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;DBH RMSE (cm)&quot;</span></span>
<span id="cb578-14"><a href="stats_detected.html#cb578-14" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb578-15"><a href="stats_detected.html#cb578-15" tabindex="-1"></a>    )</span>
<span id="cb578-16"><a href="stats_detected.html#cb578-16" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb578-17"><a href="stats_detected.html#cb578-17" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb578-18"><a href="stats_detected.html#cb578-18" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb578-19"><a href="stats_detected.html#cb578-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-444">Table 7.18: </span>DBH RMSE (cm)<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality contrast
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>DBH RMSE (cm)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.51
</td>
<td style="text-align:right;">
-3.39
</td>
<td style="text-align:right;">
2.05
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.63
</td>
<td style="text-align:right;">
-3.45
</td>
<td style="text-align:right;">
1.74
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.40
</td>
<td style="text-align:right;">
-3.12
</td>
<td style="text-align:right;">
2.06
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - high
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.55
</td>
<td style="text-align:right;">
-3.34
</td>
<td style="text-align:right;">
1.85
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.83
</td>
<td style="text-align:right;">
-3.99
</td>
<td style="text-align:right;">
1.65
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
-2.80
</td>
<td style="text-align:right;">
2.61
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.93
</td>
<td style="text-align:right;">
-3.90
</td>
<td style="text-align:right;">
1.44
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - medium
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.51
</td>
<td style="text-align:right;">
-3.26
</td>
<td style="text-align:right;">
1.94
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
-2.37
</td>
<td style="text-align:right;">
2.99
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
-2.04
</td>
<td style="text-align:right;">
3.12
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.39
</td>
<td style="text-align:right;">
-1.97
</td>
<td style="text-align:right;">
3.15
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
-3.14
</td>
<td style="text-align:right;">
2.27
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.31
</td>
<td style="text-align:right;">
-2.33
</td>
<td style="text-align:right;">
3.29
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
-2.20
</td>
<td style="text-align:right;">
3.29
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.32
</td>
<td style="text-align:right;">
-2.28
</td>
<td style="text-align:right;">
3.23
</td>
</tr>
<tr>
<td style="text-align:left;">
ultra high - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.28
</td>
<td style="text-align:right;">
-2.28
</td>
<td style="text-align:right;">
3.16
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
-0.28
</td>
<td style="text-align:right;">
-3.17
</td>
<td style="text-align:right;">
2.25
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.46
</td>
<td style="text-align:right;">
-2.01
</td>
<td style="text-align:right;">
3.48
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.48
</td>
<td style="text-align:right;">
-3.36
</td>
<td style="text-align:right;">
2.00
</td>
</tr>
<tr>
<td style="text-align:left;">
high - medium
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
-2.51
</td>
<td style="text-align:right;">
2.61
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
-1.78
</td>
<td style="text-align:right;">
3.73
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
1.06
</td>
<td style="text-align:right;">
-1.34
</td>
<td style="text-align:right;">
4.06
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
-1.52
</td>
<td style="text-align:right;">
3.69
</td>
</tr>
<tr>
<td style="text-align:left;">
high - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.28
</td>
<td style="text-align:right;">
-2.46
</td>
<td style="text-align:right;">
3.05
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
-1.77
</td>
<td style="text-align:right;">
4.07
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
1.06
</td>
<td style="text-align:right;">
-1.38
</td>
<td style="text-align:right;">
4.36
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
-1.85
</td>
<td style="text-align:right;">
3.85
</td>
</tr>
<tr>
<td style="text-align:left;">
high - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
-1.70
</td>
<td style="text-align:right;">
4.04
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
1.08
</td>
<td style="text-align:right;">
-1.48
</td>
<td style="text-align:right;">
4.25
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.55
</td>
<td style="text-align:right;">
-1.98
</td>
<td style="text-align:right;">
3.39
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
1.35
</td>
<td style="text-align:right;">
-1.06
</td>
<td style="text-align:right;">
4.63
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - low
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
-2.64
</td>
<td style="text-align:right;">
3.03
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
1.18
</td>
<td style="text-align:right;">
-1.35
</td>
<td style="text-align:right;">
4.64
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.55
</td>
<td style="text-align:right;">
-2.25
</td>
<td style="text-align:right;">
3.73
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
1.30
</td>
<td style="text-align:right;">
-1.24
</td>
<td style="text-align:right;">
4.59
</td>
</tr>
<tr>
<td style="text-align:left;">
medium - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
-1.73
</td>
<td style="text-align:right;">
3.96
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
0.10
</td>
<td style="text-align:right;">
-2.59
</td>
<td style="text-align:right;">
2.97
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-2.79
</td>
<td style="text-align:right;">
2.74
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
-2.81
</td>
<td style="text-align:right;">
2.70
</td>
</tr>
<tr>
<td style="text-align:left;">
low - lowest
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
0.54
</td>
<td style="text-align:right;">
-2.02
</td>
<td style="text-align:right;">
3.61
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequality---interaction-5" class="section level4 hasAnchor" number="7.4.3.4">
<h4><span class="header-section-number">7.4.3.4</span> Software:Quality - interaction<a href="stats_detected.html#softwarequality---interaction-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="stats_detected.html#cb579-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb579-2"><a href="stats_detected.html#cb579-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb579-3"><a href="stats_detected.html#cb579-3" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb579-4"><a href="stats_detected.html#cb579-4" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb579-5"><a href="stats_detected.html#cb579-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb579-6"><a href="stats_detected.html#cb579-6" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb579-7"><a href="stats_detected.html#cb579-7" tabindex="-1"></a>      brms_dbh_rmse_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb579-8"><a href="stats_detected.html#cb579-8" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb579-9"><a href="stats_detected.html#cb579-9" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb579-10"><a href="stats_detected.html#cb579-10" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb579-11"><a href="stats_detected.html#cb579-11" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software)</span>
<span id="cb579-12"><a href="stats_detected.html#cb579-12" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb579-13"><a href="stats_detected.html#cb579-13" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb579-14"><a href="stats_detected.html#cb579-14" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb579-15"><a href="stats_detected.html#cb579-15" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb579-16"><a href="stats_detected.html#cb579-16" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb579-17"><a href="stats_detected.html#cb579-17" tabindex="-1"></a>    <span class="co"># remove out-of-sample obs</span></span>
<span id="cb579-18"><a href="stats_detected.html#cb579-18" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb579-19"><a href="stats_detected.html#cb579-19" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb579-20"><a href="stats_detected.html#cb579-20" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb579-21"><a href="stats_detected.html#cb579-21" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb579-22"><a href="stats_detected.html#cb579-22" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb579-23"><a href="stats_detected.html#cb579-23" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb579-24"><a href="stats_detected.html#cb579-24" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb579-25"><a href="stats_detected.html#cb579-25" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb579-26"><a href="stats_detected.html#cb579-26" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb579-27"><a href="stats_detected.html#cb579-27" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb579-28"><a href="stats_detected.html#cb579-28" tabindex="-1"></a>    )</span>
<span id="cb579-29"><a href="stats_detected.html#cb579-29" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb579-30"><a href="stats_detected.html#cb579-30" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb579-31"><a href="stats_detected.html#cb579-31" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb579-32"><a href="stats_detected.html#cb579-32" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb579-33"><a href="stats_detected.html#cb579-33" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb579-34"><a href="stats_detected.html#cb579-34" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb579-35"><a href="stats_detected.html#cb579-35" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb579-36"><a href="stats_detected.html#cb579-36" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb579-37"><a href="stats_detected.html#cb579-37" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb579-38"><a href="stats_detected.html#cb579-38" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb579-39"><a href="stats_detected.html#cb579-39" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb579-40"><a href="stats_detected.html#cb579-40" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_dbh_cm_rmse)</span>
<span id="cb579-41"><a href="stats_detected.html#cb579-41" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb579-42"><a href="stats_detected.html#cb579-42" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb579-43"><a href="stats_detected.html#cb579-43" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb579-44"><a href="stats_detected.html#cb579-44" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)) <span class="sc">+</span></span>
<span id="cb579-45"><a href="stats_detected.html#cb579-45" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.02</span>,<span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb579-46"><a href="stats_detected.html#cb579-46" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb579-47"><a href="stats_detected.html#cb579-47" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;DBH RMSE (cm)&quot;</span></span>
<span id="cb579-48"><a href="stats_detected.html#cb579-48" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of DBH RMSE (cm) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb579-49"><a href="stats_detected.html#cb579-49" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb579-50"><a href="stats_detected.html#cb579-50" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb579-51"><a href="stats_detected.html#cb579-51" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb579-52"><a href="stats_detected.html#cb579-52" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb579-53"><a href="stats_detected.html#cb579-53" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb579-54"><a href="stats_detected.html#cb579-54" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb579-55"><a href="stats_detected.html#cb579-55" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb579-56"><a href="stats_detected.html#cb579-56" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-446-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="stats_detected.html#cb580-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb580-2"><a href="stats_detected.html#cb580-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb580-3"><a href="stats_detected.html#cb580-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb580-4"><a href="stats_detected.html#cb580-4" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb580-5"><a href="stats_detected.html#cb580-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb580-6"><a href="stats_detected.html#cb580-6" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_quality, software)</span>
<span id="cb580-7"><a href="stats_detected.html#cb580-7" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_quality, software)</span>
<span id="cb580-8"><a href="stats_detected.html#cb580-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb580-9"><a href="stats_detected.html#cb580-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span></span>
<span id="cb580-10"><a href="stats_detected.html#cb580-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_quality)</span>
<span id="cb580-11"><a href="stats_detected.html#cb580-11" tabindex="-1"></a></span>
<span id="cb580-12"><a href="stats_detected.html#cb580-12" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb580-13"><a href="stats_detected.html#cb580-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb580-14"><a href="stats_detected.html#cb580-14" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb580-15"><a href="stats_detected.html#cb580-15" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb580-16"><a href="stats_detected.html#cb580-16" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb580-17"><a href="stats_detected.html#cb580-17" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb580-18"><a href="stats_detected.html#cb580-18" tabindex="-1"></a>      <span class="st">&quot;quality&quot;</span></span>
<span id="cb580-19"><a href="stats_detected.html#cb580-19" tabindex="-1"></a>      , <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;median&quot;</span></span>
<span id="cb580-20"><a href="stats_detected.html#cb580-20" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb580-21"><a href="stats_detected.html#cb580-21" tabindex="-1"></a>    )</span>
<span id="cb580-22"><a href="stats_detected.html#cb580-22" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb580-23"><a href="stats_detected.html#cb580-23" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb580-24"><a href="stats_detected.html#cb580-24" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb580-25"><a href="stats_detected.html#cb580-25" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb580-26"><a href="stats_detected.html#cb580-26" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-447">Table 7.19: </span>DBH RMSE (cm)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DBH RMSE (cm)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
8.11
</td>
<td style="text-align:right;">
2.11
</td>
<td style="text-align:right;">
14.28
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
8.75
</td>
<td style="text-align:right;">
2.73
</td>
<td style="text-align:right;">
14.93
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
9.47
</td>
<td style="text-align:right;">
2.87
</td>
<td style="text-align:right;">
15.33
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
8.24
</td>
<td style="text-align:right;">
2.16
</td>
<td style="text-align:right;">
14.36
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
7.84
</td>
<td style="text-align:right;">
1.78
</td>
<td style="text-align:right;">
13.98
</td>
</tr>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
7.85
</td>
<td style="text-align:right;">
1.85
</td>
<td style="text-align:right;">
14.15
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
8.38
</td>
<td style="text-align:right;">
2.48
</td>
<td style="text-align:right;">
14.83
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
7.75
</td>
<td style="text-align:right;">
1.56
</td>
<td style="text-align:right;">
13.95
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
7.20
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
13.22
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
7.10
</td>
<td style="text-align:right;">
1.10
</td>
<td style="text-align:right;">
13.27
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
10.03
</td>
<td style="text-align:right;">
3.60
</td>
<td style="text-align:right;">
16.07
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
10.87
</td>
<td style="text-align:right;">
4.77
</td>
<td style="text-align:right;">
17.26
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
11.07
</td>
<td style="text-align:right;">
5.04
</td>
<td style="text-align:right;">
17.59
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
9.90
</td>
<td style="text-align:right;">
3.69
</td>
<td style="text-align:right;">
16.11
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="stats_detected.html#cb581-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb581-2"><a href="stats_detected.html#cb581-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb581-3"><a href="stats_detected.html#cb581-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb581-4"><a href="stats_detected.html#cb581-4" tabindex="-1"></a>    value</span>
<span id="cb581-5"><a href="stats_detected.html#cb581-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_quality</span>
<span id="cb581-6"><a href="stats_detected.html#cb581-6" tabindex="-1"></a>    , <span class="at">comparison =</span> contrast_list</span>
<span id="cb581-7"><a href="stats_detected.html#cb581-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb581-8"><a href="stats_detected.html#cb581-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_quality)</span>
<span id="cb581-9"><a href="stats_detected.html#cb581-9" tabindex="-1"></a></span>
<span id="cb581-10"><a href="stats_detected.html#cb581-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb581-11"><a href="stats_detected.html#cb581-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb581-12"><a href="stats_detected.html#cb581-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb581-13"><a href="stats_detected.html#cb581-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb581-14"><a href="stats_detected.html#cb581-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb581-15"><a href="stats_detected.html#cb581-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb581-16"><a href="stats_detected.html#cb581-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb581-17"><a href="stats_detected.html#cb581-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb581-18"><a href="stats_detected.html#cb581-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb581-19"><a href="stats_detected.html#cb581-19" tabindex="-1"></a>    )</span>
<span id="cb581-20"><a href="stats_detected.html#cb581-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb581-21"><a href="stats_detected.html#cb581-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb581-22"><a href="stats_detected.html#cb581-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb581-23"><a href="stats_detected.html#cb581-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb581-24"><a href="stats_detected.html#cb581-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb581-25"><a href="stats_detected.html#cb581-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb581-26"><a href="stats_detected.html#cb581-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb581-27"><a href="stats_detected.html#cb581-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb581-28"><a href="stats_detected.html#cb581-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb581-29"><a href="stats_detected.html#cb581-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb581-30"><a href="stats_detected.html#cb581-30" tabindex="-1"></a>      )}</span>
<span id="cb581-31"><a href="stats_detected.html#cb581-31" tabindex="-1"></a>    )</span>
<span id="cb581-32"><a href="stats_detected.html#cb581-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb581-33"><a href="stats_detected.html#cb581-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb581-34"><a href="stats_detected.html#cb581-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb581-35"><a href="stats_detected.html#cb581-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb581-36"><a href="stats_detected.html#cb581-36" tabindex="-1"></a>      )</span>
<span id="cb581-37"><a href="stats_detected.html#cb581-37" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb581-38"><a href="stats_detected.html#cb581-38" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb581-39"><a href="stats_detected.html#cb581-39" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb581-40"><a href="stats_detected.html#cb581-40" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb581-41"><a href="stats_detected.html#cb581-41" tabindex="-1"></a></span>
<span id="cb581-42"><a href="stats_detected.html#cb581-42" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb581-43"><a href="stats_detected.html#cb581-43" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb581-44"><a href="stats_detected.html#cb581-44" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb581-45"><a href="stats_detected.html#cb581-45" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb581-46"><a href="stats_detected.html#cb581-46" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter1 <span class="sc">==</span> depth_maps_generation_quality)</span>
<span id="cb581-47"><a href="stats_detected.html#cb581-47" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb581-48"><a href="stats_detected.html#cb581-48" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb581-49"><a href="stats_detected.html#cb581-49" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb581-50"><a href="stats_detected.html#cb581-50" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter2 <span class="sc">==</span> depth_maps_generation_quality)</span>
<span id="cb581-51"><a href="stats_detected.html#cb581-51" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="stats_detected.html#cb582-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb582-2"><a href="stats_detected.html#cb582-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb582-3"><a href="stats_detected.html#cb582-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb582-4"><a href="stats_detected.html#cb582-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;quality&quot;</span></span>
<span id="cb582-5"><a href="stats_detected.html#cb582-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb582-6"><a href="stats_detected.html#cb582-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.8</span></span>
<span id="cb582-7"><a href="stats_detected.html#cb582-7" tabindex="-1"></a>  , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="fl">0.33</span>,<span class="fl">0.2</span>)</span>
<span id="cb582-8"><a href="stats_detected.html#cb582-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb582-9"><a href="stats_detected.html#cb582-9" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb582-10"><a href="stats_detected.html#cb582-10" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by software&quot;</span></span>
<span id="cb582-11"><a href="stats_detected.html#cb582-11" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast DBH RMSE (cm)&quot;</span></span>
<span id="cb582-12"><a href="stats_detected.html#cb582-12" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-449-1.png" width="1008" /></p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="stats_detected.html#cb583-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb583-2"><a href="stats_detected.html#cb583-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_sftwr_comp_dbh_rmse.png&quot;</span></span>
<span id="cb583-3"><a href="stats_detected.html#cb583-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb583-4"><a href="stats_detected.html#cb583-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb583-5"><a href="stats_detected.html#cb583-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other RMSE contrasts for publication</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="stats_detected.html#cb584-1" tabindex="-1"></a>ptchwrk_qlty_sftwr_comp_dbh_rmse <span class="ot">=</span></span>
<span id="cb584-2"><a href="stats_detected.html#cb584-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb584-3"><a href="stats_detected.html#cb584-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb584-4"><a href="stats_detected.html#cb584-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb584-5"><a href="stats_detected.html#cb584-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb584-6"><a href="stats_detected.html#cb584-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.5</span></span>
<span id="cb584-7"><a href="stats_detected.html#cb584-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb584-8"><a href="stats_detected.html#cb584-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.8</span></span>
<span id="cb584-9"><a href="stats_detected.html#cb584-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb584-10"><a href="stats_detected.html#cb584-10" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb584-11"><a href="stats_detected.html#cb584-11" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span> <span class="co"># &quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb584-12"><a href="stats_detected.html#cb584-12" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;DBH RMSE (cm) constrast&quot;</span></span>
<span id="cb584-13"><a href="stats_detected.html#cb584-13" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb584-14"><a href="stats_detected.html#cb584-14" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb584-15"><a href="stats_detected.html#cb584-15" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span></span>
<span id="cb584-16"><a href="stats_detected.html#cb584-16" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb584-17"><a href="stats_detected.html#cb584-17" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb584-18"><a href="stats_detected.html#cb584-18" tabindex="-1"></a>    ) </span>
<span id="cb584-19"><a href="stats_detected.html#cb584-19" tabindex="-1"></a><span class="co"># ptchwrk_qlty_sftwr_comp_dbh_rmse</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="stats_detected.html#cb585-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb585-2"><a href="stats_detected.html#cb585-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb585-3"><a href="stats_detected.html#cb585-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb585-4"><a href="stats_detected.html#cb585-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb585-5"><a href="stats_detected.html#cb585-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, software, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb585-6"><a href="stats_detected.html#cb585-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, contrast)</span>
<span id="cb585-7"><a href="stats_detected.html#cb585-7" tabindex="-1"></a></span>
<span id="cb585-8"><a href="stats_detected.html#cb585-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb585-9"><a href="stats_detected.html#cb585-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb585-10"><a href="stats_detected.html#cb585-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb585-11"><a href="stats_detected.html#cb585-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">1</span></span>
<span id="cb585-12"><a href="stats_detected.html#cb585-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb585-13"><a href="stats_detected.html#cb585-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb585-14"><a href="stats_detected.html#cb585-14" tabindex="-1"></a>      <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb585-15"><a href="stats_detected.html#cb585-15" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;DBH RMSE (cm)&quot;</span></span>
<span id="cb585-16"><a href="stats_detected.html#cb585-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb585-17"><a href="stats_detected.html#cb585-17" tabindex="-1"></a>    )</span>
<span id="cb585-18"><a href="stats_detected.html#cb585-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb585-19"><a href="stats_detected.html#cb585-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb585-20"><a href="stats_detected.html#cb585-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb585-21"><a href="stats_detected.html#cb585-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb585-22"><a href="stats_detected.html#cb585-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-451">Table 7.20: </span>DBH RMSE (cm)<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality contrast
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>DBH RMSE (cm)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="10">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:right;">
-0.6
</td>
<td style="text-align:right;">
-3.3
</td>
<td style="text-align:right;">
1.7
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:right;">
-1.2
</td>
<td style="text-align:right;">
-4.2
</td>
<td style="text-align:right;">
1.1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:right;">
-0.1
</td>
<td style="text-align:right;">
-2.8
</td>
<td style="text-align:right;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - lowest
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
-2.2
</td>
<td style="text-align:right;">
2.9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:right;">
-0.6
</td>
<td style="text-align:right;">
-3.4
</td>
<td style="text-align:right;">
1.8
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
-2.0
</td>
<td style="text-align:right;">
3.1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - lowest
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
-1.6
</td>
<td style="text-align:right;">
3.7
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
-1.2
</td>
<td style="text-align:right;">
3.9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - lowest
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
-0.9
</td>
<td style="text-align:right;">
4.6
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low - lowest
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
-2.1
</td>
<td style="text-align:right;">
3.0
</td>
</tr>
<tr grouplength="10">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:right;">
-0.5
</td>
<td style="text-align:right;">
-3.1
</td>
<td style="text-align:right;">
1.9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
-2.6
</td>
<td style="text-align:right;">
2.9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
-1.7
</td>
<td style="text-align:right;">
3.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - lowest
</td>
<td style="text-align:right;">
0.7
</td>
<td style="text-align:right;">
-1.7
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
-1.8
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
-1.2
</td>
<td style="text-align:right;">
3.9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - lowest
</td>
<td style="text-align:right;">
1.2
</td>
<td style="text-align:right;">
-1.1
</td>
<td style="text-align:right;">
4.1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
-2.1
</td>
<td style="text-align:right;">
3.1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - lowest
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
-2.0
</td>
<td style="text-align:right;">
3.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low - lowest
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
-2.4
</td>
<td style="text-align:right;">
2.6
</td>
</tr>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - high
</td>
<td style="text-align:right;">
-0.7
</td>
<td style="text-align:right;">
-3.7
</td>
<td style="text-align:right;">
1.6
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - medium
</td>
<td style="text-align:right;">
-0.9
</td>
<td style="text-align:right;">
-3.9
</td>
<td style="text-align:right;">
1.5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high - low
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
-2.4
</td>
<td style="text-align:right;">
2.8
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - medium
</td>
<td style="text-align:right;">
-0.2
</td>
<td style="text-align:right;">
-2.8
</td>
<td style="text-align:right;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high - low
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
-1.5
</td>
<td style="text-align:right;">
3.8
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium - low
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
-1.4
</td>
<td style="text-align:right;">
4.1
</td>
</tr>
</tbody>
</table>
</div>
<p>The contrasts above address the question “are there differences in RMSE based on dense point cloud generation quality within each software?”.</p>
<p>To address the different question of “are there differences in RMSE based on the processing software used at a given dense point cloud generation quality?” we need to utilize a different formulation of the <code>comparison</code> parameter within our call to the <code>tidybayes::compare_levels</code> function and calculate the contrast by <code>software</code> instead</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="stats_detected.html#cb586-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb586-2"><a href="stats_detected.html#cb586-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb586-3"><a href="stats_detected.html#cb586-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb586-4"><a href="stats_detected.html#cb586-4" tabindex="-1"></a>    value</span>
<span id="cb586-5"><a href="stats_detected.html#cb586-5" tabindex="-1"></a>    , <span class="at">by =</span> software</span>
<span id="cb586-6"><a href="stats_detected.html#cb586-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb586-7"><a href="stats_detected.html#cb586-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb586-8"><a href="stats_detected.html#cb586-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> software) <span class="sc">%&gt;%</span> </span>
<span id="cb586-9"><a href="stats_detected.html#cb586-9" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb586-10"><a href="stats_detected.html#cb586-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb586-11"><a href="stats_detected.html#cb586-11" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb586-12"><a href="stats_detected.html#cb586-12" tabindex="-1"></a></span>
<span id="cb586-13"><a href="stats_detected.html#cb586-13" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb586-14"><a href="stats_detected.html#cb586-14" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb586-15"><a href="stats_detected.html#cb586-15" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb586-16"><a href="stats_detected.html#cb586-16" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb586-17"><a href="stats_detected.html#cb586-17" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb586-18"><a href="stats_detected.html#cb586-18" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb586-19"><a href="stats_detected.html#cb586-19" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb586-20"><a href="stats_detected.html#cb586-20" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb586-21"><a href="stats_detected.html#cb586-21" tabindex="-1"></a>    )</span>
<span id="cb586-22"><a href="stats_detected.html#cb586-22" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb586-23"><a href="stats_detected.html#cb586-23" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb586-24"><a href="stats_detected.html#cb586-24" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb586-25"><a href="stats_detected.html#cb586-25" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb586-26"><a href="stats_detected.html#cb586-26" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb586-27"><a href="stats_detected.html#cb586-27" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb586-28"><a href="stats_detected.html#cb586-28" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(sorter1 <span class="sc">==</span> software, depth_maps_generation_quality)</span>
<span id="cb586-29"><a href="stats_detected.html#cb586-29" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb586-30"><a href="stats_detected.html#cb586-30" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb586-31"><a href="stats_detected.html#cb586-31" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality)</span>
<span id="cb586-32"><a href="stats_detected.html#cb586-32" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(sorter2 <span class="sc">==</span> software, depth_maps_generation_quality)</span>
<span id="cb586-33"><a href="stats_detected.html#cb586-33" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="stats_detected.html#cb587-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb587-2"><a href="stats_detected.html#cb587-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb587-3"><a href="stats_detected.html#cb587-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb587-4"><a href="stats_detected.html#cb587-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb587-5"><a href="stats_detected.html#cb587-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_quality&quot;</span></span>
<span id="cb587-6"><a href="stats_detected.html#cb587-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.9</span></span>
<span id="cb587-7"><a href="stats_detected.html#cb587-7" tabindex="-1"></a>  <span class="co"># , x_expand = c(0.25,0.1)</span></span>
<span id="cb587-8"><a href="stats_detected.html#cb587-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb587-9"><a href="stats_detected.html#cb587-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(depth_maps_generation_quality), <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb587-10"><a href="stats_detected.html#cb587-10" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb587-11"><a href="stats_detected.html#cb587-11" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality&quot;</span></span>
<span id="cb587-12"><a href="stats_detected.html#cb587-12" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast DBH RMSE (cm)&quot;</span></span>
<span id="cb587-13"><a href="stats_detected.html#cb587-13" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb587-14"><a href="stats_detected.html#cb587-14" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb587-15"><a href="stats_detected.html#cb587-15" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">75</span>, .<span class="dv">13</span>)</span>
<span id="cb587-16"><a href="stats_detected.html#cb587-16" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb587-17"><a href="stats_detected.html#cb587-17" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb587-18"><a href="stats_detected.html#cb587-18" tabindex="-1"></a>    <span class="at">legend.key.width  =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb587-19"><a href="stats_detected.html#cb587-19" tabindex="-1"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="dv">7</span>, <span class="st">&quot;lines&quot;</span>)</span>
<span id="cb587-20"><a href="stats_detected.html#cb587-20" tabindex="-1"></a>  )))</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-453-1.png" width="1008" /></p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="stats_detected.html#cb588-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb588-2"><a href="stats_detected.html#cb588-2" tabindex="-1"></a>  <span class="st">&quot;../data/sftwr_qlty_comp_dbh_rmse.png&quot;</span></span>
<span id="cb588-3"><a href="stats_detected.html#cb588-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb588-4"><a href="stats_detected.html#cb588-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb588-5"><a href="stats_detected.html#cb588-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other RMSE contrasts for publication</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="stats_detected.html#cb589-1" tabindex="-1"></a>ptchwrk_sftwr_qlty_comp_dbh_rmse <span class="ot">=</span></span>
<span id="cb589-2"><a href="stats_detected.html#cb589-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb589-3"><a href="stats_detected.html#cb589-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb589-4"><a href="stats_detected.html#cb589-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;software contrast&quot;</span></span>
<span id="cb589-5"><a href="stats_detected.html#cb589-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;depth_maps_generation_quality&quot;</span></span>
<span id="cb589-6"><a href="stats_detected.html#cb589-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb589-7"><a href="stats_detected.html#cb589-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb589-8"><a href="stats_detected.html#cb589-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.8</span></span>
<span id="cb589-9"><a href="stats_detected.html#cb589-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb589-10"><a href="stats_detected.html#cb589-10" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(depth_maps_generation_quality), <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb589-11"><a href="stats_detected.html#cb589-11" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb589-12"><a href="stats_detected.html#cb589-12" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb589-13"><a href="stats_detected.html#cb589-13" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;DBH RMSE (cm) constrast&quot;</span></span>
<span id="cb589-14"><a href="stats_detected.html#cb589-14" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb589-15"><a href="stats_detected.html#cb589-15" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb589-16"><a href="stats_detected.html#cb589-16" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;inside&quot;</span></span>
<span id="cb589-17"><a href="stats_detected.html#cb589-17" tabindex="-1"></a>      , <span class="at">legend.position.inside =</span> <span class="fu">c</span>(.<span class="dv">8</span>, .<span class="dv">13</span>)</span>
<span id="cb589-18"><a href="stats_detected.html#cb589-18" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb589-19"><a href="stats_detected.html#cb589-19" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb589-20"><a href="stats_detected.html#cb589-20" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb589-21"><a href="stats_detected.html#cb589-21" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb589-22"><a href="stats_detected.html#cb589-22" tabindex="-1"></a>      <span class="at">legend.key.width  =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">&quot;lines&quot;</span>),</span>
<span id="cb589-23"><a href="stats_detected.html#cb589-23" tabindex="-1"></a>      <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="fl">6.5</span>, <span class="st">&quot;lines&quot;</span>)</span>
<span id="cb589-24"><a href="stats_detected.html#cb589-24" tabindex="-1"></a>    )))</span>
<span id="cb589-25"><a href="stats_detected.html#cb589-25" tabindex="-1"></a><span class="co"># ptchwrk_sftwr_qlty_comp_dbh_rmse</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="stats_detected.html#cb590-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb590-2"><a href="stats_detected.html#cb590-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb590-3"><a href="stats_detected.html#cb590-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb590-4"><a href="stats_detected.html#cb590-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb590-5"><a href="stats_detected.html#cb590-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, depth_maps_generation_quality, value, .lower, .upper) </span>
<span id="cb590-6"><a href="stats_detected.html#cb590-6" tabindex="-1"></a>  </span>
<span id="cb590-7"><a href="stats_detected.html#cb590-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb590-8"><a href="stats_detected.html#cb590-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(contrast)) <span class="sc">%&gt;%</span> </span>
<span id="cb590-9"><a href="stats_detected.html#cb590-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb590-10"><a href="stats_detected.html#cb590-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">1</span></span>
<span id="cb590-11"><a href="stats_detected.html#cb590-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb590-12"><a href="stats_detected.html#cb590-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb590-13"><a href="stats_detected.html#cb590-13" tabindex="-1"></a>      <span class="st">&quot;quality contrast&quot;</span></span>
<span id="cb590-14"><a href="stats_detected.html#cb590-14" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;DBH RMSE (cm)&quot;</span></span>
<span id="cb590-15"><a href="stats_detected.html#cb590-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb590-16"><a href="stats_detected.html#cb590-16" tabindex="-1"></a>    )</span>
<span id="cb590-17"><a href="stats_detected.html#cb590-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb590-18"><a href="stats_detected.html#cb590-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb590-19"><a href="stats_detected.html#cb590-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb590-20"><a href="stats_detected.html#cb590-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>contrast))) <span class="sc">%&gt;%</span> </span>
<span id="cb590-21"><a href="stats_detected.html#cb590-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-456">Table 7.21: </span>DBH RMSE (cm)<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality contrast
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>DBH RMSE (cm)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP - METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
-0.3
</td>
<td style="text-align:right;">
-2.9
</td>
<td style="text-align:right;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
-0.4
</td>
<td style="text-align:right;">
-2.9
</td>
<td style="text-align:right;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
-1.6
</td>
<td style="text-align:right;">
-4.8
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
-1.0
</td>
<td style="text-align:right;">
-3.6
</td>
<td style="text-align:right;">
1.5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
lowest
</td>
<td style="text-align:right;">
-0.7
</td>
<td style="text-align:right;">
-3.3
</td>
<td style="text-align:right;">
1.8
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D - METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
1.9
</td>
<td style="text-align:right;">
-0.9
</td>
<td style="text-align:right;">
4.7
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
2.1
</td>
<td style="text-align:right;">
-0.7
</td>
<td style="text-align:right;">
5.0
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
-1.2
</td>
<td style="text-align:right;">
4.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
-1.1
</td>
<td style="text-align:right;">
4.5
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D - OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
ultra high
</td>
<td style="text-align:right;">
2.2
</td>
<td style="text-align:right;">
-0.9
</td>
<td style="text-align:right;">
5.1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
high
</td>
<td style="text-align:right;">
2.5
</td>
<td style="text-align:right;">
-0.5
</td>
<td style="text-align:right;">
5.3
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
medium
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
6.5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
low
</td>
<td style="text-align:right;">
2.7
</td>
<td style="text-align:right;">
-0.2
</td>
<td style="text-align:right;">
5.6
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarefiltering---interaction-5" class="section level4 hasAnchor" number="7.4.3.5">
<h4><span class="header-section-number">7.4.3.5</span> Software:Filtering - interaction<a href="stats_detected.html#softwarefiltering---interaction-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="stats_detected.html#cb591-1" tabindex="-1"></a>draws_temp <span class="ot">=</span> </span>
<span id="cb591-2"><a href="stats_detected.html#cb591-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb591-3"><a href="stats_detected.html#cb591-3" tabindex="-1"></a>      <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb591-4"><a href="stats_detected.html#cb591-4" tabindex="-1"></a>      , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb591-5"><a href="stats_detected.html#cb591-5" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb591-6"><a href="stats_detected.html#cb591-6" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb591-7"><a href="stats_detected.html#cb591-7" tabindex="-1"></a>      brms_dbh_rmse_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb591-8"><a href="stats_detected.html#cb591-8" tabindex="-1"></a>      <span class="co"># this part is crucial</span></span>
<span id="cb591-9"><a href="stats_detected.html#cb591-9" tabindex="-1"></a>      , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb591-10"><a href="stats_detected.html#cb591-10" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span> </span>
<span id="cb591-11"><a href="stats_detected.html#cb591-11" tabindex="-1"></a>        (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb591-12"><a href="stats_detected.html#cb591-12" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb591-13"><a href="stats_detected.html#cb591-13" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb591-14"><a href="stats_detected.html#cb591-14" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb591-15"><a href="stats_detected.html#cb591-15" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb591-16"><a href="stats_detected.html#cb591-16" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span></span>
<span id="cb591-17"><a href="stats_detected.html#cb591-17" tabindex="-1"></a>  <span class="co"># remove out-of-sample obs</span></span>
<span id="cb591-18"><a href="stats_detected.html#cb591-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb591-19"><a href="stats_detected.html#cb591-19" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(depth_maps_generation_filtering_mode, software)</span>
<span id="cb591-20"><a href="stats_detected.html#cb591-20" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(depth_maps_generation_filtering_mode, software)</span>
<span id="cb591-21"><a href="stats_detected.html#cb591-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb591-22"><a href="stats_detected.html#cb591-22" tabindex="-1"></a>  <span class="co"># plot</span></span>
<span id="cb591-23"><a href="stats_detected.html#cb591-23" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb591-24"><a href="stats_detected.html#cb591-24" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb591-25"><a href="stats_detected.html#cb591-25" tabindex="-1"></a>      <span class="at">y =</span> value, <span class="at">x =</span> software</span>
<span id="cb591-26"><a href="stats_detected.html#cb591-26" tabindex="-1"></a>      , <span class="at">fill =</span> med</span>
<span id="cb591-27"><a href="stats_detected.html#cb591-27" tabindex="-1"></a>    )</span>
<span id="cb591-28"><a href="stats_detected.html#cb591-28" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb591-29"><a href="stats_detected.html#cb591-29" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb591-30"><a href="stats_detected.html#cb591-30" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb591-31"><a href="stats_detected.html#cb591-31" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb591-32"><a href="stats_detected.html#cb591-32" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb591-33"><a href="stats_detected.html#cb591-33" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb591-34"><a href="stats_detected.html#cb591-34" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb591-35"><a href="stats_detected.html#cb591-35" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb591-36"><a href="stats_detected.html#cb591-36" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb591-37"><a href="stats_detected.html#cb591-37" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb591-38"><a href="stats_detected.html#cb591-38" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb591-39"><a href="stats_detected.html#cb591-39" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_dbh_cm_rmse)</span>
<span id="cb591-40"><a href="stats_detected.html#cb591-40" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb591-41"><a href="stats_detected.html#cb591-41" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb591-42"><a href="stats_detected.html#cb591-42" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb591-43"><a href="stats_detected.html#cb591-43" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_filtering_mode)) <span class="sc">+</span></span>
<span id="cb591-44"><a href="stats_detected.html#cb591-44" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.02</span>,<span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb591-45"><a href="stats_detected.html#cb591-45" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb591-46"><a href="stats_detected.html#cb591-46" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;software&quot;</span>, <span class="at">y =</span> <span class="st">&quot;DBH RMSE (cm)&quot;</span></span>
<span id="cb591-47"><a href="stats_detected.html#cb591-47" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of DBH RMSE (cm) with 95% HDI</span><span class="sc">\n</span><span class="st">by filtering mode&quot;</span></span>
<span id="cb591-48"><a href="stats_detected.html#cb591-48" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb591-49"><a href="stats_detected.html#cb591-49" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb591-50"><a href="stats_detected.html#cb591-50" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb591-51"><a href="stats_detected.html#cb591-51" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb591-52"><a href="stats_detected.html#cb591-52" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb591-53"><a href="stats_detected.html#cb591-53" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb591-54"><a href="stats_detected.html#cb591-54" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb591-55"><a href="stats_detected.html#cb591-55" tabindex="-1"></a>    ) </span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-457-1.png" width="1008" /></p>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="stats_detected.html#cb592-1" tabindex="-1"></a>table_temp <span class="ot">=</span> </span>
<span id="cb592-2"><a href="stats_detected.html#cb592-2" tabindex="-1"></a>  draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb592-3"><a href="stats_detected.html#cb592-3" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb592-4"><a href="stats_detected.html#cb592-4" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(.point,.interval, .width,.row)) <span class="sc">%&gt;%</span> </span>
<span id="cb592-5"><a href="stats_detected.html#cb592-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(software,depth_maps_generation_filtering_mode)</span>
<span id="cb592-6"><a href="stats_detected.html#cb592-6" tabindex="-1"></a></span>
<span id="cb592-7"><a href="stats_detected.html#cb592-7" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb592-8"><a href="stats_detected.html#cb592-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb592-9"><a href="stats_detected.html#cb592-9" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb592-10"><a href="stats_detected.html#cb592-10" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb592-11"><a href="stats_detected.html#cb592-11" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb592-12"><a href="stats_detected.html#cb592-12" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb592-13"><a href="stats_detected.html#cb592-13" tabindex="-1"></a>      <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb592-14"><a href="stats_detected.html#cb592-14" tabindex="-1"></a>      , <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;median&quot;</span></span>
<span id="cb592-15"><a href="stats_detected.html#cb592-15" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb592-16"><a href="stats_detected.html#cb592-16" tabindex="-1"></a>    )</span>
<span id="cb592-17"><a href="stats_detected.html#cb592-17" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb592-18"><a href="stats_detected.html#cb592-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb592-19"><a href="stats_detected.html#cb592-19" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb592-20"><a href="stats_detected.html#cb592-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb592-21"><a href="stats_detected.html#cb592-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-458">Table 7.22: </span>DBH RMSE (cm)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DBH RMSE (cm)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
8.79
</td>
<td style="text-align:right;">
2.80
</td>
<td style="text-align:right;">
14.73
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
8.30
</td>
<td style="text-align:right;">
2.40
</td>
<td style="text-align:right;">
14.30
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
8.29
</td>
<td style="text-align:right;">
2.38
</td>
<td style="text-align:right;">
14.25
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
8.54
</td>
<td style="text-align:right;">
2.55
</td>
<td style="text-align:right;">
14.49
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
7.79
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
14.00
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
7.58
</td>
<td style="text-align:right;">
1.61
</td>
<td style="text-align:right;">
13.64
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
7.56
</td>
<td style="text-align:right;">
1.66
</td>
<td style="text-align:right;">
13.58
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
7.77
</td>
<td style="text-align:right;">
1.92
</td>
<td style="text-align:right;">
13.87
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
aggressive
</td>
<td style="text-align:right;">
10.41
</td>
<td style="text-align:right;">
3.93
</td>
<td style="text-align:right;">
16.49
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate
</td>
<td style="text-align:right;">
9.97
</td>
<td style="text-align:right;">
3.99
</td>
<td style="text-align:right;">
16.13
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild
</td>
<td style="text-align:right;">
10.37
</td>
<td style="text-align:right;">
4.31
</td>
<td style="text-align:right;">
16.40
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled
</td>
<td style="text-align:right;">
10.59
</td>
<td style="text-align:right;">
4.60
</td>
<td style="text-align:right;">
16.78
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="stats_detected.html#cb593-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb593-2"><a href="stats_detected.html#cb593-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb593-3"><a href="stats_detected.html#cb593-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb593-4"><a href="stats_detected.html#cb593-4" tabindex="-1"></a>    value</span>
<span id="cb593-5"><a href="stats_detected.html#cb593-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_filtering_mode</span>
<span id="cb593-6"><a href="stats_detected.html#cb593-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb593-7"><a href="stats_detected.html#cb593-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb593-8"><a href="stats_detected.html#cb593-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_filtering_mode)</span>
<span id="cb593-9"><a href="stats_detected.html#cb593-9" tabindex="-1"></a></span>
<span id="cb593-10"><a href="stats_detected.html#cb593-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb593-11"><a href="stats_detected.html#cb593-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb593-12"><a href="stats_detected.html#cb593-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb593-13"><a href="stats_detected.html#cb593-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb593-14"><a href="stats_detected.html#cb593-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb593-15"><a href="stats_detected.html#cb593-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb593-16"><a href="stats_detected.html#cb593-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb593-17"><a href="stats_detected.html#cb593-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb593-18"><a href="stats_detected.html#cb593-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb593-19"><a href="stats_detected.html#cb593-19" tabindex="-1"></a>    )</span>
<span id="cb593-20"><a href="stats_detected.html#cb593-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb593-21"><a href="stats_detected.html#cb593-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb593-22"><a href="stats_detected.html#cb593-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb593-23"><a href="stats_detected.html#cb593-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb593-24"><a href="stats_detected.html#cb593-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb593-25"><a href="stats_detected.html#cb593-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb593-26"><a href="stats_detected.html#cb593-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb593-27"><a href="stats_detected.html#cb593-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb593-28"><a href="stats_detected.html#cb593-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb593-29"><a href="stats_detected.html#cb593-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb593-30"><a href="stats_detected.html#cb593-30" tabindex="-1"></a>      )}</span>
<span id="cb593-31"><a href="stats_detected.html#cb593-31" tabindex="-1"></a>    )</span>
<span id="cb593-32"><a href="stats_detected.html#cb593-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb593-33"><a href="stats_detected.html#cb593-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb593-34"><a href="stats_detected.html#cb593-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb593-35"><a href="stats_detected.html#cb593-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb593-36"><a href="stats_detected.html#cb593-36" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb593-37"><a href="stats_detected.html#cb593-37" tabindex="-1"></a>      <span class="co"># re order for filtering mode</span></span>
<span id="cb593-38"><a href="stats_detected.html#cb593-38" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb593-39"><a href="stats_detected.html#cb593-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb593-40"><a href="stats_detected.html#cb593-40" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb593-41"><a href="stats_detected.html#cb593-41" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb593-42"><a href="stats_detected.html#cb593-42" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb593-43"><a href="stats_detected.html#cb593-43" tabindex="-1"></a></span>
<span id="cb593-44"><a href="stats_detected.html#cb593-44" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb593-45"><a href="stats_detected.html#cb593-45" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb593-46"><a href="stats_detected.html#cb593-46" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb593-47"><a href="stats_detected.html#cb593-47" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_filtering_mode)</span>
<span id="cb593-48"><a href="stats_detected.html#cb593-48" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter1 <span class="sc">==</span> depth_maps_generation_filtering_mode)</span>
<span id="cb593-49"><a href="stats_detected.html#cb593-49" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb593-50"><a href="stats_detected.html#cb593-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb593-51"><a href="stats_detected.html#cb593-51" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_filtering_mode)</span>
<span id="cb593-52"><a href="stats_detected.html#cb593-52" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, sorter2 <span class="sc">==</span> depth_maps_generation_filtering_mode)</span>
<span id="cb593-53"><a href="stats_detected.html#cb593-53" tabindex="-1"></a>  )</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="stats_detected.html#cb594-1" tabindex="-1"></a><span class="fu">plt_contrast</span>(</span>
<span id="cb594-2"><a href="stats_detected.html#cb594-2" tabindex="-1"></a>  brms_contrast_temp</span>
<span id="cb594-3"><a href="stats_detected.html#cb594-3" tabindex="-1"></a>  <span class="co"># , caption_text = form_temp</span></span>
<span id="cb594-4"><a href="stats_detected.html#cb594-4" tabindex="-1"></a>  , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb594-5"><a href="stats_detected.html#cb594-5" tabindex="-1"></a>  , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb594-6"><a href="stats_detected.html#cb594-6" tabindex="-1"></a>  , <span class="at">label_size =</span> <span class="fl">1.8</span></span>
<span id="cb594-7"><a href="stats_detected.html#cb594-7" tabindex="-1"></a>  , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="fl">0.45</span>,<span class="fl">0.4</span>)</span>
<span id="cb594-8"><a href="stats_detected.html#cb594-8" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb594-9"><a href="stats_detected.html#cb594-9" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb594-10"><a href="stats_detected.html#cb594-10" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by software&quot;</span></span>
<span id="cb594-11"><a href="stats_detected.html#cb594-11" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast DBH RMSE (cm)&quot;</span></span>
<span id="cb594-12"><a href="stats_detected.html#cb594-12" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-460-1.png" width="1008" /></p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="stats_detected.html#cb595-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb595-2"><a href="stats_detected.html#cb595-2" tabindex="-1"></a>  <span class="st">&quot;../data/fltr_sftwr_comp_dbh_rmse.png&quot;</span></span>
<span id="cb595-3"><a href="stats_detected.html#cb595-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb595-4"><a href="stats_detected.html#cb595-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb595-5"><a href="stats_detected.html#cb595-5" tabindex="-1"></a>)</span></code></pre></div>
<p>create plot for combining with other RMSE contrasts for publication</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="stats_detected.html#cb596-1" tabindex="-1"></a>ptchwrk_fltr_sftwr_comp_dbh_rmse <span class="ot">=</span></span>
<span id="cb596-2"><a href="stats_detected.html#cb596-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb596-3"><a href="stats_detected.html#cb596-3" tabindex="-1"></a>    brms_contrast_temp</span>
<span id="cb596-4"><a href="stats_detected.html#cb596-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode contrast&quot;</span></span>
<span id="cb596-5"><a href="stats_detected.html#cb596-5" tabindex="-1"></a>    , <span class="at">facet =</span> <span class="st">&quot;software&quot;</span></span>
<span id="cb596-6"><a href="stats_detected.html#cb596-6" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="fl">1.7</span></span>
<span id="cb596-7"><a href="stats_detected.html#cb596-7" tabindex="-1"></a>    , <span class="at">label =</span> <span class="st">&quot;pct_gt_zero_lab_sm&quot;</span></span>
<span id="cb596-8"><a href="stats_detected.html#cb596-8" tabindex="-1"></a>    , <span class="at">annotate_size =</span> <span class="fl">1.8</span></span>
<span id="cb596-9"><a href="stats_detected.html#cb596-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb596-10"><a href="stats_detected.html#cb596-10" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb596-11"><a href="stats_detected.html#cb596-11" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span> <span class="co"># &quot;constrast Height RMSE (m)&quot;</span></span>
<span id="cb596-12"><a href="stats_detected.html#cb596-12" tabindex="-1"></a>      , <span class="at">x =</span> <span class="st">&quot;DBH RMSE (cm) constrast&quot;</span></span>
<span id="cb596-13"><a href="stats_detected.html#cb596-13" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb596-14"><a href="stats_detected.html#cb596-14" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb596-15"><a href="stats_detected.html#cb596-15" tabindex="-1"></a>      <span class="at">legend.position=</span><span class="st">&quot;none&quot;</span></span>
<span id="cb596-16"><a href="stats_detected.html#cb596-16" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb596-17"><a href="stats_detected.html#cb596-17" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb596-18"><a href="stats_detected.html#cb596-18" tabindex="-1"></a>    ) </span>
<span id="cb596-19"><a href="stats_detected.html#cb596-19" tabindex="-1"></a><span class="co"># ptchwrk_fltr_sftwr_comp_dbh_rmse</span></span></code></pre></div>
<p>and summarize these contrasts</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="stats_detected.html#cb597-1" tabindex="-1"></a>table_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span></span>
<span id="cb597-2"><a href="stats_detected.html#cb597-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb597-3"><a href="stats_detected.html#cb597-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span> </span>
<span id="cb597-4"><a href="stats_detected.html#cb597-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(contrast, software) <span class="sc">%&gt;%</span> </span>
<span id="cb597-5"><a href="stats_detected.html#cb597-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(contrast, software, value, .lower, .upper) <span class="sc">%&gt;%</span> </span>
<span id="cb597-6"><a href="stats_detected.html#cb597-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, contrast)</span>
<span id="cb597-7"><a href="stats_detected.html#cb597-7" tabindex="-1"></a></span>
<span id="cb597-8"><a href="stats_detected.html#cb597-8" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb597-9"><a href="stats_detected.html#cb597-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(software)) <span class="sc">%&gt;%</span> </span>
<span id="cb597-10"><a href="stats_detected.html#cb597-10" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb597-11"><a href="stats_detected.html#cb597-11" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">1</span></span>
<span id="cb597-12"><a href="stats_detected.html#cb597-12" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;95% HDI of the posterior predictive distribution of group contrasts&quot;</span></span>
<span id="cb597-13"><a href="stats_detected.html#cb597-13" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb597-14"><a href="stats_detected.html#cb597-14" tabindex="-1"></a>      <span class="st">&quot;filtering contrast&quot;</span></span>
<span id="cb597-15"><a href="stats_detected.html#cb597-15" tabindex="-1"></a>      , <span class="st">&quot;median difference&lt;br&gt;DBH RMSE (cm)&quot;</span></span>
<span id="cb597-16"><a href="stats_detected.html#cb597-16" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb597-17"><a href="stats_detected.html#cb597-17" tabindex="-1"></a>    )</span>
<span id="cb597-18"><a href="stats_detected.html#cb597-18" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb597-19"><a href="stats_detected.html#cb597-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb597-20"><a href="stats_detected.html#cb597-20" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb597-21"><a href="stats_detected.html#cb597-21" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">pack_rows</span>(<span class="at">index =</span> <span class="fu">table</span>(forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(table_temp<span class="sc">$</span>software))) <span class="sc">%&gt;%</span> </span>
<span id="cb597-22"><a href="stats_detected.html#cb597-22" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-462">Table 7.23: </span>DBH RMSE (cm)<br>95% HDI of the posterior predictive distribution of group contrasts
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering contrast
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
median difference<br>DBH RMSE (cm)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>METASHAPE</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
-1.8
</td>
<td style="text-align:right;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
-1.9
</td>
<td style="text-align:right;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - aggressive
</td>
<td style="text-align:right;">
-0.2
</td>
<td style="text-align:right;">
-2.5
</td>
<td style="text-align:right;">
1.9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
-2.2
</td>
<td style="text-align:right;">
2.1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - aggressive
</td>
<td style="text-align:right;">
-0.4
</td>
<td style="text-align:right;">
-2.8
</td>
<td style="text-align:right;">
1.6
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate - aggressive
</td>
<td style="text-align:right;">
-0.4
</td>
<td style="text-align:right;">
-2.7
</td>
<td style="text-align:right;">
1.7
</td>
</tr>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>OPENDRONEMAP</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
-1.9
</td>
<td style="text-align:right;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
-1.9
</td>
<td style="text-align:right;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - aggressive
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
-2.1
</td>
<td style="text-align:right;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
-2.1
</td>
<td style="text-align:right;">
2.1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - aggressive
</td>
<td style="text-align:right;">
-0.2
</td>
<td style="text-align:right;">
-2.5
</td>
<td style="text-align:right;">
1.9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
moderate - aggressive
</td>
<td style="text-align:right;">
-0.2
</td>
<td style="text-align:right;">
-2.4
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>PIX4D</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - mild
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
-2.0
</td>
<td style="text-align:right;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
disabled - moderate
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
-1.5
</td>
<td style="text-align:right;">
3.1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
mild - moderate
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
-1.8
</td>
<td style="text-align:right;">
2.8
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="softwarequalityfiltering---interaction-5" class="section level4 hasAnchor" number="7.4.3.6">
<h4><span class="header-section-number">7.4.3.6</span> Software:Quality:Filtering - interaction<a href="stats_detected.html#softwarequalityfiltering---interaction-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="stats_detected.html#cb598-1" tabindex="-1"></a><span class="co"># get draws</span></span>
<span id="cb598-2"><a href="stats_detected.html#cb598-2" tabindex="-1"></a>fltr_sftwr_draws_temp <span class="ot">=</span></span>
<span id="cb598-3"><a href="stats_detected.html#cb598-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">crossing</span>(</span>
<span id="cb598-4"><a href="stats_detected.html#cb598-4" tabindex="-1"></a>    <span class="at">depth_maps_generation_quality =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_quality)</span>
<span id="cb598-5"><a href="stats_detected.html#cb598-5" tabindex="-1"></a>    , <span class="at">depth_maps_generation_filtering_mode =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb598-6"><a href="stats_detected.html#cb598-6" tabindex="-1"></a>    , <span class="at">software =</span> <span class="fu">unique</span>(ptcld_validation_data<span class="sc">$</span>software)</span>
<span id="cb598-7"><a href="stats_detected.html#cb598-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb598-8"><a href="stats_detected.html#cb598-8" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">add_epred_draws</span>(</span>
<span id="cb598-9"><a href="stats_detected.html#cb598-9" tabindex="-1"></a>    brms_dbh_rmse_mod, <span class="at">allow_new_levels =</span> T</span>
<span id="cb598-10"><a href="stats_detected.html#cb598-10" tabindex="-1"></a>    <span class="co"># this part is crucial</span></span>
<span id="cb598-11"><a href="stats_detected.html#cb598-11" tabindex="-1"></a>    , <span class="at">re_formula =</span> <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span> <span class="co"># main effects</span></span>
<span id="cb598-12"><a href="stats_detected.html#cb598-12" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality) <span class="sc">+</span></span>
<span id="cb598-13"><a href="stats_detected.html#cb598-13" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode) <span class="sc">+</span> </span>
<span id="cb598-14"><a href="stats_detected.html#cb598-14" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> software) <span class="sc">+</span></span>
<span id="cb598-15"><a href="stats_detected.html#cb598-15" tabindex="-1"></a>    <span class="co"># two-way interactions</span></span>
<span id="cb598-16"><a href="stats_detected.html#cb598-16" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode) <span class="sc">+</span></span>
<span id="cb598-17"><a href="stats_detected.html#cb598-17" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb598-18"><a href="stats_detected.html#cb598-18" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_filtering_mode<span class="sc">:</span>software) <span class="sc">+</span></span>
<span id="cb598-19"><a href="stats_detected.html#cb598-19" tabindex="-1"></a>    <span class="co"># three-way interactions</span></span>
<span id="cb598-20"><a href="stats_detected.html#cb598-20" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> depth_maps_generation_quality<span class="sc">:</span>depth_maps_generation_filtering_mode<span class="sc">:</span>software)</span>
<span id="cb598-21"><a href="stats_detected.html#cb598-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb598-22"><a href="stats_detected.html#cb598-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">value =</span> .epred) <span class="sc">%&gt;%</span> </span>
<span id="cb598-23"><a href="stats_detected.html#cb598-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">med =</span> tidybayes<span class="sc">::</span><span class="fu">median_hdci</span>(value)<span class="sc">$</span>y)</span>
<span id="cb598-24"><a href="stats_detected.html#cb598-24" tabindex="-1"></a></span>
<span id="cb598-25"><a href="stats_detected.html#cb598-25" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb598-26"><a href="stats_detected.html#cb598-26" tabindex="-1"></a>qlty_fltr_sftwr_dbh_rmse <span class="ot">=</span> </span>
<span id="cb598-27"><a href="stats_detected.html#cb598-27" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb598-28"><a href="stats_detected.html#cb598-28" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb598-29"><a href="stats_detected.html#cb598-29" tabindex="-1"></a>      ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb598-30"><a href="stats_detected.html#cb598-30" tabindex="-1"></a>      , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb598-31"><a href="stats_detected.html#cb598-31" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb598-32"><a href="stats_detected.html#cb598-32" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb598-33"><a href="stats_detected.html#cb598-33" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb598-34"><a href="stats_detected.html#cb598-34" tabindex="-1"></a>      <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb598-35"><a href="stats_detected.html#cb598-35" tabindex="-1"></a>        <span class="at">y =</span> value</span>
<span id="cb598-36"><a href="stats_detected.html#cb598-36" tabindex="-1"></a>        , <span class="at">x =</span> depth_maps_generation_filtering_mode</span>
<span id="cb598-37"><a href="stats_detected.html#cb598-37" tabindex="-1"></a>        , <span class="at">fill =</span> med</span>
<span id="cb598-38"><a href="stats_detected.html#cb598-38" tabindex="-1"></a>      )</span>
<span id="cb598-39"><a href="stats_detected.html#cb598-39" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb598-40"><a href="stats_detected.html#cb598-40" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb598-41"><a href="stats_detected.html#cb598-41" tabindex="-1"></a>    tidybayes<span class="sc">::</span><span class="fu">stat_eye</span>(</span>
<span id="cb598-42"><a href="stats_detected.html#cb598-42" tabindex="-1"></a>      <span class="at">point_interval =</span> median_hdi, <span class="at">.width =</span> .<span class="dv">95</span></span>
<span id="cb598-43"><a href="stats_detected.html#cb598-43" tabindex="-1"></a>      , <span class="at">slab_alpha =</span> <span class="fl">0.98</span></span>
<span id="cb598-44"><a href="stats_detected.html#cb598-44" tabindex="-1"></a>      , <span class="at">interval_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb598-45"><a href="stats_detected.html#cb598-45" tabindex="-1"></a>      , <span class="at">point_color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_fill =</span> <span class="st">&quot;black&quot;</span>, <span class="at">point_size =</span> <span class="dv">1</span></span>
<span id="cb598-46"><a href="stats_detected.html#cb598-46" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb598-47"><a href="stats_detected.html#cb598-47" tabindex="-1"></a>    <span class="fu">scale_fill_stepsn</span>(</span>
<span id="cb598-48"><a href="stats_detected.html#cb598-48" tabindex="-1"></a>      <span class="at">n.breaks =</span> <span class="dv">5</span></span>
<span id="cb598-49"><a href="stats_detected.html#cb598-49" tabindex="-1"></a>      , <span class="at">colors =</span> viridis<span class="sc">::</span><span class="fu">mako</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">begin =</span> <span class="fl">0.2</span>, <span class="at">end =</span> <span class="fl">0.9</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb598-50"><a href="stats_detected.html#cb598-50" tabindex="-1"></a>      , <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,lmt_dbh_cm_rmse)</span>
<span id="cb598-51"><a href="stats_detected.html#cb598-51" tabindex="-1"></a>      , <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">accuracy =</span> <span class="fl">0.01</span>)</span>
<span id="cb598-52"><a href="stats_detected.html#cb598-52" tabindex="-1"></a>      , <span class="at">show.limits =</span> T</span>
<span id="cb598-53"><a href="stats_detected.html#cb598-53" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb598-54"><a href="stats_detected.html#cb598-54" tabindex="-1"></a>    <span class="fu">facet_grid</span>(</span>
<span id="cb598-55"><a href="stats_detected.html#cb598-55" tabindex="-1"></a>      <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb598-56"><a href="stats_detected.html#cb598-56" tabindex="-1"></a>      , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb598-57"><a href="stats_detected.html#cb598-57" tabindex="-1"></a>      <span class="co"># , switch = &quot;y&quot;</span></span>
<span id="cb598-58"><a href="stats_detected.html#cb598-58" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb598-59"><a href="stats_detected.html#cb598-59" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.02</span>,<span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb598-60"><a href="stats_detected.html#cb598-60" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb598-61"><a href="stats_detected.html#cb598-61" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;filtering mode&quot;</span>, <span class="at">y =</span> <span class="st">&quot;DBH RMSE (cm)&quot;</span></span>
<span id="cb598-62"><a href="stats_detected.html#cb598-62" tabindex="-1"></a>      , <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of DBH RMSE (cm) with 95% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb598-63"><a href="stats_detected.html#cb598-63" tabindex="-1"></a>      <span class="co"># , caption = form_temp</span></span>
<span id="cb598-64"><a href="stats_detected.html#cb598-64" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb598-65"><a href="stats_detected.html#cb598-65" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb598-66"><a href="stats_detected.html#cb598-66" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb598-67"><a href="stats_detected.html#cb598-67" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb598-68"><a href="stats_detected.html#cb598-68" tabindex="-1"></a>      , <span class="at">legend.direction  =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb598-69"><a href="stats_detected.html#cb598-69" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb598-70"><a href="stats_detected.html#cb598-70" tabindex="-1"></a>      , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb598-71"><a href="stats_detected.html#cb598-71" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb598-72"><a href="stats_detected.html#cb598-72" tabindex="-1"></a>      <span class="co"># , strip.placement = &quot;outside&quot;</span></span>
<span id="cb598-73"><a href="stats_detected.html#cb598-73" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb598-74"><a href="stats_detected.html#cb598-74" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb598-75"><a href="stats_detected.html#cb598-75" tabindex="-1"></a>      <span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">shape =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">lwd =</span> <span class="cn">NA</span>))</span>
<span id="cb598-76"><a href="stats_detected.html#cb598-76" tabindex="-1"></a>    )</span>
<span id="cb598-77"><a href="stats_detected.html#cb598-77" tabindex="-1"></a><span class="co"># print it</span></span>
<span id="cb598-78"><a href="stats_detected.html#cb598-78" tabindex="-1"></a>qlty_fltr_sftwr_dbh_rmse</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-463-1.png" width="1008" /></p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="stats_detected.html#cb599-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_dbh_rmse.png&quot;</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span>)</span></code></pre></div>
<p>and a table of these 95% HDI values</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="stats_detected.html#cb600-1" tabindex="-1"></a>table_temp <span class="ot">=</span></span>
<span id="cb600-2"><a href="stats_detected.html#cb600-2" tabindex="-1"></a>  fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb600-3"><a href="stats_detected.html#cb600-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">median_hdi</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb600-4"><a href="stats_detected.html#cb600-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb600-5"><a href="stats_detected.html#cb600-5" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb600-6"><a href="stats_detected.html#cb600-6" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb600-7"><a href="stats_detected.html#cb600-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb600-8"><a href="stats_detected.html#cb600-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb600-9"><a href="stats_detected.html#cb600-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(</span>
<span id="cb600-10"><a href="stats_detected.html#cb600-10" tabindex="-1"></a>    software, depth_maps_generation_quality, depth_maps_generation_filtering_mode</span>
<span id="cb600-11"><a href="stats_detected.html#cb600-11" tabindex="-1"></a>    , value, .lower, .upper</span>
<span id="cb600-12"><a href="stats_detected.html#cb600-12" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb600-13"><a href="stats_detected.html#cb600-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb600-14"><a href="stats_detected.html#cb600-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb600-15"><a href="stats_detected.html#cb600-15" tabindex="-1"></a></span>
<span id="cb600-16"><a href="stats_detected.html#cb600-16" tabindex="-1"></a>table_temp <span class="sc">%&gt;%</span> </span>
<span id="cb600-17"><a href="stats_detected.html#cb600-17" tabindex="-1"></a>  <span class="co"># dplyr::select(-c(software)) %&gt;% </span></span>
<span id="cb600-18"><a href="stats_detected.html#cb600-18" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb600-19"><a href="stats_detected.html#cb600-19" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">2</span></span>
<span id="cb600-20"><a href="stats_detected.html#cb600-20" tabindex="-1"></a>    , <span class="at">caption =</span> <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;95% HDI of the posterior predictive distribution&quot;</span></span>
<span id="cb600-21"><a href="stats_detected.html#cb600-21" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb600-22"><a href="stats_detected.html#cb600-22" tabindex="-1"></a>      <span class="st">&quot;software&quot;</span>, <span class="st">&quot;quality&quot;</span>, <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb600-23"><a href="stats_detected.html#cb600-23" tabindex="-1"></a>      , <span class="st">&quot;DBH RMSE (cm)&lt;br&gt;median&quot;</span></span>
<span id="cb600-24"><a href="stats_detected.html#cb600-24" tabindex="-1"></a>      , <span class="st">&quot;HDI low&quot;</span>, <span class="st">&quot;HDI high&quot;</span></span>
<span id="cb600-25"><a href="stats_detected.html#cb600-25" tabindex="-1"></a>    )</span>
<span id="cb600-26"><a href="stats_detected.html#cb600-26" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb600-27"><a href="stats_detected.html#cb600-27" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb600-28"><a href="stats_detected.html#cb600-28" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb600-29"><a href="stats_detected.html#cb600-29" tabindex="-1"></a>  <span class="co"># kableExtra::pack_rows(index = table(forcats::fct_inorder(table_temp$software))) %&gt;% </span></span>
<span id="cb600-30"><a href="stats_detected.html#cb600-30" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb600-31"><a href="stats_detected.html#cb600-31" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">&quot;8in&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:8in; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-464">Table 7.24: </span>DBH RMSE (cm)<br>95% HDI of the posterior predictive distribution
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
software
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
quality
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filtering mode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DBH RMSE (cm)<br>median
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI low
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
HDI high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
METASHAPE
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
8.01
</td>
<td style="text-align:right;">
1.87
</td>
<td style="text-align:right;">
14.02
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
7.62
</td>
<td style="text-align:right;">
1.60
</td>
<td style="text-align:right;">
13.74
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
7.44
</td>
<td style="text-align:right;">
1.27
</td>
<td style="text-align:right;">
13.43
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
7.68
</td>
<td style="text-align:right;">
1.65
</td>
<td style="text-align:right;">
13.73
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
8.27
</td>
<td style="text-align:right;">
2.16
</td>
<td style="text-align:right;">
14.36
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
7.92
</td>
<td style="text-align:right;">
1.78
</td>
<td style="text-align:right;">
13.88
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
7.71
</td>
<td style="text-align:right;">
1.75
</td>
<td style="text-align:right;">
13.83
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
8.82
</td>
<td style="text-align:right;">
2.85
</td>
<td style="text-align:right;">
14.96
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
10.86
</td>
<td style="text-align:right;">
4.52
</td>
<td style="text-align:right;">
17.01
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
9.08
</td>
<td style="text-align:right;">
3.05
</td>
<td style="text-align:right;">
15.25
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
9.63
</td>
<td style="text-align:right;">
3.53
</td>
<td style="text-align:right;">
15.68
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
9.38
</td>
<td style="text-align:right;">
3.39
</td>
<td style="text-align:right;">
15.56
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
9.05
</td>
<td style="text-align:right;">
2.87
</td>
<td style="text-align:right;">
15.01
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
8.76
</td>
<td style="text-align:right;">
2.68
</td>
<td style="text-align:right;">
14.86
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
8.49
</td>
<td style="text-align:right;">
2.37
</td>
<td style="text-align:right;">
14.53
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
8.75
</td>
<td style="text-align:right;">
2.79
</td>
<td style="text-align:right;">
14.92
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
8.22
</td>
<td style="text-align:right;">
2.25
</td>
<td style="text-align:right;">
14.38
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
7.91
</td>
<td style="text-align:right;">
1.93
</td>
<td style="text-align:right;">
13.92
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
7.77
</td>
<td style="text-align:right;">
1.61
</td>
<td style="text-align:right;">
13.78
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
8.03
</td>
<td style="text-align:right;">
2.06
</td>
<td style="text-align:right;">
14.16
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="20">
OPENDRONEMAP
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
lowest
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
7.02
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:right;">
13.14
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
6.88
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
12.95
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
6.81
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
12.95
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
6.99
</td>
<td style="text-align:right;">
0.87
</td>
<td style="text-align:right;">
12.93
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
low
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
7.06
</td>
<td style="text-align:right;">
0.97
</td>
<td style="text-align:right;">
13.14
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
6.82
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
12.93
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
6.69
</td>
<td style="text-align:right;">
0.69
</td>
<td style="text-align:right;">
12.79
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
7.53
</td>
<td style="text-align:right;">
1.54
</td>
<td style="text-align:right;">
13.69
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
medium
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
7.94
</td>
<td style="text-align:right;">
1.89
</td>
<td style="text-align:right;">
14.20
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
7.16
</td>
<td style="text-align:right;">
1.03
</td>
<td style="text-align:right;">
13.20
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
7.83
</td>
<td style="text-align:right;">
1.76
</td>
<td style="text-align:right;">
14.01
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
7.56
</td>
<td style="text-align:right;">
1.54
</td>
<td style="text-align:right;">
13.72
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
8.57
</td>
<td style="text-align:right;">
2.50
</td>
<td style="text-align:right;">
14.66
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
8.53
</td>
<td style="text-align:right;">
2.58
</td>
<td style="text-align:right;">
14.76
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
8.12
</td>
<td style="text-align:right;">
2.17
</td>
<td style="text-align:right;">
14.27
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
8.82
</td>
<td style="text-align:right;">
2.75
</td>
<td style="text-align:right;">
14.96
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="4">
ultra high
</td>
<td style="text-align:left;">
aggressive
</td>
<td style="text-align:right;">
7.95
</td>
<td style="text-align:right;">
1.77
</td>
<td style="text-align:right;">
13.95
</td>
</tr>
<tr>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
8.16
</td>
<td style="text-align:right;">
2.13
</td>
<td style="text-align:right;">
14.35
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
7.74
</td>
<td style="text-align:right;">
1.32
</td>
<td style="text-align:right;">
13.59
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
7.66
</td>
<td style="text-align:right;">
1.56
</td>
<td style="text-align:right;">
13.75
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="12">
PIX4D
</td>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
low
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
9.10
</td>
<td style="text-align:right;">
2.92
</td>
<td style="text-align:right;">
15.23
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
9.21
</td>
<td style="text-align:right;">
2.94
</td>
<td style="text-align:right;">
15.27
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
11.31
</td>
<td style="text-align:right;">
5.19
</td>
<td style="text-align:right;">
17.72
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
medium
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
9.87
</td>
<td style="text-align:right;">
3.56
</td>
<td style="text-align:right;">
16.05
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
12.64
</td>
<td style="text-align:right;">
6.42
</td>
<td style="text-align:right;">
19.10
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
11.27
</td>
<td style="text-align:right;">
5.09
</td>
<td style="text-align:right;">
17.37
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
11.58
</td>
<td style="text-align:right;">
5.39
</td>
<td style="text-align:right;">
17.83
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
10.76
</td>
<td style="text-align:right;">
4.76
</td>
<td style="text-align:right;">
16.93
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
10.93
</td>
<td style="text-align:right;">
4.85
</td>
<td style="text-align:right;">
17.05
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
ultra high
</td>
<td style="text-align:left;">
moderate
</td>
<td style="text-align:right;">
9.75
</td>
<td style="text-align:right;">
3.59
</td>
<td style="text-align:right;">
15.77
</td>
</tr>
<tr>
<td style="text-align:left;">
mild
</td>
<td style="text-align:right;">
10.03
</td>
<td style="text-align:right;">
3.98
</td>
<td style="text-align:right;">
16.10
</td>
</tr>
<tr>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
10.26
</td>
<td style="text-align:right;">
4.12
</td>
<td style="text-align:right;">
16.39
</td>
</tr>
</tbody>
</table>
</div>
<p>we can also make pairwise comparisons</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="stats_detected.html#cb601-1" tabindex="-1"></a><span class="co"># calculate contrast</span></span>
<span id="cb601-2"><a href="stats_detected.html#cb601-2" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> fltr_sftwr_draws_temp <span class="sc">%&gt;%</span> </span>
<span id="cb601-3"><a href="stats_detected.html#cb601-3" tabindex="-1"></a>  tidybayes<span class="sc">::</span><span class="fu">compare_levels</span>(</span>
<span id="cb601-4"><a href="stats_detected.html#cb601-4" tabindex="-1"></a>    value</span>
<span id="cb601-5"><a href="stats_detected.html#cb601-5" tabindex="-1"></a>    , <span class="at">by =</span> depth_maps_generation_filtering_mode</span>
<span id="cb601-6"><a href="stats_detected.html#cb601-6" tabindex="-1"></a>    , <span class="at">comparison =</span> <span class="st">&quot;pairwise&quot;</span></span>
<span id="cb601-7"><a href="stats_detected.html#cb601-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb601-8"><a href="stats_detected.html#cb601-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">contrast =</span> depth_maps_generation_filtering_mode)</span>
<span id="cb601-9"><a href="stats_detected.html#cb601-9" tabindex="-1"></a></span>
<span id="cb601-10"><a href="stats_detected.html#cb601-10" tabindex="-1"></a><span class="co"># separate contrast</span></span>
<span id="cb601-11"><a href="stats_detected.html#cb601-11" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb601-12"><a href="stats_detected.html#cb601-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb601-13"><a href="stats_detected.html#cb601-13" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(</span>
<span id="cb601-14"><a href="stats_detected.html#cb601-14" tabindex="-1"></a>    <span class="at">cols =</span> contrast</span>
<span id="cb601-15"><a href="stats_detected.html#cb601-15" tabindex="-1"></a>    , <span class="at">delim =</span> <span class="st">&quot; - &quot;</span></span>
<span id="cb601-16"><a href="stats_detected.html#cb601-16" tabindex="-1"></a>    , <span class="at">names =</span> <span class="fu">paste0</span>(</span>
<span id="cb601-17"><a href="stats_detected.html#cb601-17" tabindex="-1"></a>      <span class="st">&quot;sorter&quot;</span></span>
<span id="cb601-18"><a href="stats_detected.html#cb601-18" tabindex="-1"></a>      , <span class="dv">1</span><span class="sc">:</span>(<span class="fu">max</span>(stringr<span class="sc">::</span><span class="fu">str_count</span>(brms_contrast_temp<span class="sc">$</span>contrast, <span class="st">&quot;-&quot;</span>))<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb601-19"><a href="stats_detected.html#cb601-19" tabindex="-1"></a>    )</span>
<span id="cb601-20"><a href="stats_detected.html#cb601-20" tabindex="-1"></a>    , <span class="at">too_few =</span> <span class="st">&quot;align_start&quot;</span></span>
<span id="cb601-21"><a href="stats_detected.html#cb601-21" tabindex="-1"></a>    , <span class="at">cols_remove =</span> F</span>
<span id="cb601-22"><a href="stats_detected.html#cb601-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb601-23"><a href="stats_detected.html#cb601-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sorter1<span class="sc">!=</span>sorter2) <span class="sc">%&gt;%</span> </span>
<span id="cb601-24"><a href="stats_detected.html#cb601-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb601-25"><a href="stats_detected.html#cb601-25" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb601-26"><a href="stats_detected.html#cb601-26" tabindex="-1"></a>      tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;sorter&quot;</span>)</span>
<span id="cb601-27"><a href="stats_detected.html#cb601-27" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="cf">function</span>(x){<span class="fu">factor</span>(</span>
<span id="cb601-28"><a href="stats_detected.html#cb601-28" tabindex="-1"></a>        x, <span class="at">ordered =</span> T</span>
<span id="cb601-29"><a href="stats_detected.html#cb601-29" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">levels</span>(ptcld_validation_data<span class="sc">$</span>depth_maps_generation_filtering_mode)</span>
<span id="cb601-30"><a href="stats_detected.html#cb601-30" tabindex="-1"></a>      )}</span>
<span id="cb601-31"><a href="stats_detected.html#cb601-31" tabindex="-1"></a>    )</span>
<span id="cb601-32"><a href="stats_detected.html#cb601-32" tabindex="-1"></a>    , <span class="at">contrast =</span> contrast <span class="sc">%&gt;%</span> </span>
<span id="cb601-33"><a href="stats_detected.html#cb601-33" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(</span>
<span id="cb601-34"><a href="stats_detected.html#cb601-34" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="fu">as.numeric</span>(sorter1), <span class="fu">as.numeric</span>(sorter2)) <span class="sc">%&gt;%</span> </span>
<span id="cb601-35"><a href="stats_detected.html#cb601-35" tabindex="-1"></a>          <span class="fu">as.numeric</span>()</span>
<span id="cb601-36"><a href="stats_detected.html#cb601-36" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb601-37"><a href="stats_detected.html#cb601-37" tabindex="-1"></a>      <span class="co"># re order for filtering mode</span></span>
<span id="cb601-38"><a href="stats_detected.html#cb601-38" tabindex="-1"></a>      forcats<span class="sc">::</span><span class="fu">fct_rev</span>()</span>
<span id="cb601-39"><a href="stats_detected.html#cb601-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb601-40"><a href="stats_detected.html#cb601-40" tabindex="-1"></a>  <span class="co"># median_hdi summary for coloring </span></span>
<span id="cb601-41"><a href="stats_detected.html#cb601-41" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(contrast, software, depth_maps_generation_quality) <span class="sc">%&gt;%</span> </span>
<span id="cb601-42"><a href="stats_detected.html#cb601-42" tabindex="-1"></a>  <span class="fu">make_contrast_vars</span>()</span>
<span id="cb601-43"><a href="stats_detected.html#cb601-43" tabindex="-1"></a></span>
<span id="cb601-44"><a href="stats_detected.html#cb601-44" tabindex="-1"></a><span class="co"># remove out-of-sample obs</span></span>
<span id="cb601-45"><a href="stats_detected.html#cb601-45" tabindex="-1"></a>brms_contrast_temp <span class="ot">=</span> brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb601-46"><a href="stats_detected.html#cb601-46" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb601-47"><a href="stats_detected.html#cb601-47" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb601-48"><a href="stats_detected.html#cb601-48" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, sorter1<span class="sc">==</span>depth_maps_generation_filtering_mode)</span>
<span id="cb601-49"><a href="stats_detected.html#cb601-49" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb601-50"><a href="stats_detected.html#cb601-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb601-51"><a href="stats_detected.html#cb601-51" tabindex="-1"></a>    ptcld_validation_data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">distinct</span>(software, depth_maps_generation_quality, depth_maps_generation_filtering_mode)</span>
<span id="cb601-52"><a href="stats_detected.html#cb601-52" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(software, depth_maps_generation_quality, sorter2<span class="sc">==</span>depth_maps_generation_filtering_mode)</span>
<span id="cb601-53"><a href="stats_detected.html#cb601-53" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb601-54"><a href="stats_detected.html#cb601-54" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">depth_maps_generation_quality =</span> depth_maps_generation_quality <span class="sc">%&gt;%</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>())</span></code></pre></div>
<p>plot it</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="stats_detected.html#cb602-1" tabindex="-1"></a>brms_contrast_temp <span class="sc">%&gt;%</span> </span>
<span id="cb602-2"><a href="stats_detected.html#cb602-2" tabindex="-1"></a>  <span class="fu">plt_contrast</span>(</span>
<span id="cb602-3"><a href="stats_detected.html#cb602-3" tabindex="-1"></a>    <span class="at">facet =</span> <span class="fu">c</span>(<span class="st">&quot;depth_maps_generation_quality&quot;</span>, <span class="st">&quot;software&quot;</span>)</span>
<span id="cb602-4"><a href="stats_detected.html#cb602-4" tabindex="-1"></a>    , <span class="at">y_axis_title =</span> <span class="st">&quot;filtering mode&quot;</span></span>
<span id="cb602-5"><a href="stats_detected.html#cb602-5" tabindex="-1"></a>    , <span class="at">label_size =</span> <span class="dv">0</span></span>
<span id="cb602-6"><a href="stats_detected.html#cb602-6" tabindex="-1"></a>    , <span class="at">x_expand =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1</span>,<span class="sc">-</span><span class="fl">0.1</span>)</span>
<span id="cb602-7"><a href="stats_detected.html#cb602-7" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb602-8"><a href="stats_detected.html#cb602-8" tabindex="-1"></a>  <span class="fu">facet_grid</span>(</span>
<span id="cb602-9"><a href="stats_detected.html#cb602-9" tabindex="-1"></a>    <span class="at">rows =</span> <span class="fu">vars</span>(software)</span>
<span id="cb602-10"><a href="stats_detected.html#cb602-10" tabindex="-1"></a>    , <span class="at">cols =</span> <span class="fu">vars</span>(depth_maps_generation_quality)</span>
<span id="cb602-11"><a href="stats_detected.html#cb602-11" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb602-12"><a href="stats_detected.html#cb602-12" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb602-13"><a href="stats_detected.html#cb602-13" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;posterior predictive distribution of group constrasts with 95% &amp; 50% HDI</span><span class="sc">\n</span><span class="st">by dense cloud quality and software&quot;</span></span>
<span id="cb602-14"><a href="stats_detected.html#cb602-14" tabindex="-1"></a>    , <span class="at">x =</span> <span class="st">&quot;constrast DBH RMSE (cm)&quot;</span></span>
<span id="cb602-15"><a href="stats_detected.html#cb602-15" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-466-1.png" width="1008" /></p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="stats_detected.html#cb603-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb603-2"><a href="stats_detected.html#cb603-2" tabindex="-1"></a>  <span class="st">&quot;../data/qlty_fltr_sftwr_comp_dbh_rmse.png&quot;</span></span>
<span id="cb603-3"><a href="stats_detected.html#cb603-3" tabindex="-1"></a>  , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb603-4"><a href="stats_detected.html#cb603-4" tabindex="-1"></a>  , <span class="at">height =</span> <span class="dv">7</span>, <span class="at">width =</span> <span class="fl">10.5</span></span>
<span id="cb603-5"><a href="stats_detected.html#cb603-5" tabindex="-1"></a>)</span></code></pre></div>
<p>Export some final images for publication</p>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb604-1"><a href="stats_detected.html#cb604-1" tabindex="-1"></a>p1_temp <span class="ot">=</span> qlty_fltr_sftwr_dbh_me <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;A: DBH Mean Error (cm)&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>))</span>
<span id="cb604-2"><a href="stats_detected.html#cb604-2" tabindex="-1"></a>p2_temp <span class="ot">=</span> qlty_fltr_sftwr_dbh_rmse <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;B: DBH RMSE (cm)&quot;</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>))</span>
<span id="cb604-3"><a href="stats_detected.html#cb604-3" tabindex="-1"></a><span class="co"># export</span></span>
<span id="cb604-4"><a href="stats_detected.html#cb604-4" tabindex="-1"></a>p1_temp <span class="sc">/</span> p2_temp</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-467-1.png" width="1008" /></p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="stats_detected.html#cb605-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb605-2"><a href="stats_detected.html#cb605-2" tabindex="-1"></a>    <span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">&quot;../data/qlty_fltr_sftwr_dbh_comb.jpeg&quot;</span>)</span>
<span id="cb605-3"><a href="stats_detected.html#cb605-3" tabindex="-1"></a>    , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>()</span>
<span id="cb605-4"><a href="stats_detected.html#cb605-4" tabindex="-1"></a>    , <span class="at">width =</span> <span class="fl">8.5</span></span>
<span id="cb605-5"><a href="stats_detected.html#cb605-5" tabindex="-1"></a>    , <span class="at">height =</span> <span class="dv">11</span></span>
<span id="cb605-6"><a href="stats_detected.html#cb605-6" tabindex="-1"></a>    , <span class="at">units =</span> <span class="st">&quot;in&quot;</span></span>
<span id="cb605-7"><a href="stats_detected.html#cb605-7" tabindex="-1"></a>    , <span class="at">dpi =</span> <span class="st">&quot;print&quot;</span></span>
<span id="cb605-8"><a href="stats_detected.html#cb605-8" tabindex="-1"></a>  )</span></code></pre></div>
<p><code>patchwork</code> of Height RMSE contrasts</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="stats_detected.html#cb606-1" tabindex="-1"></a>layout_temp <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb606-2"><a href="stats_detected.html#cb606-2" tabindex="-1"></a>    <span class="co"># area(t, l, b, r)</span></span>
<span id="cb606-3"><a href="stats_detected.html#cb606-3" tabindex="-1"></a>    patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb606-4"><a href="stats_detected.html#cb606-4" tabindex="-1"></a>    , patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb606-5"><a href="stats_detected.html#cb606-5" tabindex="-1"></a>    , patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb606-6"><a href="stats_detected.html#cb606-6" tabindex="-1"></a>  )</span>
<span id="cb606-7"><a href="stats_detected.html#cb606-7" tabindex="-1"></a>  <span class="co"># check the layout</span></span>
<span id="cb606-8"><a href="stats_detected.html#cb606-8" tabindex="-1"></a>  <span class="co"># plot(layout_temp)</span></span>
<span id="cb606-9"><a href="stats_detected.html#cb606-9" tabindex="-1"></a><span class="do">############################</span></span>
<span id="cb606-10"><a href="stats_detected.html#cb606-10" tabindex="-1"></a><span class="co"># patchwork for height</span></span>
<span id="cb606-11"><a href="stats_detected.html#cb606-11" tabindex="-1"></a><span class="do">############################</span></span>
<span id="cb606-12"><a href="stats_detected.html#cb606-12" tabindex="-1"></a>  ptchwrk_qlty_sftwr_comp_ht_rmse <span class="sc">+</span> </span>
<span id="cb606-13"><a href="stats_detected.html#cb606-13" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;A: Quality Contrast by Software&quot;</span>) <span class="sc">+</span></span>
<span id="cb606-14"><a href="stats_detected.html#cb606-14" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb606-15"><a href="stats_detected.html#cb606-15" tabindex="-1"></a>  ptchwrk_fltr_sftwr_comp_ht_rmse <span class="sc">+</span> </span>
<span id="cb606-16"><a href="stats_detected.html#cb606-16" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;B: Filtering Mode Contrast by Software&quot;</span>) <span class="sc">+</span></span>
<span id="cb606-17"><a href="stats_detected.html#cb606-17" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb606-18"><a href="stats_detected.html#cb606-18" tabindex="-1"></a>  patchwork<span class="sc">::</span><span class="fu">free</span>(</span>
<span id="cb606-19"><a href="stats_detected.html#cb606-19" tabindex="-1"></a>    ptchwrk_sftwr_qlty_comp_ht_rmse <span class="sc">+</span> </span>
<span id="cb606-20"><a href="stats_detected.html#cb606-20" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;C: Software Contrast by Quality&quot;</span>) <span class="sc">+</span></span>
<span id="cb606-21"><a href="stats_detected.html#cb606-21" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) ) <span class="sc">+</span></span>
<span id="cb606-22"><a href="stats_detected.html#cb606-22" tabindex="-1"></a>  <span class="co"># plot_annotation(tag_levels = list(c(&#39;#&#39;, &#39;&amp;&#39;), &#39;1&#39;)) +</span></span>
<span id="cb606-23"><a href="stats_detected.html#cb606-23" tabindex="-1"></a>  patchwork<span class="sc">::</span><span class="fu">plot_layout</span>(</span>
<span id="cb606-24"><a href="stats_detected.html#cb606-24" tabindex="-1"></a>    <span class="at">design =</span> layout_temp</span>
<span id="cb606-25"><a href="stats_detected.html#cb606-25" tabindex="-1"></a>    , <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.01</span>,<span class="dv">1</span>)</span>
<span id="cb606-26"><a href="stats_detected.html#cb606-26" tabindex="-1"></a>    , <span class="at">heights =</span> <span class="fu">c</span>(<span class="fl">0.01</span>,<span class="dv">1</span>,<span class="fl">0.01</span>,<span class="dv">1</span>,<span class="fl">0.01</span>)</span>
<span id="cb606-27"><a href="stats_detected.html#cb606-27" tabindex="-1"></a>  ) <span class="sc">&amp;</span></span>
<span id="cb606-28"><a href="stats_detected.html#cb606-28" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb606-29"><a href="stats_detected.html#cb606-29" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.7</span>,<span class="fl">0.45</span>)</span>
<span id="cb606-30"><a href="stats_detected.html#cb606-30" tabindex="-1"></a>    , <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="fl">0.8</span>,<span class="fl">0.4</span>,<span class="fl">0.2</span>)</span>
<span id="cb606-31"><a href="stats_detected.html#cb606-31" tabindex="-1"></a>    , <span class="at">labels =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="fl">0.8</span>,<span class="fl">0.4</span>,<span class="fl">0.2</span>) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">number</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>)</span>
<span id="cb606-32"><a href="stats_detected.html#cb606-32" tabindex="-1"></a>  ) <span class="sc">&amp;</span></span>
<span id="cb606-33"><a href="stats_detected.html#cb606-33" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb606-34"><a href="stats_detected.html#cb606-34" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb606-35"><a href="stats_detected.html#cb606-35" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> <span class="fl">0.0</span>)</span>
<span id="cb606-36"><a href="stats_detected.html#cb606-36" tabindex="-1"></a>    <span class="co"># , plot.background = element_rect(colour = &quot;gray88&quot;, fill=NA, size=3)</span></span>
<span id="cb606-37"><a href="stats_detected.html#cb606-37" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-468-1.png" width="1008" /></p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="stats_detected.html#cb607-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb607-2"><a href="stats_detected.html#cb607-2" tabindex="-1"></a>    <span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">&quot;../data/all_ht_rmse_contrasts.jpeg&quot;</span>)</span>
<span id="cb607-3"><a href="stats_detected.html#cb607-3" tabindex="-1"></a>    , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>()</span>
<span id="cb607-4"><a href="stats_detected.html#cb607-4" tabindex="-1"></a>    , <span class="at">width =</span> <span class="dv">11</span></span>
<span id="cb607-5"><a href="stats_detected.html#cb607-5" tabindex="-1"></a>    , <span class="at">height =</span> <span class="fl">8.5</span></span>
<span id="cb607-6"><a href="stats_detected.html#cb607-6" tabindex="-1"></a>    , <span class="at">units =</span> <span class="st">&quot;in&quot;</span></span>
<span id="cb607-7"><a href="stats_detected.html#cb607-7" tabindex="-1"></a>    , <span class="at">dpi =</span> <span class="st">&quot;print&quot;</span></span>
<span id="cb607-8"><a href="stats_detected.html#cb607-8" tabindex="-1"></a>  )</span></code></pre></div>
<p><code>patchwork</code> of DBH RMSE contrasts</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="stats_detected.html#cb608-1" tabindex="-1"></a>layout_temp <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb608-2"><a href="stats_detected.html#cb608-2" tabindex="-1"></a>    <span class="co"># area(t, l, b, r)</span></span>
<span id="cb608-3"><a href="stats_detected.html#cb608-3" tabindex="-1"></a>    patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb608-4"><a href="stats_detected.html#cb608-4" tabindex="-1"></a>    , patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb608-5"><a href="stats_detected.html#cb608-5" tabindex="-1"></a>    , patchwork<span class="sc">::</span><span class="fu">area</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb608-6"><a href="stats_detected.html#cb608-6" tabindex="-1"></a>  )</span>
<span id="cb608-7"><a href="stats_detected.html#cb608-7" tabindex="-1"></a>  <span class="co"># check the layout</span></span>
<span id="cb608-8"><a href="stats_detected.html#cb608-8" tabindex="-1"></a>  <span class="co"># plot(layout_temp)</span></span>
<span id="cb608-9"><a href="stats_detected.html#cb608-9" tabindex="-1"></a><span class="do">############################</span></span>
<span id="cb608-10"><a href="stats_detected.html#cb608-10" tabindex="-1"></a><span class="co"># patchwork for height</span></span>
<span id="cb608-11"><a href="stats_detected.html#cb608-11" tabindex="-1"></a><span class="do">############################</span></span>
<span id="cb608-12"><a href="stats_detected.html#cb608-12" tabindex="-1"></a>  ptchwrk_qlty_sftwr_comp_dbh_rmse <span class="sc">+</span> </span>
<span id="cb608-13"><a href="stats_detected.html#cb608-13" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;A: Quality Contrast by Software&quot;</span>) <span class="sc">+</span></span>
<span id="cb608-14"><a href="stats_detected.html#cb608-14" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb608-15"><a href="stats_detected.html#cb608-15" tabindex="-1"></a>  ptchwrk_fltr_sftwr_comp_dbh_rmse <span class="sc">+</span> </span>
<span id="cb608-16"><a href="stats_detected.html#cb608-16" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;B: Filtering Mode Contrast by Software&quot;</span>) <span class="sc">+</span></span>
<span id="cb608-17"><a href="stats_detected.html#cb608-17" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb608-18"><a href="stats_detected.html#cb608-18" tabindex="-1"></a>  patchwork<span class="sc">::</span><span class="fu">free</span>(</span>
<span id="cb608-19"><a href="stats_detected.html#cb608-19" tabindex="-1"></a>    ptchwrk_sftwr_qlty_comp_dbh_rmse <span class="sc">+</span> </span>
<span id="cb608-20"><a href="stats_detected.html#cb608-20" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;C: Software Contrast by Quality&quot;</span>) <span class="sc">+</span></span>
<span id="cb608-21"><a href="stats_detected.html#cb608-21" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;gray88&quot;</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">3</span>)) ) <span class="sc">+</span></span>
<span id="cb608-22"><a href="stats_detected.html#cb608-22" tabindex="-1"></a>  <span class="co"># plot_annotation(tag_levels = list(c(&#39;#&#39;, &#39;&amp;&#39;), &#39;1&#39;)) +</span></span>
<span id="cb608-23"><a href="stats_detected.html#cb608-23" tabindex="-1"></a>  patchwork<span class="sc">::</span><span class="fu">plot_layout</span>(</span>
<span id="cb608-24"><a href="stats_detected.html#cb608-24" tabindex="-1"></a>    <span class="at">design =</span> layout_temp</span>
<span id="cb608-25"><a href="stats_detected.html#cb608-25" tabindex="-1"></a>    , <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.01</span>,<span class="dv">1</span>)</span>
<span id="cb608-26"><a href="stats_detected.html#cb608-26" tabindex="-1"></a>    , <span class="at">heights =</span> <span class="fu">c</span>(<span class="fl">0.01</span>,<span class="dv">1</span>,<span class="fl">0.01</span>,<span class="dv">1</span>,<span class="fl">0.01</span>)</span>
<span id="cb608-27"><a href="stats_detected.html#cb608-27" tabindex="-1"></a>  ) <span class="sc">&amp;</span></span>
<span id="cb608-28"><a href="stats_detected.html#cb608-28" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb608-29"><a href="stats_detected.html#cb608-29" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">9.0</span>,<span class="fl">9.0</span>)</span>
<span id="cb608-30"><a href="stats_detected.html#cb608-30" tabindex="-1"></a>    , <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">4</span>)</span>
<span id="cb608-31"><a href="stats_detected.html#cb608-31" tabindex="-1"></a>    , <span class="at">labels =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">4</span>) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">number</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)</span>
<span id="cb608-32"><a href="stats_detected.html#cb608-32" tabindex="-1"></a>  ) <span class="sc">&amp;</span></span>
<span id="cb608-33"><a href="stats_detected.html#cb608-33" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb608-34"><a href="stats_detected.html#cb608-34" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb608-35"><a href="stats_detected.html#cb608-35" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> <span class="fl">0.0</span>)</span>
<span id="cb608-36"><a href="stats_detected.html#cb608-36" tabindex="-1"></a>    <span class="co"># , plot.background = element_rect(colour = &quot;gray88&quot;, fill=NA, size=3)</span></span>
<span id="cb608-37"><a href="stats_detected.html#cb608-37" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-470-1.png" width="1008" /></p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="stats_detected.html#cb609-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(</span>
<span id="cb609-2"><a href="stats_detected.html#cb609-2" tabindex="-1"></a>    <span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">&quot;../data/all_dbh_rmse_contrasts.jpeg&quot;</span>)</span>
<span id="cb609-3"><a href="stats_detected.html#cb609-3" tabindex="-1"></a>    , <span class="at">plot =</span> ggplot2<span class="sc">::</span><span class="fu">last_plot</span>()</span>
<span id="cb609-4"><a href="stats_detected.html#cb609-4" tabindex="-1"></a>    , <span class="at">width =</span> <span class="dv">11</span></span>
<span id="cb609-5"><a href="stats_detected.html#cb609-5" tabindex="-1"></a>    , <span class="at">height =</span> <span class="fl">8.5</span></span>
<span id="cb609-6"><a href="stats_detected.html#cb609-6" tabindex="-1"></a>    , <span class="at">units =</span> <span class="st">&quot;in&quot;</span></span>
<span id="cb609-7"><a href="stats_detected.html#cb609-7" tabindex="-1"></a>    , <span class="at">dpi =</span> <span class="st">&quot;print&quot;</span></span>
<span id="cb609-8"><a href="stats_detected.html#cb609-8" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
</div>
<div id="posterior-predictive-checks-1" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Posterior Predictive Checks<a href="stats_detected.html#posterior-predictive-checks-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Markov chain Monte Carlo (MCMC) simulations were conducted using the <code>brms</code> package (Bürkner 2017) to estimate posterior predictive distributions of the parameters of interest. We ran three chains of 100,000 iterations with the first 50,000 discarded as burn-in. Trace-plots were utilized to visually assess model convergence and sufficient convergence was checked with <span class="math inline">\(\hat{R}\)</span> values near 1 (<a href="https://scholar.google.com/scholar?cluster=14209404114665352991&amp;hl=en&amp;as_sdt=0,6">Brooks &amp; Gelman, 1998</a>). Posterior predictive checks were used to evaluate model goodness-of-fit by comparing data simulated from the model with the observed data used to estimate the model parameters (<a href="https://scholar.google.com/scholar?cluster=9228589188684720156&amp;hl=en&amp;as_sdt=0,6">Hobbs &amp; Hooten, 2015</a>). Calculating the proportion of MCMC iterations in which the test statistic (i.e., mean and sum of squares) from the simulated data and observed data are more extreme than one another provides the Bayesian P-value. Lack of fit is indicated by a value close to 0 or 1 while a value of 0.5 indicates perfect fit (<a href="https://scholar.google.com/scholar?cluster=9228589188684720156&amp;hl=en&amp;as_sdt=0,6">Hobbs &amp; Hooten, 2015</a>).</p>
<p>To learn more about this approach to posterior predictive checks, check out Gabry’s (2022) vignette, <a href="https://cran.r-project.org/web/packages/bayesplot/vignettes/graphical-ppcs.html">Graphical posterior predictive checks using the bayesplot package</a>.</p>
<div id="prior-distriubutions" class="section level3 hasAnchor" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Prior Distriubutions<a href="stats_detected.html#prior-distriubutions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="stats_detected.html#cb610-1" tabindex="-1"></a>plt_prior1<span class="sc">+</span>plt_prior2<span class="sc">+</span>plt_prior3<span class="sc">+</span>plt_prior4 <span class="sc">&amp;</span></span>
<span id="cb610-2"><a href="stats_detected.html#cb610-2" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>))</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-473-1.png" width="1008" /></p>
</div>
<div id="trace-plots" class="section level3 hasAnchor" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> Trace-plots<a href="stats_detected.html#trace-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>check the trace plots for problems with convergence of the Markov chains</p>
<div id="height-mean-error" class="section level4 hasAnchor" number="7.5.2.1">
<h4><span class="header-section-number">7.5.2.1</span> Height Mean Error<a href="stats_detected.html#height-mean-error" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="stats_detected.html#cb611-1" tabindex="-1"></a><span class="co"># height mean error</span></span>
<span id="cb611-2"><a href="stats_detected.html#cb611-2" tabindex="-1"></a><span class="fu">plot</span>(brms_ht_me_mod)</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-474-1.png" width="1008" /><img src="metashape_testing_files/figure-html/unnamed-chunk-474-2.png" width="1008" /></p>
</div>
<div id="height-rmse" class="section level4 hasAnchor" number="7.5.2.2">
<h4><span class="header-section-number">7.5.2.2</span> Height RMSE<a href="stats_detected.html#height-rmse" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="stats_detected.html#cb612-1" tabindex="-1"></a><span class="co"># height rmse</span></span>
<span id="cb612-2"><a href="stats_detected.html#cb612-2" tabindex="-1"></a><span class="fu">plot</span>(brms_ht_rmse_mod)</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-475-1.png" width="1008" /><img src="metashape_testing_files/figure-html/unnamed-chunk-475-2.png" width="1008" /></p>
</div>
<div id="dbh-mean-error" class="section level4 hasAnchor" number="7.5.2.3">
<h4><span class="header-section-number">7.5.2.3</span> DBH Mean Error<a href="stats_detected.html#dbh-mean-error" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="stats_detected.html#cb613-1" tabindex="-1"></a><span class="co"># dbh me</span></span>
<span id="cb613-2"><a href="stats_detected.html#cb613-2" tabindex="-1"></a><span class="fu">plot</span>(brms_dbh_me_mod)</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-476-1.png" width="1008" /><img src="metashape_testing_files/figure-html/unnamed-chunk-476-2.png" width="1008" /></p>
</div>
<div id="dbh-rmse" class="section level4 hasAnchor" number="7.5.2.4">
<h4><span class="header-section-number">7.5.2.4</span> DBH RMSE<a href="stats_detected.html#dbh-rmse" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="stats_detected.html#cb614-1" tabindex="-1"></a><span class="co"># dbh rmse</span></span>
<span id="cb614-2"><a href="stats_detected.html#cb614-2" tabindex="-1"></a><span class="fu">plot</span>(brms_dbh_rmse_mod)</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-477-1.png" width="1008" /><img src="metashape_testing_files/figure-html/unnamed-chunk-477-2.png" width="1008" /></p>
</div>
</div>
<div id="hatr-values" class="section level3 hasAnchor" number="7.5.3">
<h3><span class="header-section-number">7.5.3</span> <span class="math inline">\(\hat{R}\)</span> values<a href="stats_detected.html#hatr-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="stats_detected.html#cb615-1" tabindex="-1"></a>plt_rhat_temp <span class="ot">&lt;-</span> <span class="cf">function</span>(my_mod) {</span>
<span id="cb615-2"><a href="stats_detected.html#cb615-2" tabindex="-1"></a>  my_mod <span class="sc">%&gt;%</span> </span>
<span id="cb615-3"><a href="stats_detected.html#cb615-3" tabindex="-1"></a>    brms<span class="sc">::</span><span class="fu">rhat</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb615-4"><a href="stats_detected.html#cb615-4" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb615-5"><a href="stats_detected.html#cb615-5" tabindex="-1"></a>    tibble<span class="sc">::</span><span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;parameter&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb615-6"><a href="stats_detected.html#cb615-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename_with</span>(tolower) <span class="sc">%&gt;%</span> </span>
<span id="cb615-7"><a href="stats_detected.html#cb615-7" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">rhat =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb615-8"><a href="stats_detected.html#cb615-8" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb615-9"><a href="stats_detected.html#cb615-9" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_starts</span>(parameter, <span class="st">&quot;b_&quot;</span>) </span>
<span id="cb615-10"><a href="stats_detected.html#cb615-10" tabindex="-1"></a>      <span class="sc">|</span> stringr<span class="sc">::</span><span class="fu">str_starts</span>(parameter, <span class="st">&quot;r_&quot;</span>) </span>
<span id="cb615-11"><a href="stats_detected.html#cb615-11" tabindex="-1"></a>      <span class="sc">|</span> stringr<span class="sc">::</span><span class="fu">str_starts</span>(parameter, <span class="st">&quot;sd_&quot;</span>) </span>
<span id="cb615-12"><a href="stats_detected.html#cb615-12" tabindex="-1"></a>      <span class="sc">|</span> parameter <span class="sc">==</span> <span class="st">&quot;phi&quot;</span></span>
<span id="cb615-13"><a href="stats_detected.html#cb615-13" tabindex="-1"></a>      <span class="sc">|</span> parameter <span class="sc">==</span> <span class="st">&quot;sigma&quot;</span></span>
<span id="cb615-14"><a href="stats_detected.html#cb615-14" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb615-15"><a href="stats_detected.html#cb615-15" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb615-16"><a href="stats_detected.html#cb615-16" tabindex="-1"></a>      <span class="at">parameter =</span> parameter <span class="sc">%&gt;%</span> </span>
<span id="cb615-17"><a href="stats_detected.html#cb615-17" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;depth_maps_generation_quality&quot;</span>, <span class="st">&quot;quality&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb615-18"><a href="stats_detected.html#cb615-18" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;depth_maps_generation_filtering_mode&quot;</span>, <span class="st">&quot;filtering&quot;</span>)</span>
<span id="cb615-19"><a href="stats_detected.html#cb615-19" tabindex="-1"></a>      , <span class="at">chk =</span> (rhat <span class="sc">&lt;=</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">0.998</span> <span class="sc">|</span> rhat <span class="sc">&gt;=</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">1.002</span>)</span>
<span id="cb615-20"><a href="stats_detected.html#cb615-20" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb615-21"><a href="stats_detected.html#cb615-21" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> rhat, <span class="at">y =</span> parameter, <span class="at">color =</span> chk, <span class="at">fill =</span> chk)) <span class="sc">+</span></span>
<span id="cb615-22"><a href="stats_detected.html#cb615-22" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">color =</span> <span class="st">&quot;gray44&quot;</span>, <span class="at">lwd =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb615-23"><a href="stats_detected.html#cb615-23" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">0.998</span>, <span class="at">lwd =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb615-24"><a href="stats_detected.html#cb615-24" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">1.002</span>, <span class="at">lwd =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb615-25"><a href="stats_detected.html#cb615-25" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">0.999</span>, <span class="at">lwd =</span> <span class="fl">1.2</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb615-26"><a href="stats_detected.html#cb615-26" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span><span class="sc">*</span><span class="fl">1.001</span>, <span class="at">lwd =</span> <span class="fl">1.2</span>, <span class="at">color =</span> <span class="st">&quot;gray33&quot;</span>) <span class="sc">+</span></span>
<span id="cb615-27"><a href="stats_detected.html#cb615-27" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb615-28"><a href="stats_detected.html#cb615-28" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;navy&quot;</span>, <span class="st">&quot;firebrick&quot;</span>)) <span class="sc">+</span></span>
<span id="cb615-29"><a href="stats_detected.html#cb615-29" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;navy&quot;</span>, <span class="st">&quot;firebrick&quot;</span>)) <span class="sc">+</span></span>
<span id="cb615-30"><a href="stats_detected.html#cb615-30" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="cn">NULL</span>, <span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb615-31"><a href="stats_detected.html#cb615-31" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb615-32"><a href="stats_detected.html#cb615-32" tabindex="-1"></a>      <span class="at">x =</span> latex2exp<span class="sc">::</span><span class="fu">TeX</span>(<span class="st">&quot;$</span><span class="sc">\\</span><span class="st">hat{R}$&quot;</span>)</span>
<span id="cb615-33"><a href="stats_detected.html#cb615-33" tabindex="-1"></a>      , <span class="at">subtitle =</span> latex2exp<span class="sc">::</span><span class="fu">TeX</span>(<span class="st">&quot;MCMC chain convergence check for $</span><span class="sc">\\</span><span class="st">hat{R}$ values&quot;</span>)</span>
<span id="cb615-34"><a href="stats_detected.html#cb615-34" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb615-35"><a href="stats_detected.html#cb615-35" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb615-36"><a href="stats_detected.html#cb615-36" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb615-37"><a href="stats_detected.html#cb615-37" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb615-38"><a href="stats_detected.html#cb615-38" tabindex="-1"></a>      , <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb615-39"><a href="stats_detected.html#cb615-39" tabindex="-1"></a>      , <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb615-40"><a href="stats_detected.html#cb615-40" tabindex="-1"></a>      , <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb615-41"><a href="stats_detected.html#cb615-41" tabindex="-1"></a>      , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb615-42"><a href="stats_detected.html#cb615-42" tabindex="-1"></a>      , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb615-43"><a href="stats_detected.html#cb615-43" tabindex="-1"></a>      , <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb615-44"><a href="stats_detected.html#cb615-44" tabindex="-1"></a>      , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb615-45"><a href="stats_detected.html#cb615-45" tabindex="-1"></a>      , <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb615-46"><a href="stats_detected.html#cb615-46" tabindex="-1"></a>      , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fl">6.5</span>)</span>
<span id="cb615-47"><a href="stats_detected.html#cb615-47" tabindex="-1"></a>    )</span>
<span id="cb615-48"><a href="stats_detected.html#cb615-48" tabindex="-1"></a>}</span>
<span id="cb615-49"><a href="stats_detected.html#cb615-49" tabindex="-1"></a><span class="co"># plot together with patchwork</span></span>
<span id="cb615-50"><a href="stats_detected.html#cb615-50" tabindex="-1"></a><span class="co"># height mean error</span></span>
<span id="cb615-51"><a href="stats_detected.html#cb615-51" tabindex="-1"></a>brms_ht_me_mod <span class="sc">%&gt;%</span> <span class="fu">plt_rhat_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height Mean Error (bias)&quot;</span>) <span class="sc">+</span></span>
<span id="cb615-52"><a href="stats_detected.html#cb615-52" tabindex="-1"></a><span class="co"># height rmse</span></span>
<span id="cb615-53"><a href="stats_detected.html#cb615-53" tabindex="-1"></a>brms_ht_rmse_mod <span class="sc">%&gt;%</span> <span class="fu">plt_rhat_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height RMSE (precision)&quot;</span>) <span class="sc">+</span></span>
<span id="cb615-54"><a href="stats_detected.html#cb615-54" tabindex="-1"></a><span class="co"># dbh me</span></span>
<span id="cb615-55"><a href="stats_detected.html#cb615-55" tabindex="-1"></a>brms_dbh_me_mod <span class="sc">%&gt;%</span> <span class="fu">plt_rhat_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;DBH Mean Error (bias)&quot;</span>) <span class="sc">+</span></span>
<span id="cb615-56"><a href="stats_detected.html#cb615-56" tabindex="-1"></a><span class="co"># dbh rmse</span></span>
<span id="cb615-57"><a href="stats_detected.html#cb615-57" tabindex="-1"></a>brms_dbh_rmse_mod <span class="sc">%&gt;%</span> <span class="fu">plt_rhat_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;DBH RMSE (precision)&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb615-58"><a href="stats_detected.html#cb615-58" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-478-1.png" width="1008" /></p>
</div>
<div id="ess-values" class="section level3 hasAnchor" number="7.5.4">
<h3><span class="header-section-number">7.5.4</span> ESS values<a href="stats_detected.html#ess-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The effective length of an MCMC chain is indicated by the effective sample size (ESS), which refers to the sample size of the MCMC chain <strong>not</strong> to the sample size of the data
<a href="https://sites.google.com/site/doingbayesiandataanalysis/">Kruschke (2015)</a> notes:</p>
<blockquote>
<p>One simple guideline is this: For reasonably accurate and stable estimates of the limits of the 95% HDI, an ESS of 10,000 is recommended. This is merely a heuristic based on experience with practical applications, it is not a requirement. If accuracy of the HDI limits is not crucial for your application, then a smaller ESS may be sufficient. (p.184)</p>
</blockquote>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="stats_detected.html#cb616-1" tabindex="-1"></a>plt_ess_temp <span class="ot">&lt;-</span> <span class="cf">function</span>(my_mod) {</span>
<span id="cb616-2"><a href="stats_detected.html#cb616-2" tabindex="-1"></a><span class="co"># get ess values from model summary</span></span>
<span id="cb616-3"><a href="stats_detected.html#cb616-3" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(</span>
<span id="cb616-4"><a href="stats_detected.html#cb616-4" tabindex="-1"></a>    <span class="fu">summary</span>(my_mod) <span class="sc">%&gt;%</span> </span>
<span id="cb616-5"><a href="stats_detected.html#cb616-5" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="st">&quot;random&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb616-6"><a href="stats_detected.html#cb616-6" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb616-7"><a href="stats_detected.html#cb616-7" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">keep_at</span>(<span class="sc">~</span> .x <span class="sc">==</span> <span class="st">&quot;Bulk_ESS&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb616-8"><a href="stats_detected.html#cb616-8" tabindex="-1"></a>      <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb616-9"><a href="stats_detected.html#cb616-9" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb616-10"><a href="stats_detected.html#cb616-10" tabindex="-1"></a>    , <span class="fu">summary</span>(my_mod) <span class="sc">%&gt;%</span> </span>
<span id="cb616-11"><a href="stats_detected.html#cb616-11" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="st">&quot;fixed&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb616-12"><a href="stats_detected.html#cb616-12" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">flatten</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb616-13"><a href="stats_detected.html#cb616-13" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">keep_at</span>(<span class="sc">~</span> .x <span class="sc">==</span> <span class="st">&quot;Bulk_ESS&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb616-14"><a href="stats_detected.html#cb616-14" tabindex="-1"></a>      <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb616-15"><a href="stats_detected.html#cb616-15" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb616-16"><a href="stats_detected.html#cb616-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb616-17"><a href="stats_detected.html#cb616-17" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">ess =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb616-18"><a href="stats_detected.html#cb616-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">parameter =</span> dplyr<span class="sc">::</span><span class="fu">row_number</span>(), <span class="at">chk =</span> ess<span class="sc">&lt;</span><span class="dv">10000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb616-19"><a href="stats_detected.html#cb616-19" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ess, <span class="at">y =</span> parameter, <span class="at">color =</span> chk, <span class="at">fill =</span> chk)) <span class="sc">+</span></span>
<span id="cb616-20"><a href="stats_detected.html#cb616-20" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10000</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">color =</span> <span class="st">&quot;gray44&quot;</span>, <span class="at">lwd =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb616-21"><a href="stats_detected.html#cb616-21" tabindex="-1"></a>  <span class="fu">geom_segment</span>( <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend=</span>ess, <span class="at">yend=</span>parameter), <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb616-22"><a href="stats_detected.html#cb616-22" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb616-23"><a href="stats_detected.html#cb616-23" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;navy&quot;</span>, <span class="st">&quot;firebrick&quot;</span>)) <span class="sc">+</span></span>
<span id="cb616-24"><a href="stats_detected.html#cb616-24" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;navy&quot;</span>, <span class="st">&quot;firebrick&quot;</span>)) <span class="sc">+</span></span>
<span id="cb616-25"><a href="stats_detected.html#cb616-25" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>, <span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb616-26"><a href="stats_detected.html#cb616-26" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb616-27"><a href="stats_detected.html#cb616-27" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb616-28"><a href="stats_detected.html#cb616-28" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;ESS&quot;</span></span>
<span id="cb616-29"><a href="stats_detected.html#cb616-29" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;MCMC chain convergence check for effective sample size (ESS) values&quot;</span></span>
<span id="cb616-30"><a href="stats_detected.html#cb616-30" tabindex="-1"></a>    , <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb616-31"><a href="stats_detected.html#cb616-31" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb616-32"><a href="stats_detected.html#cb616-32" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb616-33"><a href="stats_detected.html#cb616-33" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb616-34"><a href="stats_detected.html#cb616-34" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb616-35"><a href="stats_detected.html#cb616-35" tabindex="-1"></a>    , <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">4</span>)</span>
<span id="cb616-36"><a href="stats_detected.html#cb616-36" tabindex="-1"></a>    , <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb616-37"><a href="stats_detected.html#cb616-37" tabindex="-1"></a>    , <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb616-38"><a href="stats_detected.html#cb616-38" tabindex="-1"></a>    , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb616-39"><a href="stats_detected.html#cb616-39" tabindex="-1"></a>    , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb616-40"><a href="stats_detected.html#cb616-40" tabindex="-1"></a>    , <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb616-41"><a href="stats_detected.html#cb616-41" tabindex="-1"></a>    , <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb616-42"><a href="stats_detected.html#cb616-42" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fl">6.5</span>)</span>
<span id="cb616-43"><a href="stats_detected.html#cb616-43" tabindex="-1"></a>  )</span>
<span id="cb616-44"><a href="stats_detected.html#cb616-44" tabindex="-1"></a>}</span>
<span id="cb616-45"><a href="stats_detected.html#cb616-45" tabindex="-1"></a></span>
<span id="cb616-46"><a href="stats_detected.html#cb616-46" tabindex="-1"></a><span class="co"># plot together with patchwork</span></span>
<span id="cb616-47"><a href="stats_detected.html#cb616-47" tabindex="-1"></a><span class="co"># height mean error</span></span>
<span id="cb616-48"><a href="stats_detected.html#cb616-48" tabindex="-1"></a>brms_ht_me_mod <span class="sc">%&gt;%</span> <span class="fu">plt_ess_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height Mean Error (bias)&quot;</span>) <span class="sc">+</span></span>
<span id="cb616-49"><a href="stats_detected.html#cb616-49" tabindex="-1"></a><span class="co"># height rmse</span></span>
<span id="cb616-50"><a href="stats_detected.html#cb616-50" tabindex="-1"></a>brms_ht_rmse_mod <span class="sc">%&gt;%</span> <span class="fu">plt_ess_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height RMSE (precision)&quot;</span>) <span class="sc">+</span></span>
<span id="cb616-51"><a href="stats_detected.html#cb616-51" tabindex="-1"></a><span class="co"># dbh me</span></span>
<span id="cb616-52"><a href="stats_detected.html#cb616-52" tabindex="-1"></a>brms_dbh_me_mod <span class="sc">%&gt;%</span> <span class="fu">plt_ess_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;DBH Mean Error (bias)&quot;</span>) <span class="sc">+</span></span>
<span id="cb616-53"><a href="stats_detected.html#cb616-53" tabindex="-1"></a><span class="co"># dbh rmse</span></span>
<span id="cb616-54"><a href="stats_detected.html#cb616-54" tabindex="-1"></a>brms_dbh_rmse_mod <span class="sc">%&gt;%</span> <span class="fu">plt_ess_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;DBH RMSE (precision)&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb616-55"><a href="stats_detected.html#cb616-55" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-479-1.png" width="1008" /></p>
</div>
<div id="mean-and-sd" class="section level3 hasAnchor" number="7.5.5">
<h3><span class="header-section-number">7.5.5</span> Mean and SD<a href="stats_detected.html#mean-and-sd" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>posterior predictive check for the overall model combining mean and sd</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="stats_detected.html#cb617-1" tabindex="-1"></a>plt_pp_temp <span class="ot">&lt;-</span> <span class="cf">function</span>(my_mod) {</span>
<span id="cb617-2"><a href="stats_detected.html#cb617-2" tabindex="-1"></a>  my_mod <span class="sc">%&gt;%</span> </span>
<span id="cb617-3"><a href="stats_detected.html#cb617-3" tabindex="-1"></a>  brms<span class="sc">::</span><span class="fu">pp_check</span>(<span class="at">type =</span> <span class="st">&quot;stat_2d&quot;</span>, <span class="at">ndraws =</span> <span class="dv">5000</span>) <span class="sc">+</span></span>
<span id="cb617-4"><a href="stats_detected.html#cb617-4" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb617-5"><a href="stats_detected.html#cb617-5" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb617-6"><a href="stats_detected.html#cb617-6" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>, <span class="at">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span></span>
<span id="cb617-7"><a href="stats_detected.html#cb617-7" tabindex="-1"></a>      , <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb617-8"><a href="stats_detected.html#cb617-8" tabindex="-1"></a>      , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb617-9"><a href="stats_detected.html#cb617-9" tabindex="-1"></a>    )</span>
<span id="cb617-10"><a href="stats_detected.html#cb617-10" tabindex="-1"></a>}</span>
<span id="cb617-11"><a href="stats_detected.html#cb617-11" tabindex="-1"></a><span class="co"># plot together with patchwork</span></span>
<span id="cb617-12"><a href="stats_detected.html#cb617-12" tabindex="-1"></a><span class="co"># height mean error</span></span>
<span id="cb617-13"><a href="stats_detected.html#cb617-13" tabindex="-1"></a>brms_ht_me_mod <span class="sc">%&gt;%</span> <span class="fu">plt_pp_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height Mean Error (bias)&quot;</span>) <span class="sc">+</span></span>
<span id="cb617-14"><a href="stats_detected.html#cb617-14" tabindex="-1"></a><span class="co"># height rmse</span></span>
<span id="cb617-15"><a href="stats_detected.html#cb617-15" tabindex="-1"></a>brms_ht_rmse_mod <span class="sc">%&gt;%</span> <span class="fu">plt_pp_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Height RMSE (precision)&quot;</span>) <span class="sc">+</span></span>
<span id="cb617-16"><a href="stats_detected.html#cb617-16" tabindex="-1"></a><span class="co"># dbh me</span></span>
<span id="cb617-17"><a href="stats_detected.html#cb617-17" tabindex="-1"></a>brms_dbh_me_mod <span class="sc">%&gt;%</span> <span class="fu">plt_pp_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;DBH Mean Error (bias)&quot;</span>) <span class="sc">+</span></span>
<span id="cb617-18"><a href="stats_detected.html#cb617-18" tabindex="-1"></a><span class="co"># dbh rmse</span></span>
<span id="cb617-19"><a href="stats_detected.html#cb617-19" tabindex="-1"></a>brms_dbh_rmse_mod <span class="sc">%&gt;%</span> <span class="fu">plt_pp_temp</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;DBH RMSE (precision)&quot;</span>)</span></code></pre></div>
<p><img src="metashape_testing_files/figure-html/unnamed-chunk-480-1.png" width="1008" /></p>
<div id="bayesian-p-value" class="section level4 hasAnchor" number="7.5.5.1">
<h4><span class="header-section-number">7.5.5.1</span> Bayesian p-value<a href="stats_detected.html#bayesian-p-value" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The Bayesian p-value is the probability that a test statistic in the reference distribution exceeds its value in the data. The Bayesian p-value is calculated from the posterior predictive distribution of the new data and the distribution of the observed data. We estimate the probability that the test statistic calculated from “new” data arising from our model (<span class="math inline">\(y_{new}\)</span>) is more extreme than the test statistic calculated from the observed data (<span class="math inline">\(y\)</span>): <span class="math inline">\(\text{P-value}(y) = Pr(T(y_{new}) &gt; T(y))\)</span> where the test statistic <span class="math inline">\(T(y)\)</span> describes the distribution of the data as a summary of the data; it could be the mean, variance, the coefﬁcient of variation, the kurtosis, the maximum, or the minimum of the observed data set, or it might be an “omnibus” statistic like a squared discrepancy or a chi-square value <a href="https://scholar.google.com/scholar?cluster=9228589188684720156&amp;oi=gsb&amp;hl=en&amp;as_sdt=0,6">Hobbs and Hooten (2015, p. 188)</a></p>
<blockquote>
<p>Bayesian P values for mean and standard deviation test statistics The P values for the mean (P mean) give the probability that the mean of the data of new, out-of-sample observations simulated from the model exceeds the mean of the observed data. The P values for the standard deviation (P SD) give the probability that the standard deviation of new, out-of-sample observations simulated from the model exceeds the standard deviation of the observed data. Large (<span class="math inline">\(\gtrapprox 0.90\)</span>) or small (<span class="math inline">\(\lessapprox 0.10\)</span>) values indicate lack of fit. <a href="https://scholar.google.com/scholar?cluster=9228589188684720156&amp;oi=gsb&amp;hl=en&amp;as_sdt=0,6">Hobbs and Hooten (2015)</a>;<a href="https://esajournals.onlinelibrary.wiley.com/doi/abs/10.1002/ecm.1598">Hobbs et al. (2024, Appendix S2 p. 8)</a></p>
</blockquote>
<p>Check the Bayesian p-values between the models</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb618-1"><a href="stats_detected.html#cb618-1" tabindex="-1"></a><span class="co"># get the model p-values</span></span>
<span id="cb618-2"><a href="stats_detected.html#cb618-2" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(</span>
<span id="cb618-3"><a href="stats_detected.html#cb618-3" tabindex="-1"></a>    <span class="fu">get_mod_p_val</span>(brms_ht_me_mod, <span class="at">my_var =</span> <span class="st">&quot;tree_height_m_me&quot;</span>, <span class="at">ndraws =</span> <span class="dv">5000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb618-4"><a href="stats_detected.html#cb618-4" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">&quot;brms_ht_me_mod&quot;</span>)</span>
<span id="cb618-5"><a href="stats_detected.html#cb618-5" tabindex="-1"></a>    , <span class="fu">get_mod_p_val</span>(brms_ht_rmse_mod, <span class="at">my_var =</span> <span class="st">&quot;tree_height_m_rmse&quot;</span>, <span class="at">ndraws =</span> <span class="dv">5000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb618-6"><a href="stats_detected.html#cb618-6" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">&quot;brms_ht_rmse_mod&quot;</span>)</span>
<span id="cb618-7"><a href="stats_detected.html#cb618-7" tabindex="-1"></a>    , <span class="fu">get_mod_p_val</span>(brms_dbh_me_mod, <span class="at">my_var =</span> <span class="st">&quot;dbh_cm_me&quot;</span>, <span class="at">ndraws =</span> <span class="dv">5000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb618-8"><a href="stats_detected.html#cb618-8" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">&quot;brms_dbh_me_mod&quot;</span>)</span>
<span id="cb618-9"><a href="stats_detected.html#cb618-9" tabindex="-1"></a>    , <span class="fu">get_mod_p_val</span>(brms_dbh_rmse_mod, <span class="at">my_var =</span> <span class="st">&quot;dbh_cm_rmse&quot;</span>, <span class="at">ndraws =</span> <span class="dv">5000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb618-10"><a href="stats_detected.html#cb618-10" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">&quot;brms_dbh_rmse_mod&quot;</span>)</span>
<span id="cb618-11"><a href="stats_detected.html#cb618-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb618-12"><a href="stats_detected.html#cb618-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb618-13"><a href="stats_detected.html#cb618-13" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(<span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb618-14"><a href="stats_detected.html#cb618-14" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>()</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
model
</th>
<th style="text-align:right;">
P.mean
</th>
<th style="text-align:right;">
P.sd
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
brms_ht_me_mod
</td>
<td style="text-align:right;">
0.51
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
<tr>
<td style="text-align:left;">
brms_ht_rmse_mod
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
brms_dbh_me_mod
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
0.61
</td>
</tr>
<tr>
<td style="text-align:left;">
brms_dbh_rmse_mod
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
0.66
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="stats_validation.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
